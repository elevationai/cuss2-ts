{
  "version": 3,
  "sources": ["../../../Library/Caches/deno/deno_esbuild/registry.npmjs.org/events@3.3.0/node_modules/events/events.js", "../.temp/bundle-entry.js", "https://jsr.io/@cuss/cuss2-typescript-models/2.0.1/mod.ts", "https://jsr.io/@cuss/cuss2-typescript-models/2.0.1/src/types.gen.ts", "../src/helper.ts", "../src/models/EventEmitter.ts", "../src/models/base/BaseComponent.ts", "../src/models/deviceType.ts", "../src/models/base/InteractiveComponent.ts", "../src/models/base/UnknownComponent.ts", "../src/models/base/DataInputComponent.ts", "../src/models/base/componentUtils.ts", "../src/models/base/DataOutputComponent.ts", "../src/models/base/UserInputComponent.ts", "../src/models/base/UserOutputComponent.ts", "../src/models/base/MediaInputComponent.ts", "../src/models/base/MediaOutputComponent.ts", "../src/models/base/BaggageScaleComponent.ts", "../src/models/base/AnnouncementComponent.ts", "../src/models/base/DispenserComponent.ts", "../src/models/base/FeederComponent.ts", "../src/models/BarcodeReader.ts", "../src/models/DocumentReader.ts", "../src/models/CardReader.ts", "../src/models/Scale.ts", "../src/models/RFID.ts", "../src/models/Camera.ts", "../src/models/AEASBD.ts", "../src/models/BHS.ts", "../src/models/Feeder.ts", "../src/models/Dispenser.ts", "../src/models/platformResponseError.ts", "../src/models/Printer.ts", "../src/models/BagTagPrinter.ts", "../src/models/BoardingPassPrinter.ts", "../src/models/Keypad.ts", "../src/models/Announcement.ts", "../src/models/Illumination.ts", "../src/models/Headset.ts", "../src/models/Biometric.ts", "../src/models/Errors.ts", "https://jsr.io/@std/async/1.0.15/_util.ts", "https://jsr.io/@std/async/1.0.15/retry.ts", "../src/connection.ts", "../src/models/stateChange.ts", "../src/types/modelExtensions.ts", "../src/componentInterrogation.ts", "../src/cuss2.ts"],
  "sourcesContent": ["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n", "\n// Temporary bundle entry point\nimport { Cuss2 } from \"../mod.ts\";\n\n// Re-export Cuss2 as the primary export\nexport { Cuss2 };\n\n// Also create named exports for everything from cuss2-typescript-models\nimport * as Models from \"cuss2-typescript-models\";\n\n// Add all models under a 'Models' namespace\nexport { Models };\n\n// Export helpers and state change\nexport * from \"../src/helper.ts\";\nexport * from \"../src/models/stateChange.ts\";\n", "import type { ApplicationData, PlatformData } from \"./src/index.ts\";\n\nexport * from \"./src/types.gen.ts\";\nexport type ApplicationDataMeta = ApplicationData[\"meta\"];\nexport type ApplicationDataPayload = ApplicationData[\"payload\"];\nexport type PlatformDataMeta = PlatformData[\"meta\"];\n", "// This file is auto-generated by @hey-api/openapi-ts\n\n/**\n * Individual agreement/consent text to present to the potential enrollee.\n */\nexport type AgreementTextType = {\n    agreementText?: string;\n    acceptanceMandatory: boolean;\n    agreementName?: string;\n};\n\n/**\n * Individual association data item, exclusively maintained by and meaningful only to the client.\n */\nexport type AssociationDataItemType = {\n    data?: string;\n    associationDataTag: string;\n};\n\n/**\n * Replacement of the former CORBA Any data type. This redundant element is included for document consistency, documentation and as a placeholder for future functionality only. A characteristics request does not have to explicitly include it.\n */\nexport type BiometricAnyType = string | number | boolean;\n\n/**\n * Common use biometric provider component request/response message.\n */\nexport type BiometricProviderMessage = {\n    biometricProviderMessageType: BiometricProviderMessageType;\n    biometricProviderMessageReturnType: BiometricProviderMessageType;\n    /**\n     * What type of biometric provider message this is.\n     */\n    biometricFunctionType: 'ASSOCIATE' | 'DISASSOCIATE' | 'ENROLL' | 'GET_ASSOCIATIONS' | 'IDENTIFY' | 'PREVIEW' | 'PURGE' | 'VERIFY';\n    /**\n     * Biometric function request from common use application to biometric provider component.\n     */\n    biometricRequest?: {\n        /**\n         * Execution environment and parameters.\n         */\n        environment?: {\n            /**\n             * Whether to execute the biometric function in accessibility mode.\n             */\n            accessibilityMode?: boolean;\n            /**\n             * ISO 639-1 (2-character) code for the interface language to be used by the biometric provider.\n             */\n            language: string;\n        };\n        /**\n         * List of agreements/consents to present prior to or during enrollment.\n         */\n        agreementsList?: {\n            agreementTextList: Array<AgreementTextType>;\n        };\n        passenger?: PassengerDataType;\n        gpDataList?: GpDataListType;\n    };\n    /**\n     * Supplementary device-acquired or other unsolicited data received and forwarded by application during biometric provider function execution.\n     */\n    biometricRequestData?: {\n        processing?: {\n            /**\n             * A sequence of one or more keypad key identifiers as defined in the CUSS specification \"Keyboard and Navigation Keypad\" section. Values include, but are not limited to, NAVUP, NAVDOWN, NAVPREVIOUS, NAVNEXT, NAVENTER, NAVHOME, NAVEND and NAVHELP.\n             */\n            keypadKey?: Array<string>;\n        };\n        passenger?: PassengerDataType;\n    };\n    /**\n     * Function request response from biometric provider component to common use application.\n     */\n    biometricResponse?: {\n        responseType: 'CANCELLATION' | 'FAILURE' | 'NOTIFICATION' | 'SUCCESS';\n        /**\n         * Failure specification.\n         */\n        failureReason?: {\n            /**\n             * Eror code as received and mapped from the IMPs response.\n             */\n            failureCode: 'FAILED' | 'TIMEOUT' | 'CAMERA_ERROR' | 'INVALID_CONFIGURATION' | 'MATCH_FAILED' | 'NOT_IDENTIFIED' | 'POOR_CAMERA_IMAGE' | 'POOR_DOCUMENT_IMAGE' | 'DATA_SET_NOT_FOUND' | 'FACE_NOT_DETECTED' | 'CAPTURE_FAILED';\n            /**\n             * Optional free form text describing the failure.\n             */\n            failureDescription?: string;\n        };\n        passengerData?: PassengerDataType;\n        gpDataList?: GpDataListType;\n    };\n};\n\n/**\n * What type of biometric provider message is expected to be returned.\n */\nexport enum BiometricProviderMessageType {\n    NONE = 'NONE',\n    REQUEST = 'REQUEST',\n    REQUEST_DATA = 'REQUEST_DATA',\n    RESPONSE = 'RESPONSE'\n}\n\n/**\n * Characteristics document type.\n */\nexport enum CharacteristicsDocumentType {\n    NONE = 'NONE',\n    REQUEST = 'REQUEST',\n    RESPONSE = 'RESPONSE'\n}\n\n/**\n * Common use message document root element.\n */\nexport type CommonUseBiometricMessage = {\n    /**\n     * The document type that is included in this message.\n     */\n    documentType: 'CHARACTERISTICS' | 'BIOMETRIC_PROVIDER_MESSAGE' | 'ERROR_RESPONSE';\n    /**\n     * An arbitrary tracking value that the CUSS application chooses and assigns when starting a biometric provider function. The CUSS platform must then echo this requested value in all subsequent responses or asynchronous event messages related to that biometric provider function. This correlation permits a CUSS application to match and associate request and response messages and is critical for the case where an application has more than one multi-step biometric provider function ongoing concurrently.\n     */\n    sessionID?: string;\n    /**\n     * Component characteristics.\n     */\n    characteristics?: {\n        characteristicsDocumentType: CharacteristicsDocumentType;\n        characteristicsDocumentReturnType: CharacteristicsDocumentType;\n        characteristicsRequest?: BiometricAnyType;\n    };\n    biometricProviderMessage?: BiometricProviderMessage;\n    /**\n     * Error code as reported from the CUSS platform.\n     */\n    errorResponse?: 'DATA_ERROR' | 'FORMAT_ERROR' | 'ILLOGICAL';\n};\n\n/**\n * General Purpose Data Item (name-value pair)\n */\nexport type GpDataItemType = {\n    /**\n     * The name of this specific data item.\n     */\n    name: string;\n    /**\n     * Individual association data item, exclusively maintained by and meaningful only to the client.\n     */\n    value: string;\n};\n\n/**\n * Passenger attribute association data managed by the client.\n */\nexport type GpDataListType = {\n    /**\n     * Individual association data item, exclusively maintained by and meaningful only to the client.\n     */\n    gpDataItems: Array<GpDataItemType>;\n};\n\n/**\n * The MRZ track and its corresponding index.\n */\nexport type MrzTrackType = {\n    trackData?: string;\n    trackNumber?: number;\n};\n\n/**\n * Passenger biometrics data item.\n */\nexport type PassengerBiometricsType = {\n    data?: string;\n    biometricsType: 'FACE' | 'FINGER' | 'IRIS' | 'PALM';\n    lightType?: 'IR' | 'UV' | 'VISIBLE';\n    dataSource?: 'BIOMETRIC_PROVIDER' | 'CAMERA' | 'MRTD_CHIP' | 'MRTD_VISIBLE' | 'SCANNER';\n    dataFormat: 'BMP' | 'JPG' | 'PNG';\n};\n\n/**\n * Biometric function request passenger data.\n */\nexport type PassengerDataType = {\n    /**\n     * Can be a maximum of 2 IDs (client and provider).\n     */\n    passengerIDs?: Array<PassengerIdType>;\n    /**\n     * Passenger's family name (last name or surname).\n     */\n    passengerFamilyName?: string;\n    /**\n     * Passenger's given name (christian or first names).\n     */\n    passengerGivenNames?: string;\n    /**\n     * MRZ data from passenger's government-issued travel, visa or residency document.\n     */\n    passengerMRZData?: {\n        mrzTrackData: Array<MrzTrackType>;\n    };\n    /**\n     * List or container of all passenger biometric data sets.\n     */\n    passengerBiometricsData?: {\n        passengerBiometrics: Array<PassengerBiometricsType>;\n    };\n    /**\n     * Passenger attribute association data managed by the client.\n     */\n    associationDataList?: {\n        /**\n         * Individual association data item, exclusively maintained by and meaningful only to the client.\n         */\n        associationDataItem?: Array<AssociationDataItemType>;\n    };\n};\n\n/**\n * Airline client-defined or biometric provider-defined unique passenger identifier.\n */\nexport type PassengerIdType = {\n    identifier?: string;\n    identifierType?: 'CLIENT' | 'PROVIDER';\n};\n\n/**\n * Definition for light controls.\n */\nexport type IlluminationData = {\n    /**\n     * The duration of the illumination in milliseconds (steady or blinking). - A negative value value (e.g. -1) defines the duration as infinite and lasts until disable() is called on the component.\n     */\n    duration: number;\n    /**\n     * The color of the light in RGB values. A value of 255,255,255 means white, a value of 0,0,0 (black) would switch the light off. Instead of separate values for RGB named color values may be used. - Light may support only a single color.\n     */\n    lightColor: {\n        /**\n         * Predefined values: CLR_ON, CLR_OFF, CLR_RED, CLR_GREEN, CLR_BLUE, CLR_DARKRED, CLR_DARKGREEN, CLR_DARKBLUE, CLR_YELLOW, CLR_MAGENTA, CLR_CYAN, CLR_AMBER, CLR_PURPLE, CLR_SPRINGGREEN, CLR_WHITE\n         */\n        name?: 'CLR_ON' | 'CLR_OFF' | 'CLR_RED' | 'CLR_GREEN' | 'CLR_BLUE' | 'CLR_DARKRED' | 'CLR_DARKGREEN' | 'CLR_DARKBLUE' | 'CLR_YELLOW' | 'CLR_MAGENTA' | 'CLR_CYAN' | 'CLR_AMBER' | 'CLR_PURPLE' | 'CLR_SPRINGGREEN' | 'CLR_WHITE';\n        rgb?: RgbType;\n    };\n    blinkRate?: BlinkingRateType;\n};\n\n/**\n * The definition of the blinking rate. If a pair of 0,0 is specified (default) or only one value is 0 blinking is turned off.\n */\nexport type BlinkingRateType = {\n    /**\n     * Time in milliseconds the light remains switched off.\n     */\n    durationOff: number;\n    /**\n     * Time in milliseconds the light is switched on.\n     */\n    durationOn: number;\n};\n\n/**\n * Distinct RGB values.\n */\nexport type RgbType = {\n    /**\n     * Value for the red color part. Values from 0 - 255.\n     */\n    red: number;\n    /**\n     * Value for the red color part. Values from 0 - 255.\n     */\n    green: number;\n    /**\n     * Value for the red color part. Values from 0 - 255.\n     */\n    blue: number;\n};\n\n/**\n * Authorized financial elements (mandatory in response, not required in request).\n */\nexport type AmountType = {\n    /**\n     * ISO 4217 (3-character alpha) currency code.\n     */\n    currencyCode: string;\n    /**\n     * Requested or authorized amount in units.subunits (arithmetic major units) format.\n     */\n    baseAmount: number;\n};\n\n/**\n * Acquirer or issuer provided approval (authorization) code.\n */\nexport type ApprovalCode = string;\n\n/**\n * Requested or authorized financial elements.\n */\nexport type AuthorizationAmounts = {\n    requestedAmounts?: AmountType;\n    approvedAmounts?: AmountType;\n};\n\n/**\n * A string identifying the card brand or scheme that can be accepted for payment.\n *\n */\nexport enum CardBrand {\n    AMEX = 'AMEX',\n    CART_BLANCHE = 'CART_BLANCHE',\n    DISCOVER = 'DISCOVER',\n    JCB = 'JCB',\n    MAESTRO = 'MAESTRO',\n    MASTERCARD = 'MASTERCARD',\n    SWITCH = 'SWITCH',\n    VISA = 'VISA'\n}\n\n/**\n * Payment system supported, component-configured or application-requested card brand list.\n */\nexport type CardBrandList = {\n    overridable?: boolean;\n    cardBrands: Array<CardBrand>;\n};\n\n/**\n * Characteristics document type.\n */\n/* Commenting out duplicate ....\nexport enum CharacteristicsDocumentType {\n    NONE = 'NONE',\n    REQUEST = 'REQUEST',\n    RESPONSE = 'RESPONSE'\n}\n*/\n\n/**\n * Common use message document root element.\n */\nexport type CommonUsePaymentMessage = {\n    /**\n     * An arbitrary tracking value that the CUSS application chooses and assigns when starting a payment function. The CUSS platform must then echo\n     * this requested value in all subsequent responses or asynchronous event messages related to that payment function. This correlation permits a\n     * CUSS application to match and associate request and response messages and is critical for the case where an application has more than one multi-step\n     * payment function ongoing concurrently.\n     */\n    sessionID?: string;\n    /**\n     * The document type that is included in this message.\n     */\n    documentType: 'CHARACTERISTICS' | 'EPAYMENT_MESSAGE' | 'ERROR_RESPONSE';\n    /**\n     * Component characteristics.\n     */\n    characteristics?: {\n        /**\n         * The list of supported languages as ISO 639-1 (2-character) codes.\n         */\n        supportedLanguages?: Array<string>;\n        characteristicsDocumentType: CharacteristicsDocumentType;\n        characteristicsDocumentReturnType: CharacteristicsDocumentType;\n        characteristicsResponse?: {\n            /**\n             * ePayment component characteristics.\n             */\n            ePayment?: {\n                featureList?: FeatureList;\n                cardBrandList?: CardBrandList;\n                mediaTypeList?: MediaTypeList;\n                currencyCodeList?: CurrencyCodeList;\n            };\n        };\n    };\n    ePaymentMessage?: EPaymentMessage;\n    /**\n     * Document cannot be parsed or validated, or is unexpected, out-of-sequence or out-of-context for the current component state.\n     */\n    errorResponse?: {\n        /**\n         * Echo of unreadable or illogical document in base64 format.\n         */\n        errorDocument?: string;\n        /**\n         * Human-readable reason that the document could not be processed by the component.\n         */\n        errorReason: 'DATA_ERROR' | 'FORMAT_ERROR' | 'ILLOGICAL';\n        /**\n         * Error code as reported from the system(s) down the line.\n         */\n        errorCode: number;\n    };\n};\n\n/**\n * ISO 4217 (3-character alpha) currency code.\n */\nexport type CurrencyCode = string;\n\n/**\n * Payment system supported, component-configured or application-requested payment currency code list.\n */\nexport type CurrencyCodeList = {\n    overridable?: boolean;\n    currencyCodes: Array<CurrencyCode>;\n};\n\n/**\n * Common use payment component request/response message.\n */\nexport type EPaymentMessage = {\n    ePaymentMsgType: 'OPERATION' | 'SETUP' | 'TRANSACTION';\n    /**\n     * Execution context setup.\n     */\n    setup?: {\n        merchantID?: MerchantId;\n        featureList?: FeatureList;\n        cardBrandList?: CardBrandList;\n        mediaTypeList?: MediaTypeList;\n        currencyCodeList?: CurrencyCodeList;\n    };\n    /**\n     * Financial transaction.\n     */\n    transaction?: {\n        transactionDocumentType: TransactionDocumentType;\n        transactionDocumentReturnType?: TransactionDocumentType;\n        transactionType: 'CANCEL' | 'PRE_AUTH' | 'POST_AUTH' | 'PURCHASE' | 'REFUND' | 'VOID_PURCHASE' | 'VOID_REFUND';\n        /**\n         * Financial request from common use application to payment component.\n         */\n        transactionRequest?: {\n            /**\n             * ISO 639-1 (2-character) code for the interface language to be used at the payment device and in transaction status messages.\n             * This is an optional value that lets the CUSS application suggest a language to use when performing the payment transaction.\n             * The payment subsystem could use this value to adjust prompts displayed on the payment terminal screen or the language on the\n             * preformatted receipt data. This value could be set in response to a prior language selection by the kiosk application user as\n             * part of the overall kiosk transaction. The payment system may override this setting once a language value is read from the card\n             * itself as part of the transaction.\n             */\n            language?: string;\n            /**\n             * Optional common use terminal/application operational parameters, allowing the CUSS application to indicate more specific values related\n             * to the payment transaction for tracking and reconciliation purposes. If the CUSS application does not supply any values, the CUSS platform\n             * may provide appropriate values to the payment subsystem depending on what data fields that subsystem requires.\n             */\n            environment?: {\n                merchantID?: MerchantId;\n                /**\n                 * Common use kiosk/terminal/station identifier. May be reported on cardholder or reconciliation statements for informational purposes.\n                 */\n                location?: string;\n                /**\n                 * Agent/cashier (or pseudo-cashier) identifier. May be reported on cardholder or reconciliation statements for informational purposes.\n                 * Some payment solutions may require this, but the component will synthesize a value if one is required but none is explicitly provided.\n                 */\n                cashier?: string;\n                /**\n                 * Airline/merchant order, receipt or ticket reference number. May be reported on cardholder or reconciliation statements\n                 * for informational purposes.\n                 */\n                orderReference?: string;\n            };\n            /**\n             * Details of previously acquired pre-authorization being finalized by this post-authorization.\n             */\n            preAuth?: {\n                transactionReference?: TransactionReference;\n                approvalCode?: ApprovalCode;\n                approvalAmounts: AmountType;\n            };\n            /**\n             * The information in the itinerary block is optional and lets the CUSS application specific additional tracking and\n             * reconciliation data for the payment transaction, relating specifically to an airline transaction itinerary.\n             * The CUSS platform provider may mandate that this information be provided with all transactions.\n             * This requirement will be established during the negotiation and configuration phase of the initial deployment of\n             * payment capability for an airline. It is anticipated that the CUSS platform itself will not store or make use of this\n             * information. Instead, it will be forwarded to the payment solution for back-end reconciliation purposes.\n             */\n            itinerary?: {\n                /**\n                 * Passenger name.\n                 */\n                name?: string;\n                /**\n                 * Passenger name record.\n                 */\n                pnr?: string;\n                /**\n                 * Transaction (flight) date (e.g. 2018-11-13).\n                 */\n                date?: string;\n                /**\n                 * Airline identifier and flight number.\n                 */\n                'flight-number'?: string;\n                /**\n                 * Departure city code.\n                 */\n                'departure-city'?: string;\n                /**\n                 * Arrival city code.\n                 */\n                'arrival-city'?: string;\n            };\n            /**\n             * Descriptive billing information. This optional value lets the CUSS application suggest a value that will\n             * appear on the kiosk application user\u2019s payment summary (monthly bill, etc.) as an extended description of\n             * the transaction. The value may or may not appear on the customer\u2019s bill depending on the capabilities of\n             * the airport and customer\u2019s banking systems. Long data may be truncated. The platform may also be used as\n             * an additional tracking mechanism for other systems such as aggregator and reconciliation infrastructure.\n             */\n            billingDescription?: string;\n            gpParameters?: GpParameterList;\n            authorizationAmounts?: AuthorizationAmounts;\n        };\n        /**\n         * Financial request response from payment component to common use application.\n         */\n        transactionResponse?: {\n            responseType: 'APPROVAL' | 'CANCELLATION' | 'DECLINE' | 'FAILURE' | 'STATUS';\n            /**\n             * Approval reference information. An application may use this information as it chooses. No sensitive payment information\n             * shall be provided in this element. Various data items, such as cryptogram, may be required by some application providers\n             * for proper payment processing and reconciliation.\n             */\n            approval?: {\n                cardholderReceiptPrinted?: boolean;\n                merchantReceiptPrinted?: boolean;\n                transactionReference?: TransactionReference;\n                mediaType?: MediaType;\n                /**\n                 * Type of approval.\n                 */\n                approvalType?: 'NONE' | 'PIN' | 'SIGNATURE';\n                /**\n                 * For an approval that requires subsequent signature verification by the application, and where the\n                 * component has electronic signature capture capability, the signature capture (PNG format) data\n                 * in base64 representation.\n                 */\n                signatureCapture?: string;\n                /**\n                 * Card brand name.\n                 */\n                cardBrand?: string;\n                approvalCode?: ApprovalCode;\n                gpParameters?: GpParameterList;\n                authorizationAmounts: AuthorizationAmounts;\n                receiptData?: Array<ReceiptData>;\n            };\n            /**\n             * Decline, referral, failure or cancellation details. This element encapsulates the specific reason a transaction was not approved.\n             * The non-approval-reason-code and referral values are not standard and will vary between payment systems. These values are likely\n             * useful for logging and reconciliation purposes and would not likely be exposed to the kiosk user or affect the business logic of\n             * the kiosk transaction.\n             */\n            nonApproval?: {\n                nonApprovalReasonCode?: number;\n                referral?: boolean;\n                /**\n                 * Optional human-readable/display text describing the reason for non-approval.\n                 */\n                nonApprovalReasonText?: string;\n                receiptData?: Array<ReceiptData>;\n            };\n            transactionStatus?: TransactionStatus;\n        };\n        /**\n         * Confirmation (or rejection) of approved funds consumption.\n         */\n        transactionAcknowledge?: {\n            consumed: boolean;\n        };\n    };\n    /**\n     * Request that the component perform some function that is not a direct financial transaction, such as key management,\n     * start-of-day, end-of-day, cashier sign-on, system status check, etc.\n     */\n    operation?: {\n        operationDocumentType: OperationDocumentType;\n        operationDocumentReturnType?: OperationDocumentType;\n        operationType: 'SYSTEM_HEALTH' | 'END_OF_DAY' | 'START_OF_DAY' | 'SIGN_ON' | 'MERCHANT_SWITCH' | 'KEY_MANAGEMENT';\n        /**\n         * Some requests may require additional qualifying data, but those that are not required to explicitly include this element.\n         */\n        operationRequest?: string;\n        operationResponse?: 'OFFLINE' | 'ONLINE' | 'COMPLETED' | 'IN_PROGRESS';\n    };\n};\n\n/**\n * What modes of payment are supported by the payment terminal or requested by the application. The application requests a\n * particular mode of payment in its setup() request parameters. The auto-commit feature indicates whether or not the application\n * wishes to perform a manual commit at the end of a successful transaction. The pre-authorization feature indicates whether the\n * pre-authorization/post-authorization payment model is supported.\n */\nexport type Feature = {\n    featureName: 'AUTO_COMMIT' | 'PRE_AUTHORIZATION' | 'RECEIPT_PRINTER' | 'SIGNATURE_CAPTURE' | 'SIGNATURE_CVM_SUPPORTED';\n    overridable?: boolean;\n};\n\n/**\n * Payment system supported, component-configured or application-requested feature set.\n */\nexport type FeatureList = {\n    features: Array<Feature>;\n};\n\n/**\n * General Purpose Data Item (name-value pair).\n */\nexport type GpParameter = {\n    name: string;\n    value: string;\n};\n\n/**\n * General-purpose parameters.\n */\nexport type GpParameterList = {\n    /**\n     * Special or proprietary payment parameters that can be provided by the CUSS application when requesting the payment,\n     * and/or returned by the payment subsystem upon conclusion of the transaction. These are optional values. This container\n     * is included in the schema to allow certain legacy payment protocols to be migrated to use the new payment interface.\n     * It also allows for flexibility for future payment industry requirements that may affect common use or airline payment.\n     */\n    gpParameters?: Array<GpParameter>;\n};\n\n/**\n * A media type that the payment terminal is able to accept. The application can restrict these types via setup()\n * if the overridable attribute is true.\n *\n */\nexport enum MediaType {\n    ICC = 'ICC',\n    NFC = 'NFC',\n    RFID = 'RFID'\n}\n\n/**\n * Payment system supported, component-configured or application-requested media type list.\n */\nexport type MediaTypeList = {\n    overridable?: boolean;\n    mediaTypes: Array<MediaType>;\n};\n\n/**\n * Optional airline/merchant identifier where operating in a multi-merchant environment.\n */\nexport type MerchantId = string;\n\n/**\n * Operation document type.\n */\nexport enum OperationDocumentType {\n    REQUEST = 'REQUEST',\n    RESPONSE = 'RESPONSE'\n}\n\n/**\n * Acquirer-provided pre-formatted receipt data. This element provides pre-formatted receipt data that is the application\u2019s responsibility to process\n * as required. It is an application business logic decision, and potentially a bank certification requirement, to properly format and process this data\n * on a receipt for the customer.\n */\nexport type ReceiptData = string;\n\n/**\n * Transaction document type.\n */\nexport enum TransactionDocumentType {\n    NONE = 'NONE',\n    REQUEST = 'REQUEST',\n    RESPONSE = 'RESPONSE',\n    ACK = 'ACK'\n}\n\n/**\n * Acquirer or issuer provided reference to use for subsequent post-authorization or void request (unique transaction identifier, STAN).\n */\nexport type TransactionReference = string;\n\n/**\n * The status of the current payment transaction reported by the payment subsystem to the application.\n */\nexport type TransactionStatus = {\n    /**\n     * Any text that is sent from the black box device to the platfrom/application\n     */\n    freeFormText?: string;\n    transactionStatusID?: 'AMOUNT_APPROVAL' | 'APPLICATION_SELECTION' | 'CARD_INSERTION' | 'CARD_REMOVAL' | 'CASHBACK_ENTRY' | 'PIN_ENTRY' | 'PROCESSING';\n};\n\n/**\n * Direct Interface Acknowledge Codes.\n */\nexport type ApiAcknowledgement = {\n    ackCode: AckCodes;\n    requestID: UniqueId;\n    /**\n     * Optional description of the returned error (if any).\n     */\n    description?: string;\n};\n\n/**\n * Interface Return Codes definitions with the following semantics...<p>\n * *ACK_OK:* Directive has been accepted by the CUSS platform and will be processed. - Check listener for asynchronous result(s). <br>\n * *ACK_ERROR:* Any error occurred when calling the endpoint. - Check listener for detailed error/status code. <br>\n * *ACK_OAUTH_ERROR:* Application passed an invalid token when trying to execute the directive. <br>\n * *ACK_PARAMETER:* Error in parameters, such as a missing component ID, missing or incorrect data.\n *\n */\nexport enum AckCodes {\n    ACK_OK = 'ACK_OK',\n    ACK_ERROR = 'ACK_ERROR',\n    ACK_OAUTH_ERROR = 'ACK_OAUTH_ERROR',\n    ACK_PARAMETER = 'ACK_PARAMETER'\n}\n\n/**\n * Reference or confirmation number for the weighing values, for audit or alibi purposes.\n */\nexport type AlibiType = {\n    /**\n     * The source or provider of the alibi value.\n     */\n    provider?: string;\n    /**\n     * The alibi value.\n     */\n    value: string;\n};\n\n/**\n * The platform uses the CUSS 2 Application Activation Structure when activating a CUSS application.\n */\nexport type ApplicationActivation = {\n    /**\n     * The application can use this value to change its look, feel, or behavior.\n     */\n    applicationBrand?: string;\n    /**\n     * Indicates the mode of execution.<p>\n     * *MAM:* Multi Application Mode <br>\n     * *DSAM:* Dedicated Single Application Mode\n     *\n     */\n    executionMode: 'MAM' | 'DSAM';\n    /**\n     * Indicates whether to operate in ACCESSIBLE mode or not.\n     */\n    accessibleMode: boolean;\n    /**\n     * Any additional options of execution in combination with the executionMode.\n     */\n    executionOptions?: Array<string>;\n    /**\n     * As per RFC3066.- Please refer also to: http://www.lingoes.net/en/translator/langcode.htm\n     */\n    languageID: string;\n    /**\n     * Any data to be exchanged between callers and callees after a transfer call or self-activation.\n     */\n    transferData?: string;\n};\n\n/**\n * Data to be passed to the platform with directive calls.\n */\nexport type ApplicationData = {\n    /**\n     * The META data of this message.\n     */\n    meta: {\n        deviceID: UniqueId;\n        requestID: UniqueId;\n        /**\n         * Application token (JWT) received with the Client Credentials. The token shall be passed with every platform directive.\n         *\n         */\n        oauthToken: string;\n        directive: PlatformDirectives;\n        componentID?: ComponentId;\n    };\n    /**\n     * The (optional) payload of this message.\n     */\n    payload?: {\n        applicationState?: ApplicationState;\n        applicationTransfer?: ApplicationTransfer;\n        dataRecords?: DataRecordList;\n        screenResolution?: ScreenResolution;\n        illuminationData?: IlluminationData;\n        bagdropData?: BaggageData;\n        paymentData?: CommonUsePaymentMessage;\n        biometricData?: CommonUseBiometricMessage;\n    };\n};\n\nexport type ApplicationId = {\n    /**\n     * eg. 3L- or 2L-code for airlines.\n     */\n    companyCode?: string;\n    /**\n     * The name of the application.\n     */\n    applicationName?: string;\n};\n\n/**\n * Application state codes and reasons to be passed with the statechange request.\n */\nexport type ApplicationState = {\n    applicationStateCode: ApplicationStateCodes;\n    accessibleMode: boolean;\n    applicationStateChangeReasonCode: ApplicationStateChangeReasonCodes;\n    /**\n     * The application can use this additional field to inform the platform about the reason for the current state change in free form text. The platform stores this information in its platform logs for bug fixing purposes.\n     */\n    applicationStateChangeReason?: string;\n    /**\n     * The platform can track which airline code to use for self activated processes/applications.\n     */\n    applicationBrand?: string;\n};\n\n/**\n * Application state change reason codes...<p>\n * *NOT_APPLICABLE:* None of the codes below apply (e.g. state change to AVAILABLE or ACTIVE) <br>\n * *OUT_OF_SERVICE_HOURS:* Application is outside its operation time <br>\n * *OUT_OF_SERVICE_HARDWARE:* One or more necessary hardware devices are not available <br>\n * *OUT_OF_SERVICE_BHS:* The Baggage Handling System is not available <br>\n * *OUT_OF_SERVICE_CONSUMABLES:* Any of the required consumables are on low or out of stock <br>\n * *OUT_OF_SERVICE_INTERNAL:* Application internal problem (see free form text for additional information) <br>\n * *OUT_OF_SERVICE_DCS:* The airline''s Departure Control System is not reachable <br>\n * *OUT_OF_SERVICE_BACKEND:* The applications backend is not reachable <br>\n * *ABANDONED_BAG: * There's a bag left on the conveyor system that needfs to be rmoved manually\n *\n */\nexport enum ApplicationStateChangeReasonCodes {\n    NOT_APPLICABLE = 'NOT_APPLICABLE',\n    OUT_OF_SERVICE_HOURS = 'OUT_OF_SERVICE_HOURS',\n    OUT_OF_SERVICE_HARDWARE = 'OUT_OF_SERVICE_HARDWARE',\n    OUT_OF_SERVICE_BHS = 'OUT_OF_SERVICE_BHS',\n    OUT_OF_SERVICE_CONSUMABLES = 'OUT_OF_SERVICE_CONSUMABLES',\n    OUT_OF_SERVICE_INTERNAL = 'OUT_OF_SERVICE_INTERNAL',\n    OUT_OF_SERVICE_DCS = 'OUT_OF_SERVICE_DCS',\n    OUT_OF_SERVICE_BACKEND = 'OUT_OF_SERVICE_BACKEND',\n    ABANDONED_BAG = 'ABANDONED_BAG'\n}\n\n/**\n * Application state codes...<p>\n * *UNAVAILABLE:* Application state change request to move to UNAVAILBLE <br>\n * *AVAILABLE:* Application state change request to move to AVAILBLE <br>\n * *ACTIVE:* Platform initiated or application state change request to move to ACTIVE <br>\n * *STOPPED:* Application state change request to move to STOPPED <br>\n * *RELOAD:* Application state change request to move to RELOAD <br>\n * *INITIALIZE:* Platform initiated application state <br>\n * *SUSPENDED:* Platform initiated application state <br>\n * *DISABLED:* Platform initiated application state\n *\n */\nexport enum ApplicationStateCodes {\n    INITIALIZE = 'INITIALIZE',\n    UNAVAILABLE = 'UNAVAILABLE',\n    AVAILABLE = 'AVAILABLE',\n    ACTIVE = 'ACTIVE',\n    STOPPED = 'STOPPED',\n    RELOAD = 'RELOAD',\n    SUSPENDED = 'SUSPENDED',\n    DISABLED = 'DISABLED'\n}\n\n/**\n * Applications and platforms use the CUSS 2 Application Transfer Structure for transferring control from one application to another.\n */\nexport type ApplicationTransfer = {\n    targetApplicationID: ApplicationId;\n    /**\n     * The application can use this value to change its look, feel, or behavior.\n     */\n    applicationBrand?: string;\n    /**\n     * As per RFC3066.- Please refer also to: http://www.lingoes.net/en/translator/langcode.htm\n     */\n    languageID: string;\n    /**\n     * Any data to be exchanged between callers and callees.\n     */\n    transferData?: string;\n};\n\n/**\n * The characteristics for the biometrics sub system\n */\nexport enum BiometricsCharacteristics {\n    ASSOCIATE = 'ASSOCIATE',\n    DISASSOCIATE = 'DISASSOCIATE',\n    ENROLL = 'ENROLL',\n    GET_ASSOCIATIONS = 'GET_ASSOCIATIONS',\n    IDENTIFY = 'IDENTIFY',\n    PREVIEW = 'PREVIEW',\n    PURGE = 'PURGE',\n    VERIFY = 'VERIFY',\n    FACE = 'FACE',\n    FINGER = 'FINGER',\n    IRIS = 'IRIS',\n    PALM = 'PALM'\n}\n\n/**\n * Interface Data Type Codes with the following semantics... <p>\n * # MSR remove: *DS_TYPES_UNDEFINED:* For all data not having a specific data type (yet)<p>\n * # MSR remove: *DS_TYPES_PAYMENT_ISO:* ISO track data without truncation <p>\n * # MSR remove: *DS_TYPES_PAYMENT_JIS2:* JIS-2 track data without truncation <p>\n * # MSR remove: *DS_TYPES_FOID_JIS2:* JIS-2 track data with FOID Data truncation <br>\n * # MSR remove: *DS_TYPES_FOID_ISO:* ISO track data with FOID Data truncation <br>\n * # MSR remove: *DS_TYPES_DISCRETIONARY_ISO:* ISO track data with DISCRETIONARY Data truncation <p>\n * # MSR remove: *DS_TYPES_DISCRETIONARY_JIS2:* JIS-2 track data with DISCRETIONARY Data truncation <p>\n * *DS_TYPES_ISO:* ISO encoded data <br>\n * *DS_TYPES_VING:* VING encoded data <br>\n * *DS_TYPES_TESSA:* TESSA encoded data <br>\n * *DS_TYPES_SAFLOK:* SAFLOK encoded data <br>\n * *DS_TYPES_TIMELOX:* TIMELOC encoded data <br>\n * *DS_TYPES_KABA_ILCO:* KABA iLco encoded data <br>\n * *DS_TYPES_KABA_ILCO_FOLIO:* KABA iLco (folio) enc <p>\n * *DS_TYPES_IMAGE_IR:* Infrared image <br>\n * *DS_TYPES_IMAGE_VIS:* Visible image <br>\n * *DS_TYPES_IMAGE_UV:* Ultraviolet image <br>\n * *DS_TYPES_IMAGE_PHOTO:* Photo image <br>\n * *DS_TYPES_IMAGE_COAX:* Coaxial image <p>\n * *DS_TYPES_IMAGE_RED:* Red Image <br>\n * *DS_TYPES_IMAGE_GREEN:* Green Image <br>\n * *DS_TYPES_IMAGE_BLUE:* Blue Image <br>\n * *DS_TYPES_IMAGE_GS:* Greyscale Image (8 bit/pixel)<br>\n * *DS_TYPES_IMAGE_BW:* Black and White Image (1 bit/pixel)<br>\n * *DS_TYPES_IMAGE_BMP:* BMP formatted image <br>\n * *DS_TYPES_IMAGE_GIF:* GIF formatted image <br>\n * *DS_TYPES_IMAGE_TIF:* TIFF formatted image <br>\n * *DS_TYPES_IMAGE_PNG:* PNG formatted image <br>\n * *DS_TYPES_IMAGE_JPG:* JPG/JPEG formatted image <br>\n * *DS_TYPES_IMAGE_XBM:* XBM formatted image <br>\n * *DS_TYPES_IMAGE_XPM:* XPM formatted image <br>\n * *DS_TYPES_IMAGE_PPM:* PPM formatted image <p>\n * *DS_TYPES_VIDEO_AVI:* AVI formatted video <br>\n * *DS_TYPES_VIDEO_MP4:* MP4 formatted video <br>\n * *DS_TYPES_VIDEO_MOV:* MOV formatted video <br>\n * *DS_TYPES_VIDEO_MKV:* MKV formatted video <br>\n * *DS_TYPES_VIDEO_WMV:* WMV formatted video <p>\n * *DS_TYPES_CODELINE:* Codeline data <br>\n * *DS_TYPES_BARCODE:* Barcode data <br>\n * *DS_TYPES_MIWA:* Miwa data <p>\n * *DS_TYPES_SCAN_PDF417:* PDF417 2D barcode <br>\n * *DS_TYPES_SCAN_AZTEC:* Aztec 2D barcode <br>\n * *DS_TYPES_SCAN_DMATRIX:* Datamatrix 2D barcode <br>\n * *DS_TYPES_SCAN_QR:* QR Code 2D barcode <br>\n * *DS_TYPES_SCAN_CODE39:* Code39 1D barcode <br>\n * *DS_TYPES_SCAN_CODE128:* Code128 1D barcode <br>\n * *DS_TYPES_SCAN_CODE2OF5:* Code2of5 1D barcode <p>\n * *DS_TYPES_ISO7816:* Communication protocols for PICC/RFID/NFC devices <p>\n * *DS_TYPES_PRINT_2S_PAGE:* 2-Sided Single-page printing <br>\n * *DS_TYPES_PRINT_2S_MULTI:* 2-Sided Multi-page printing <br>\n * *DS_TYPES_PRINT_PDF:* Adobe PDF print format <p>\n * *DS_TYPES_PRINT_SVG:* Scalable Vector Graphics format <p>\n * *DS_TYPES_MIFARE:* Communication protocols for PICC/RFID/NFC devices <br>\n * *DS_TYPES_SUICA:* Communication protocols for PICC/RFID/NFC devices <p>\n * *DS_TYPES_ISO15961:* IATA RFID baggage tag devices <br>\n * *DS_TYPES_ITPS:* IATA Technical Peripheral Specifications (former AEA) formatted data <br>\n * *DS_TYPES_RP1745:* IATA Baggage Service Messages Format <br>\n * *DS_TYPES_WEIGHT:* Baggage Weight from Scale or Conveyor <p>\n * *DS_TYPES_DIMENSION:* Baggage Dimensions from Conveyor <p>\n * *DS_TYPES_EPASSPORT_DG1:* e-Passport format <br>\n * *DS_TYPES_EPASSPORT_DG2:* e-Passport format <br>\n * *DS_TYPES_EPASSPORT_DG3:* e-Passport format <br>\n * *DS_TYPES_EPASSPORT_DG4:* e-Passport format <br>\n * *DS_TYPES_EPASSPORT_DG5:* e-Passport format <br>\n * *DS_TYPES_EPASSPORT_DG6:* e-Passport format <br>\n * *DS_TYPES_EPASSPORT_DG7:* e-Passport format <br>\n * *DS_TYPES_EPASSPORT_DG8:* e-Passport format <br>\n * *DS_TYPES_EPASSPORT_DG9:* e-Passport format <br>\n * *DS_TYPES_EPASSPORT_DG10:* e-Passport format <br>\n * *DS_TYPES_EPASSPORT_DG11:* e-Passport format <br>\n * *DS_TYPES_EPASSPORT_DG12:* e-Passport format <br>\n * *DS_TYPES_EPASSPORT_DG13:* e-Passport format <br>\n * *DS_TYPES_EPASSPORT_DG14:* e-Passport format <br>\n * *DS_TYPES_EPASSPORT_DG15:* e-Passport format <br>\n * *DS_TYPES_EPASSPORT_DG16:* e-Passport format <br>\n * *DS_TYPES_EPASSPORT_DG17:* e-Passport format <br>\n * *DS_TYPES_EPASSPORT_DG18:* e-Passport format <br>\n * *DS_TYPES_EPASSPORT_DG19:* e-Passport format <br>\n * *DS_TYPES_EPASSPORT_DG20:* e-Passport format <p>\n * *DS_TYPES_EPAYMENT:* E-Payment - CUSS2 Payments Domain<p>\n * *DS_TYPES_ILLUMINATION:* Illumination LEDs Interface - CUSS2 Illumination Domain<p>\n * *DS_TYPES_SSML:* SSML Specification supported by the Announcement Interface <br>\n * *DS_TYPES_KEY:* Navigation keypad events supported by Keypad Interface <br>\n * *DS_TYPES_KEY_UP:* Navigation keypad event supported by Keypad Interface <br>\n * *DS_TYPES_KEY_DOWN:* Navigation keypad event supported by Keypad Interface <p>\n * *DS_TYPES_BIOMETRIC:* Biometric Interface - CUSS2 Biometrics Domain\n *\n */\nexport enum CussDataTypes {\n    DS_TYPES_ISO = 'DS_TYPES_ISO',\n    DS_TYPES_VING = 'DS_TYPES_VING',\n    DS_TYPES_TESSA = 'DS_TYPES_TESSA',\n    DS_TYPES_SAFLOK = 'DS_TYPES_SAFLOK',\n    DS_TYPES_TIMELOX = 'DS_TYPES_TIMELOX',\n    DS_TYPES_KABA_ILCO = 'DS_TYPES_KABA_ILCO',\n    DS_TYPES_KABA_ILCO_FOLIO = 'DS_TYPES_KABA_ILCO_FOLIO',\n    DS_TYPES_IMAGE_IR = 'DS_TYPES_IMAGE_IR',\n    DS_TYPES_IMAGE_VIS = 'DS_TYPES_IMAGE_VIS',\n    DS_TYPES_IMAGE_UV = 'DS_TYPES_IMAGE_UV',\n    DS_TYPES_IMAGE_PHOTO = 'DS_TYPES_IMAGE_PHOTO',\n    DS_TYPES_IMAGE_COAX = 'DS_TYPES_IMAGE_COAX',\n    DS_TYPES_IMAGE_RED = 'DS_TYPES_IMAGE_RED',\n    DS_TYPES_IMAGE_GREEN = 'DS_TYPES_IMAGE_GREEN',\n    DS_TYPES_IMAGE_BLUE = 'DS_TYPES_IMAGE_BLUE',\n    DS_TYPES_IMAGE_GS = 'DS_TYPES_IMAGE_GS',\n    DS_TYPES_IMAGE_BW = 'DS_TYPES_IMAGE_BW',\n    DS_TYPES_IMAGE_BMP = 'DS_TYPES_IMAGE_BMP',\n    DS_TYPES_IMAGE_GIF = 'DS_TYPES_IMAGE_GIF',\n    DS_TYPES_IMAGE_TIF = 'DS_TYPES_IMAGE_TIF',\n    DS_TYPES_IMAGE_PNG = 'DS_TYPES_IMAGE_PNG',\n    DS_TYPES_IMAGE_JPG = 'DS_TYPES_IMAGE_JPG',\n    DS_TYPES_IMAGE_XBM = 'DS_TYPES_IMAGE_XBM',\n    DS_TYPES_IMAGE_XPM = 'DS_TYPES_IMAGE_XPM',\n    DS_TYPES_IMAGE_PPM = 'DS_TYPES_IMAGE_PPM',\n    DS_TYPES_VIDEO_AVI = 'DS_TYPES_VIDEO_AVI',\n    DS_TYPES_VIDEO_MP4 = 'DS_TYPES_VIDEO_MP4',\n    DS_TYPES_VIDEO_MOV = 'DS_TYPES_VIDEO_MOV',\n    DS_TYPES_VIDEO_MKV = 'DS_TYPES_VIDEO_MKV',\n    DS_TYPES_VIDEO_WMV = 'DS_TYPES_VIDEO_WMV',\n    DS_TYPES_CODELINE = 'DS_TYPES_CODELINE',\n    DS_TYPES_BARCODE = 'DS_TYPES_BARCODE',\n    DS_TYPES_MIWA = 'DS_TYPES_MIWA',\n    DS_TYPES_SCAN_PDF417 = 'DS_TYPES_SCAN_PDF417',\n    DS_TYPES_SCAN_AZTEC = 'DS_TYPES_SCAN_AZTEC',\n    DS_TYPES_SCAN_DMATRIX = 'DS_TYPES_SCAN_DMATRIX',\n    DS_TYPES_SCAN_QR = 'DS_TYPES_SCAN_QR',\n    DS_TYPES_SCAN_CODE39 = 'DS_TYPES_SCAN_CODE39',\n    DS_TYPES_SCAN_CODE128 = 'DS_TYPES_SCAN_CODE128',\n    DS_TYPES_SCAN_CODE2OF5 = 'DS_TYPES_SCAN_CODE2OF5',\n    DS_TYPES_ISO7816 = 'DS_TYPES_ISO7816',\n    DS_TYPES_PRINT_2S_PAGE = 'DS_TYPES_PRINT_2S_PAGE',\n    DS_TYPES_PRINT_2S_MULTI = 'DS_TYPES_PRINT_2S_MULTI',\n    DS_TYPES_PRINT_PDF = 'DS_TYPES_PRINT_PDF',\n    DS_TYPES_MIFARE = 'DS_TYPES_MIFARE',\n    DS_TYPES_SUICA = 'DS_TYPES_SUICA',\n    DS_TYPES_ISO15961 = 'DS_TYPES_ISO15961',\n    DS_TYPES_RP1745 = 'DS_TYPES_RP1745',\n    DS_TYPES_WEIGHT = 'DS_TYPES_WEIGHT',\n    DS_TYPES_DIMENSION = 'DS_TYPES_DIMENSION',\n    DS_TYPES_EPASSPORT_DG1 = 'DS_TYPES_EPASSPORT_DG1',\n    DS_TYPES_EPASSPORT_DG2 = 'DS_TYPES_EPASSPORT_DG2',\n    DS_TYPES_EPASSPORT_DG3 = 'DS_TYPES_EPASSPORT_DG3',\n    DS_TYPES_EPASSPORT_DG4 = 'DS_TYPES_EPASSPORT_DG4',\n    DS_TYPES_EPASSPORT_DG5 = 'DS_TYPES_EPASSPORT_DG5',\n    DS_TYPES_EPASSPORT_DG6 = 'DS_TYPES_EPASSPORT_DG6',\n    DS_TYPES_EPASSPORT_DG7 = 'DS_TYPES_EPASSPORT_DG7',\n    DS_TYPES_EPASSPORT_DG8 = 'DS_TYPES_EPASSPORT_DG8',\n    DS_TYPES_EPASSPORT_DG9 = 'DS_TYPES_EPASSPORT_DG9',\n    DS_TYPES_EPASSPORT_DG10 = 'DS_TYPES_EPASSPORT_DG10',\n    DS_TYPES_EPASSPORT_DG11 = 'DS_TYPES_EPASSPORT_DG11',\n    DS_TYPES_EPASSPORT_DG12 = 'DS_TYPES_EPASSPORT_DG12',\n    DS_TYPES_EPASSPORT_DG13 = 'DS_TYPES_EPASSPORT_DG13',\n    DS_TYPES_EPASSPORT_DG14 = 'DS_TYPES_EPASSPORT_DG14',\n    DS_TYPES_EPASSPORT_DG15 = 'DS_TYPES_EPASSPORT_DG15',\n    DS_TYPES_EPASSPORT_DG16 = 'DS_TYPES_EPASSPORT_DG16',\n    DS_TYPES_EPASSPORT_DG17 = 'DS_TYPES_EPASSPORT_DG17',\n    DS_TYPES_EPASSPORT_DG18 = 'DS_TYPES_EPASSPORT_DG18',\n    DS_TYPES_EPASSPORT_DG19 = 'DS_TYPES_EPASSPORT_DG19',\n    DS_TYPES_EPASSPORT_DG20 = 'DS_TYPES_EPASSPORT_DG20',\n    DS_TYPES_EPAYMENT = 'DS_TYPES_EPAYMENT',\n    DS_TYPES_ILLUMINATION = 'DS_TYPES_ILLUMINATION',\n    DS_TYPES_SSML = 'DS_TYPES_SSML',\n    DS_TYPES_KEY = 'DS_TYPES_KEY',\n    DS_TYPES_KEY_UP = 'DS_TYPES_KEY_UP',\n    DS_TYPES_KEY_DOWN = 'DS_TYPES_KEY_DOWN',\n    DS_TYPES_BIOMETRIC = 'DS_TYPES_BIOMETRIC',\n    DS_TYPES_PRINT_SVG = 'DS_TYPES_PRINT_SVG',\n    DS_TYPES_ITPS = 'DS_TYPES_ITPS'\n}\n\n/**\n * The characteristics for each component within the CUSS device.\n */\nexport type ComponentCharacteristics = {\n    /**\n     * The characteristics for the announcement component of the CUSS device.\n     */\n    audioOutput?: {\n        /**\n         * SSML version supported by the audio output component.\n         */\n        ssmlVersion: string;\n        /**\n         * The list of supported languages as RFC3066 2-letter codes or 2-2-letter codes.\n         */\n        supportedLanguages: Array<string>;\n    };\n    deviceHelpInstruction?: {\n        instruction?: DeviceHelpInstructionType;\n    };\n    /**\n     * A list of data types identifiers.\n     */\n    dsTypesList?: Array<CussDataTypes>;\n    /**\n     * A list of media type identifiers.\n     */\n    mediaTypesList: Array<MediaTypes>;\n    /**\n     * A list of device type identifiers.\n     */\n    deviceTypesList?: Array<DeviceTypes>;\n    navigationType?: {\n        type?: NavigationTypes;\n    };\n    /**\n     * A list of supported display types and the physical screen diagonal.\n     */\n    displayType?: {\n        screenDiagonal?: number;\n        resolutions?: Array<ScreenResolution>;\n    };\n    /**\n     * ITPS/AEA version supported by printers (BTP/BPP). - The minimum version must be [current version -1]. Example: 2018\n     */\n    itpsVersion?: string;\n    /**\n     * Scalable Vector Graphics (SVG) 1.1. - Please refer also to: https://www.w3.org/TR/SVG11/\n     */\n    svgVersion?: string;\n    /**\n     * If true, the baggage tag printer supports color printing (black and red).\n     */\n    supportsColor?: boolean;\n    /**\n     * Document bin characteristics for Feeder-, Dispenser-, Capture- components.\n     */\n    documentBin?: {\n        /**\n         * Describes the maximum number of documents a bin can hold.\n         */\n        binSize?: number;\n        /**\n         * Shows the high threshold of the bin if appropriate sensor is installed.\n         */\n        allmostFullLevel?: number;\n        /**\n         * Shows the low threshold of the bin if appropriate sensor is installed.\n         */\n        allmostEmptyLevel?: number;\n    };\n    /**\n     * ConveyorSBD characteristics. - Older definitions have been removed after deprecation.\n     */\n    conveyorSBD?: {\n        /**\n         * The maximum weight of the baggage (in grams).\n         */\n        maxWeight?: number;\n        /**\n         * The maximum width of baggage (in millimeters).\n         */\n        maxWidth?: number;\n        /**\n         * The maximum height of baggage (in millimeters).\n         */\n        maxHeight?: number;\n        /**\n         * The maximum length of baggage (in millimeters).\n         */\n        maxLength?: number;\n        /**\n         * The maximum number of bags a conveyor can handle.\n         */\n        maxBags?: number;\n        /**\n         * If true, conveyor has a security barrier (for user safety).\n         */\n        barrierCapable?: boolean;\n        /**\n         * If true, conveyor system can detect intrusions at the front/user side (insertion).\n         */\n        userInterferenceCapable?: boolean;\n        /**\n         * If true, conveyor system can detect intrusions behind the front/user side (verification/parking).\n         */\n        safetyIntrusionCapable?: boolean;\n        /**\n         * If true, conveyor can only move in forward direction.\n         */\n        onewayForward?: boolean;\n    };\n    /**\n     * A list of color options for illumination devices\n     */\n    illuminationColors?: Array<SupportedColors>;\n    /**\n     * A list of characteristics for the biometric subsystem.\n     */\n    subsystemBiometrics?: Array<BiometricsCharacteristics>;\n    /**\n     * A list of characteristics for the payments subsystem.\n     */\n    subsystemPayments?: Array<PaymentsCharacteristics>;\n};\n\n/**\n * Reference of the component on which the directive shall be executed.\n */\nexport type ComponentId = number;\n\n/**\n * The list of hardware and software components that comprise a complete CUSS platform.\n */\nexport type ComponentList = Array<EnvironmentComponent>;\n\n/**\n * Virtual component state codes <p>\n * *READY:* Component is ready to receive and execute any directives <br>\n * *BUSY:* Indicates any component activity (e.g. reading/writing) that has been invoked <br>\n * *UNVAILABLE:* Error condition that requires manual intervention\n *\n */\nexport enum ComponentState {\n    READY = 'READY',\n    BUSY = 'BUSY',\n    UNAVAILABLE = 'UNAVAILABLE'\n}\n\n/**\n * Virtual component types with the following semantics... <p>\n * *CAPTURE:* Captures the document in a secured bin <br>\n * *DISPENSER:* Offer the document to the user or the user <br>\n * *FEEDER:* Offer the document from a feeder to another component (userless) <br>\n * *DATA_INPUT:* Inbound data transfer (e.g. digital input) <br>\n * *DATA_OUTPUT:* Outbound data transfer (e.g. illumination device) <br>\n * *USER_INPUT:* Inbound user data transfer (e.g. baggage scale )<br>\n * *USER_OUTPUT:* Outbound user data transfer (e.g. screen) <br>\n * *MEDIA_INPUT:* Components used for reading from media (e.g. bar-code reader) <br>\n * *MEDIA_OUTPUT:* Components used for writing to media (e.g. receipt printer) <br>\n * *STORAGE:* Reading/writing from/to storage (e.g. harddisk) <br>\n * *DISPLAY:* Handle a display (eg. the CUSS device screen) <br>\n * *NETWORK:* Handle network access <br>\n * *BAGGAGE_SCALE:* Represent a stand-alone baggage scale <br>\n * *INSERTION_BELT:* Insert/return position of a conveyor system <br>\n * *VERIFICATION_BELT:* Verification position of a conveyor system <br>\n * *PARKING_BELT:* Parking position of a conveyor system <br>\n * *ANNOUNCEMENT:* Audible output component allowing applications to use SSML <br>\n * *APPLICATION:* Used to query the state and/or characteristics of a CUSS application\n *\n */\nexport enum ComponentTypes {\n    CAPTURE = 'CAPTURE',\n    DISPENSER = 'DISPENSER',\n    FEEDER = 'FEEDER',\n    DATA_INPUT = 'DATA_INPUT',\n    DATA_OUTPUT = 'DATA_OUTPUT',\n    USER_INPUT = 'USER_INPUT',\n    USER_OUTPUT = 'USER_OUTPUT',\n    MEDIA_INPUT = 'MEDIA_INPUT',\n    MEDIA_OUTPUT = 'MEDIA_OUTPUT',\n    STORAGE = 'STORAGE',\n    DISPLAY = 'DISPLAY',\n    NETWORK = 'NETWORK',\n    BAGGAGE_SCALE = 'BAGGAGE_SCALE',\n    INSERTION_BELT = 'INSERTION_BELT',\n    VERIFICATION_BELT = 'VERIFICATION_BELT',\n    PARKING_BELT = 'PARKING_BELT',\n    ANNOUNCEMENT = 'ANNOUNCEMENT',\n    APPLICATION = 'APPLICATION'\n}\n\nexport type DataRecord = {\n    dataStatus?: DataStatus;\n    /**\n     * The type(s) of data in this data record.\n     */\n    dsTypes: Array<CussDataTypes>;\n    /**\n     * The data itself in encoded as specified by element \"encoding\", which also can be NULL, null, NIL, nil,....\n     */\n    data: string | null;\n    /**\n     * Information on how the data is encoded. - If not populated, TEXT is the default encoding.\n     */\n    encoding?: 'TEXT' | 'BASE64';\n};\n\nexport type DataRecordList = Array<DataRecord>;\n\n/**\n * Interface Data Status Codes with the following semantics... <p>\n * *DS_OK:* Data is OK <br>\n * *DS_CORRUPTED:* Data is corrupted <br>\n * *DS_INCOMPLETE:* Data is incomplete <br>\n * *DS_ZEROLENGTH:* Data is of length zero <br>\n * *DS_DOCUMENT_AUTHENTICATION_FAILED:* Authentication of document data failed <br>\n * *DS_INVALID:* Document read but a security feature is missing <br>\n * *DS_MISMATCH:* Document read but data inconsistent with security feature\n *\n */\nexport enum DataStatus {\n    DS_OK = 'DS_OK',\n    DS_CORRUPTED = 'DS_CORRUPTED',\n    DS_INCOMPLETE = 'DS_INCOMPLETE',\n    DS_ZEROLENGTH = 'DS_ZEROLENGTH',\n    DS_DOCUMENT_AUTHENTICATION_FAILED = 'DS_DOCUMENT_AUTHENTICATION_FAILED',\n    DS_INVALID = 'DS_INVALID',\n    DS_MISMATCH = 'DS_MISMATCH'\n}\n\n/**\n * XML formatted device help text element to be inserted into applications audio output.\n */\nexport type DeviceHelpInstructionElements = {\n    /**\n     * Estimated announcement time in seconds\n     */\n    time?: number;\n    /**\n     * XML formatted device help text structure to be passed to applications for audio output. The texts for the audio output need to be in SSML 1.0/SSML 1.1 format.<p>\n     * <b>Example:</b>\n     * ```XML\n     * <speak version=\"1.0\" xmlns=\"http://www.w3.org/2001/10/synthesis\" xml:lang=\"en-US\">\n     * The magnetic card reader device is used to read the data from your credit card or frequent flyer card\n     * </speak>\n     * or...\n     * <speak version=\"1.0\" xmlns=\"http://www.w3.org/2001/10/synthesis\" xml:lang=\"ja-JP\">\n     * \u78C1\u6C17\u30AB\u30FC\u30C9\u30EA\u30FC\u30C0\u88C5\u7F6E\u306F\u3001\u30AF\u30EC\u30B8\u30C3\u30C8\u30AB\u30FC\u30C9\u3084\u30DE\u30A4\u30EC\u30FC\u30B8\u30AB\u30FC\u30C9\u304B\u3089\u30C7\u30FC\u30BF\u3092\u8AAD \u307F\u53D6\u308B\u305F\u3081\u306B\u4F7F\u7528\u3055\u308C\u308B\n     * </speak>\n     * or ...\n     *\n     */\n    ssmlElement?: string;\n};\n\n/**\n * XML formatted device help text structure to be inserted into applications audio output.\n */\nexport type DeviceHelpInstructionType = {\n    /**\n     * The general description of the user device in different languages\n     */\n    deviceDescription?: Array<DeviceHelpInstructionElements>;\n    /**\n     * Where user device is situated within the CUSS device in different languages\n     */\n    deviceLocation?: Array<DeviceHelpInstructionElements>;\n    /**\n     * A more detailed description of the user device in different languages\n     */\n    deviceProfile?: Array<DeviceHelpInstructionElements>;\n    /**\n     * A detailed description on how to use the device in different languages\n     */\n    deviceUsage?: Array<DeviceHelpInstructionElements>;\n};\n\n/**\n * Device Types describe how applications handle the device and how to advise users<p>\n * *NON_APPLICABLE_DEVICE_TYPE:* Device does not fit in any category <br>\n * *PRINT:* Device can print documents<br>\n * *READ:* Device can read documents<br>\n * *MOTORIZED:* Device can move in and out a document (e.g. cards)<br>\n * *DIP:* User has to dip in and remove a document (e.g. cards or passports)<br>\n * *SWIPE:* User has to swipe the document or card<br>\n * *CONTACTLESS:* Device can read a document from a (usually short) distance<br>\n * *HANDHELD:* Device can scan bar codes and and needs to be handled manually<br>\n * *INSERT:* Documents have to be inserted into the device<br>\n * *DISPENSE:* Device can dispense a document to the user or another component<br>\n * *CAPTURE:* Device can retract documents or cards<br>\n * *CONVEYOR:* Device can move baggage back and forth<br>\n * *SCALE:* Device can weigh items<br>\n * *CAMERA:* Device can take pictures<br>\n * *FLATBED:* Device can scan documents<br>\n * *CHIP_AND_PIN:* Device is a Chip & PIN device / payment device<br>\n * *EXTERNAL:* Device is not contained in the CUSS device<br>\n * *BIOMETRICS:* Device is a biometrics device / interface<br>\n * *ASSISTIVE:* Device can assist users with disabilities<br>\n * *ILLUMINATION:* Device represents a light<br>\n * *DISPLAY:* Device represents a display (e.g. a touch screen)\n *\n */\nexport enum DeviceTypes {\n    NON_APPLICABLE_DEVICE_TYPE = 'NON_APPLICABLE_DEVICE_TYPE',\n    PRINT = 'PRINT',\n    READ = 'READ',\n    MOTORIZED = 'MOTORIZED',\n    DIP = 'DIP',\n    SWIPE = 'SWIPE',\n    CONTACTLESS = 'CONTACTLESS',\n    HANDHELD = 'HANDHELD',\n    INSERT = 'INSERT',\n    DISPENSE = 'DISPENSE',\n    CAPTURE = 'CAPTURE',\n    CONVEYOR = 'CONVEYOR',\n    SCALE = 'SCALE',\n    CAMERA = 'CAMERA',\n    FLATBED = 'FLATBED',\n    CHIP_AND_PIN = 'CHIP_AND_PIN',\n    EXTERNAL = 'EXTERNAL',\n    BIOMETRICS = 'BIOMETRICS',\n    ASSISTIVE = 'ASSISTIVE',\n    ILLUMINATION = 'ILLUMINATION',\n    DISPLAY = 'DISPLAY'\n}\n\nexport type EnvironmentComponent = {\n    /**\n     * A textual description of the component. - Can be different on every platform. - Not to be used for component identfication.\n     */\n    componentDescription?: string;\n    componentID?: ComponentId;\n    componentType?: ComponentTypes;\n    /**\n     * The characteristics of this specific component, please refer to CUSS-DG document for a detailed list and descriptions.\n     */\n    componentCharacteristics?: Array<ComponentCharacteristics>;\n    /**\n     * A list of identifiers of components linked to this component.\n     */\n    linkedComponentIDs?: Array<ComponentId>;\n    /**\n     * Optional identifier that can be used to group components that represent the same HW device.\n     */\n    deviceReference?: string;\n};\n\n/**\n * Describes the environment/device on which the application will be operated.\n */\nexport type EnvironmentLevel = {\n    /**\n     * Session Timeout (in milliseconds) for active applications.\n     */\n    sessionTimeout: number;\n    /**\n     * Time (in milliseconds) left before an application is killed.\n     */\n    killTimeout: number;\n    /**\n     * Time for application initialization (in milliseconds).\n     */\n    initTimeout?: number;\n    /**\n     * The timeframe in which an application can expect an API acknowledgement from platform  (in milliseconds).\n     */\n    expectedAckTime?: number;\n    /**\n     * The platforms cache period for all directives (in milliseconds).\n     */\n    maxCacheTime?: number;\n    /**\n     * The exact model name of the CUSS device as defined in its configuration. - Allows applications e.g. to display device specific animations or information.\n     */\n    deviceModelName?: string;\n    deviceID: UniqueId;\n    deviceLocation: Location;\n    /**\n     * Supported versions of the CUSS specifications.\n     */\n    cussVersions: Array<string>;\n    /**\n     * Name of the installed operating system.\n     */\n    osName: string;\n    /**\n     * Version of the installed operating system.\n     */\n    osVersion: string;\n};\n\n/**\n * Severity categorization for the various events<p>\n * ALARM:* Requires immediate attention (i.e. manual intervention is required) <br>\n * WARNING:* Abnormal situation occurs, but manual intervention is not needed <br>\n * NORMAL:* Normal processing occurs\n *\n */\nexport enum EventCategories {\n    ALARM = 'ALARM',\n    WARNING = 'WARNING',\n    NORMAL = 'NORMAL'\n}\n\n/**\n * Relations for all events <p>\n * *SOLICITED:* Event relates to an application request <br>\n * *UNSOLICITED:* Sent by the platform because of any internal change, not related to any request.\n *\n */\nexport enum EventModes {\n    SOLICITED = 'SOLICITED',\n    UNSOLICITED = 'UNSOLICITED'\n}\n\n/**\n * Categorization of publicity for the various events<p>\n * *PRIVATE:* Private events are sent as a solicited response only to those applications having requested an action on the platform <br>\n * *PUBLIC:* Public events indicate e.g. a state change of a component that is of interest for all applications <br>\n * *PLATFORM:* Sent internally between CUSS Application Manager, CLA, and the Component Interface\n *\n */\nexport enum EventTypes {\n    PRIVATE = 'PRIVATE',\n    PUBLIC = 'PUBLIC',\n    PLATFORM = 'PLATFORM'\n}\n\n/**\n * The location definition for CUSS devices.\n */\nexport type Location = {\n    /**\n     * 3L code for the airport or city or any location.\n     */\n    airportCode?: string;\n    /**\n     * Terminal name, if applicable.\n     */\n    terminal?: string;\n    /**\n     * Area name, if applicable.\n     */\n    area?: string;\n    /**\n     * Free form address, if applicable.\n     */\n    address?: string;\n};\n\n/**\n * A Media Type describes what the component does and is able to handle/process<p>\n * *NON_APPLICABLE_MEDIATYPE:* Media type doesn't fit in any category <br>\n * # MSR remove: *MAGCARD:* Cards with Mag-Stripes<br>\n * *JISCARD:* JIS II Magnetic Stripe Encoding (Japanese Industrial Standard)<br>\n * *CARD:* Any card not falling under more specific descriptions<br>\n * *CHIP:* Cards equipped with chips (e.g. Chip & PIN)<br>\n * *BARCODE:* Any type of 1- or 2D bar-code<br>\n * *TICKET:* Ticket document<br>\n * *RECEIPT:* Receipt document<br>\n * *BOARDINGPASS:* Standard Boarding Pass<br>\n * *BAGGAGETAG:* Standard Baggage Tag<br>\n * *HEAVYTAG:* Standard Heavy Tag<br>\n * *RFID_BAGGAGETAG:* Baggage Tag with an RFID chip<br>\n * *BAGGAGE:* Passenger Baggage<br>\n * *PASSPORT:* Machine readable Passport Document<br>\n * *IDCARD:* Machine readable National ID-Card<br>\n * *VISA:*  Machine readable Visa Document<br>\n * *DRIVERLICENSE:*  Machine readable Driver License<br>\n * *RFID:* Documents with RFID chips<br>\n * *NFC:* Documents with NFC chip<br>\n * *OCR:* OCR data<br>\n * *IMAGE:* Image data<br>\n * *VIDEO:* Video data<br>\n * *PRINTED:* Any printed document not falling under more specific descriptions<br>\n * *AUDIO:* Any audible data<br>\n * *VISUAL:* Any visual data<br>\n * *TOUCH:* Touch Screen input<br>\n * *DATASTRUCTURE:* XML or JSON formatted structured data\n *\n */\nexport enum MediaTypes {\n    CARD = 'CARD',\n    CHIP = 'CHIP',\n    BARCODE = 'BARCODE',\n    TICKET = 'TICKET',\n    RECEIPT = 'RECEIPT',\n    BOARDINGPASS = 'BOARDINGPASS',\n    BAGGAGETAG = 'BAGGAGETAG',\n    HEAVYTAG = 'HEAVYTAG',\n    RFID_BAGGAGETAG = 'RFID_BAGGAGETAG',\n    BAGGAGE = 'BAGGAGE',\n    PASSPORT = 'PASSPORT',\n    IDCARD = 'IDCARD',\n    VISA = 'VISA',\n    DRIVERLICENSE = 'DRIVERLICENSE',\n    RFID = 'RFID',\n    NFC = 'NFC',\n    OCR = 'OCR',\n    IMAGE = 'IMAGE',\n    PRINTED = 'PRINTED',\n    AUDIO = 'AUDIO',\n    VISUAL = 'VISUAL',\n    TOUCH = 'TOUCH',\n    DATASTRUCTURE = 'DATASTRUCTURE'\n}\n\n/**\n * Messagecodes related to system, applications and platform directives/devices.<p>\n * *OK:* Device is ready or interface call did not generate an error. - *public (private for solicited events)*<br>\n * *CANCELLED:* Interface call was cancelled. - *private*<br>\n * *WRONG_SYSTEM_STATE:* The system or component is in the wrong state to process the call. - *private + platform*<br>\n * *WRONG_APPLICATION_STATE:* The application is in the wrong state to process the call. - *private + platform*<br>\n * *OUT_OF_SEQUENCE:* Function has been called out of sequence. (e.g. calling send() before enable()) - *private*<br>\n * *TIMEOUT:* Function call timed out. - *private (directive related)*<br>\n * *FORMAT_ERROR:* Error detected in format of data used with send() or setup(). - *private + platform (platform only for output classes)*<br>\n * *LENGTH_ERROR:* Data stream provided for send()/setup() is incomplete. - *private + platform (platform only for output classes)*<br>\n * *THRESHOLD_ERROR:* Too many errors have occurred. - *public*<br>\n * *THRESHOLD_USAGE:* Inserting/removing documents performed too many times. - *public*<br>\n * *DATA_MISSING:* No data provided while using send()/setup functions. - *private + platform (platform only for output classes)*<br>\n * *DATA_PRESENT:* Data was read from an inserted/scanned document. - *private*<br>\n * *SOFTWARE_ERROR:* Software error detected during execution . - *private + platform*<br>\n * *CRITICAL_SOFTWARE_ERROR:* Software error detected during execution that makes the component permanently UNAVAILABLE. - *public*<br>\n * *HARDWARE_ERROR:* An error caused by hardware malfunction makes the component UNAVAILABLE. - *public*<br>\n * *NOT_REACHABLE:* Device or application is not connected (unknown status). - *public*<br>\n * *NOT_RESPONDING:* Device or application is connected but not responding or not ready. - *public*<br>\n * *SESSION_TIMEOUT:* Application exceeded the max. time for executing a user transaction. - *private + platform (application related)*<br>\n * *KILL_TIMEOUT:* Application exceeded the max. time for responding to the session timeout. - *private + platform (application related)*<br>\n * *TRANSFER_REQUEST:* Indicates that the state change is related to an application transfer. - *private + platform*<br>\n *\n * # AGe: Check with the group\n * *SYSTEM_FIREALARM:* The system received an urgent firealarm to which the platfrom has to react to (darken screens, suspend applications, ...)\n *\n * *SYSTEM_REQUEST:* Any request by the platform to the application for system management purposes. - *public*<br>\n * *SYSTEM_SHUTDOWN:* Notification message to applications indicating the CUSS platform is shutting down. - *public*<br>\n * *DEVICE_REQUEST:* Indication for a change in the device state and requests for multi step interaction. - *private + platform*\n *\n * *MEDIA_JAMMED:* A document got jammed inside the device. - *public*<br>\n * *MEDIA_MISPLACED:* A document was inserted incorrectly. E.g. a card was inserted up-side down. - *private + platform (platform only for userless classes)*<br>\n * *MEDIA_PRESENT:* A document was inserted into the device. Event is reported even when the document does not reside in the device anymore. E.g. for DIP and Swipe readers. - *private*<br>\n * *MEDIA_ABSENT:* A document was removed from the device. The event is reported even if document was not kept in the  device (Swipe or DIP reader). - *private*<br>\n * *MEDIA_EMPTY:* A feeder or dispenser reached the empty level threshold. - *public*<br>\n * *MEDIA_DAMAGED:* A document is physically damaged. - *public*<br>\n * *MEDIA_INCOMPLETELY_INSERTED:* A document was not fully inserted into the device. - *private*<p>\n * *MEDIA_HIGH:* A feeder or dispenser reached the high level threshold. - *public*<br>\n * *MEDIA_FULL:* A feeder or dispenser reached the full level threshold. - *public*<br>\n * *MEDIA_LOW:* A feeder or dispenser reached the low level threshold. - *public*<br>\n *\n * *BAGGAGE_FULL:* Maximum number of bags reached in this conveyor position. - *public*<br>\n * *BAGGAGE_UNDETECTED:* Baggage unexpectedly absent. - *private + platform*<br>\n * *BAGGAGE_PRESENT:* Baggage present on position. - *private*<br>\n * *BAGGAGE_ABSENT:* No baggage present on position. - *private*<br>\n * *BAGGAGE_OVERSIZED:* Bag is too long/high/flat/short/heavy. - *private + platform*<br>\n * *BAGGAGE_TOO_MANY_BAGS:* Baggage present, detected more than one baggage. - *private + platform*<br>\n * *BAGGAGE_UNEXPECTED_BAG:* Unexpected baggage present. - *private + platform*<br>\n * *BAGGAGE_TOO_HIGH:* Bag is too high. - *private + platform*<br>\n * *BAGGAGE_TOO_LONG:* Bag is too long. - *private + platform*<br>\n * *BAGGAGE_TOO_FLAT:* Bag is too flat. - *private + platform*<br>\n * *BAGGAGE_TOO_SHORT:* Bag is too short. - *private + platform*<br>\n * *BAGGAGE_TOO_WIDE:* Bag is to wide. - *private + platform*<br>\n * *BAGGAGE_TOO_SMALL:* Bag is too small.- *private + platform*<br>\n * *BAGGAGE_INVALID_DATA:* Baggage tag data is not compliant to IATA standards and/or invalid data from the sub systems. - *private + platform*<br>\n * *BAGGAGE_WEIGHT_OUT_OF_RANGE:* Weight exceeds weight range of conveyor system or SBD. - *private + platform*<br>\n * *BAGGAGE_JAMMED:* Bag is jammed on conveyor. - *private + platform*<br>\n * *BAGGAGE_WRONG_INSERTED:* Bag inserted in the wrong place, e.g. too far in front/behind. - *private + platform*<br>\n * *BAGGAGE_EMERGENCY_STOP:* Person pressed the Emergency-Stop button. - *public*<br>\n * *BAGGAGE_RESTLESS:* Bag is permanently moving, maybe it is- or contains a living creature. - *private + platform*<br>\n * *BAGGAGE_TRANSPORT_BUSY:* *private + platform*<br>\n * *BAGGAGE_MISTRACKED:* The movement of a bag did not take place as expected when activating conveyors. - *private + platform*<br>\n * *BAGGAGE_FORWARD_FAILED:* System could not move the bag to the next position on the conveyor. - *private + platform*<br>\n * *BAGGAGE_BACKWARD_FAILED:* System could not move the bag to the previous position on the conveyor. - *private + platform*<br>\n * *BAGGAGE_UNEXPECTED_CHANGE:* The baggage has unexpectedly changed in size, volume or shape versus the original metrics. - *private + platform*<br>\n * *BAGGAGE_ACCEPTED:* The bag was accepted for check-in. - *private + platform*<br>\n * *BAGGAGE_DELIVERED:* The bag on the parking position has been fed into the BHS. - *private + platform*<br>\n * *BAGGAGE_INTERFERENCE_USER:* A user interference (non-critical) was detected at some point on the conveyor. Operations may proceed. - *private + platform*<br>\n * *BAGGAGE_INTRUSION_SAFETY:* A critical security/safety intrusion was detected at some point on the conveyor. Operations are likely halted and in error condition until a supervisor resets. - *private + platform*<br>\n * *BAGGAGE_NOT_CONVEYABLE: The current bag is in some way not acceptable for the BHS (used when none of the following descriptions apply). - *private + platform*<br>\n * *BAGGAGE_IRREGULAR_BAG:* The current bag shall be handled as bulky baggage like skies, strollers, prams, wheelchairs. - *private + platform*<br>\n * *BAGGAGE_BAG_WITH_STRAPS:* The current bag has straps and therefore is not acceptable for the BHS.*private + platform*<br>\n * *BAGGAGE_UPRIGHT_BAG:* The current bag stands upright and shall be tilted before processing. - *private + platform*<br>\n * *BAGGAGE_HANDLE_EXTENDED:* A handle extends from the bag and shall to be stowed. - *private + platform*<br>\n * *BAGGAGE_MULTIPLE_BAGS:* The system has detected more than one bag on the conveyor. - *private + platform*<br>\n * *BAGGAGE_SLOPED_BAG:* The current bag is leaning/levering on side walls probably reducing weight. The bag shall be repositioned. - *private + platform*<br>\n * *BAGGAGE_VOLUME_NOT_DETERMINABLE:* The volume of the current bag can not be determined. - *private + platform*<br>\n * *BAGGAGE_TUB_REQUIRED:* The current bag shall be placed in a TUB. - *private + platform*<br>\n * *BAGGAGE_OVERFLOW_TUB:* The current bag overflows the sides of the tub and shall be repositioned. - *private + platform*<br>\n * *BAGGAGE_XRAY_SUSPICIOUS:* An X-ray system connected to the SBD reported an x-rayed bag being suspicious. - *private + platform*<br>\n * *BAGGAGE_MAINTENANCE_MODE:* System was switched offline for maintenance purpose. - *public*<br>\n * *BAGGAGE_FORCEBAG_MODE:* System was switched offline for forced bag injection. - *public*<br>\n * *BAGGAGE_MANUAL_MODE:* System is online but was switched to manual mode. - *public*<br>\n * *BAGGAGE_OFFBHS_MODE:* System has been switched off from BHS side. - *public*<br>\n * *BAGGAGE_SUSPENDED_MODE:* System has been suspended by service personnel. - *public*<br>\n * *BAGGAGE_OPERATIONAL_STOP:* Staff temporarily suspended baggage handling. - *private + platform*<p>\n *\n */\nexport enum MessageCodes {\n    OK = 'OK',\n    CANCELLED = 'CANCELLED',\n    WRONG_SYSTEM_STATE = 'WRONG_SYSTEM_STATE',\n    WRONG_APPLICATION_STATE = 'WRONG_APPLICATION_STATE',\n    OUT_OF_SEQUENCE = 'OUT_OF_SEQUENCE',\n    TIMEOUT = 'TIMEOUT',\n    FORMAT_ERROR = 'FORMAT_ERROR',\n    LENGTH_ERROR = 'LENGTH_ERROR',\n    THRESHOLD_ERROR = 'THRESHOLD_ERROR',\n    THRESHOLD_USAGE = 'THRESHOLD_USAGE',\n    DATA_MISSING = 'DATA_MISSING',\n    DATA_PRESENT = 'DATA_PRESENT',\n    SOFTWARE_ERROR = 'SOFTWARE_ERROR',\n    CRITICAL_SOFTWARE_ERROR = 'CRITICAL_SOFTWARE_ERROR',\n    HARDWARE_ERROR = 'HARDWARE_ERROR',\n    NOT_REACHABLE = 'NOT_REACHABLE',\n    NOT_RESPONDING = 'NOT_RESPONDING',\n    SESSION_TIMEOUT = 'SESSION_TIMEOUT',\n    KILL_TIMEOUT = 'KILL_TIMEOUT',\n    TRANSFER_REQUEST = 'TRANSFER_REQUEST',\n    SYSTEM_REQUEST = 'SYSTEM_REQUEST',\n    SYSTEM_SHUTDOWN = 'SYSTEM_SHUTDOWN',\n    DEVICE_REQUEST = 'DEVICE_REQUEST',\n    MEDIA_JAMMED = 'MEDIA_JAMMED',\n    MEDIA_MISPLACED = 'MEDIA_MISPLACED',\n    MEDIA_PRESENT = 'MEDIA_PRESENT',\n    MEDIA_ABSENT = 'MEDIA_ABSENT',\n    MEDIA_EMPTY = 'MEDIA_EMPTY',\n    MEDIA_DAMAGED = 'MEDIA_DAMAGED',\n    MEDIA_INCOMPLETELY_INSERTED = 'MEDIA_INCOMPLETELY_INSERTED',\n    MEDIA_HIGH = 'MEDIA_HIGH',\n    MEDIA_FULL = 'MEDIA_FULL',\n    MEDIA_LOW = 'MEDIA_LOW',\n    BAGGAGE_FULL = 'BAGGAGE_FULL',\n    BAGGAGE_UNDETECTED = 'BAGGAGE_UNDETECTED',\n    BAGGAGE_PRESENT = 'BAGGAGE_PRESENT',\n    BAGGAGE_ABSENT = 'BAGGAGE_ABSENT',\n    BAGGAGE_OVERSIZED = 'BAGGAGE_OVERSIZED',\n    BAGGAGE_TOO_MANY_BAGS = 'BAGGAGE_TOO_MANY_BAGS',\n    BAGGAGE_UNEXPECTED_BAG = 'BAGGAGE_UNEXPECTED_BAG',\n    BAGGAGE_TOO_HIGH = 'BAGGAGE_TOO_HIGH',\n    BAGGAGE_TOO_LONG = 'BAGGAGE_TOO_LONG',\n    BAGGAGE_TOO_FLAT = 'BAGGAGE_TOO_FLAT',\n    BAGGAGE_TOO_SHORT = 'BAGGAGE_TOO_SHORT',\n    BAGGAGE_TOO_WIDE = 'BAGGAGE_TOO_WIDE',\n    BAGGAGE_TOO_SMALL = 'BAGGAGE_TOO_SMALL',\n    BAGGAGE_INVALID_DATA = 'BAGGAGE_INVALID_DATA',\n    BAGGAGE_WEIGHT_OUT_OF_RANGE = 'BAGGAGE_WEIGHT_OUT_OF_RANGE',\n    BAGGAGE_JAMMED = 'BAGGAGE_JAMMED',\n    BAGGAGE_WRONG_INSERTED = 'BAGGAGE_WRONG_INSERTED',\n    BAGGAGE_EMERGENCY_STOP = 'BAGGAGE_EMERGENCY_STOP',\n    BAGGAGE_RESTLESS = 'BAGGAGE_RESTLESS',\n    BAGGAGE_TRANSPORT_BUSY = 'BAGGAGE_TRANSPORT_BUSY',\n    BAGGAGE_MISTRACKED = 'BAGGAGE_MISTRACKED',\n    BAGGAGE_FORWARD_FAILED = 'BAGGAGE_FORWARD_FAILED',\n    BAGGAGE_BACKWARD_FAILED = 'BAGGAGE_BACKWARD_FAILED',\n    BAGGAGE_UNEXPECTED_CHANGE = 'BAGGAGE_UNEXPECTED_CHANGE',\n    BAGGAGE_ACCEPTED = 'BAGGAGE_ACCEPTED',\n    BAGGAGE_DELIVERED = 'BAGGAGE_DELIVERED',\n    BAGGAGE_INTERFERENCE_USER = 'BAGGAGE_INTERFERENCE_USER',\n    BAGGAGE_INTRUSION_SAFETY = 'BAGGAGE_INTRUSION_SAFETY',\n    BAGGAGE_NOT_CONVEYABLE = 'BAGGAGE_NOT_CONVEYABLE',\n    BAGGAGE_IRREGULAR_BAG = 'BAGGAGE_IRREGULAR_BAG',\n    BAGGAGE_BAG_WITH_STRAPS = 'BAGGAGE_BAG_WITH_STRAPS',\n    BAGGAGE_UPRIGHT_BAG = 'BAGGAGE_UPRIGHT_BAG',\n    BAGGAGE_HANDLE_EXTENDED = 'BAGGAGE_HANDLE_EXTENDED',\n    BAGGAGE_MULTIPLE_BAGS = 'BAGGAGE_MULTIPLE_BAGS',\n    BAGGAGE_SLOPED_BAG = 'BAGGAGE_SLOPED_BAG',\n    BAGGAGE_VOLUME_NOT_DETERMINABLE = 'BAGGAGE_VOLUME_NOT_DETERMINABLE',\n    BAGGAGE_TUB_REQUIRED = 'BAGGAGE_TUB_REQUIRED',\n    BAGGAGE_OVERFLOW_TUB = 'BAGGAGE_OVERFLOW_TUB',\n    BAGGAGE_XRAY_SUSPICIOUS = 'BAGGAGE_XRAY_SUSPICIOUS',\n    BAGGAGE_MAINTENANCE_MODE = 'BAGGAGE_MAINTENANCE_MODE',\n    BAGGAGE_FORCEBAG_MODE = 'BAGGAGE_FORCEBAG_MODE',\n    BAGGAGE_MANUAL_MODE = 'BAGGAGE_MANUAL_MODE',\n    BAGGAGE_OFFBHS_MODE = 'BAGGAGE_OFFBHS_MODE',\n    BAGGAGE_SUSPENDED_MODE = 'BAGGAGE_SUSPENDED_MODE',\n    BAGGAGE_OPERATIONAL_STOP = 'BAGGAGE_OPERATIONAL_STOP'\n}\n\n/**\n * Describes the type of the navigation pad...<p>\n * *NON_APPLICABLE_NAVIGATION_TYPE:* Navigation type doesn't fit in any category <br>\n * *NAVPAD_5_KEY:*  The usual STORM navigation pad with 5 keys <br>\n * *NAVPAD_8_KEY:*  The usual STORM navigation pad with 8 keys <br>\n * *AUDIONAV_6_KEY:* The diamond shaped STORM audio navigation pad with 6 keys <br>\n * *AUDIONAV_6_KEY_BAR:* The STORM audio navigation pad with 6 keys in horizontal order'\n *\n */\nexport enum NavigationTypes {\n    NON_APPLICABLE_NAVIGATION_TYPE = 'NON_APPLICABLE_NAVIGATION_TYPE',\n    NAVPAD_5_KEY = 'NAVPAD_5_KEY',\n    NAVPAD_8_KEY = 'NAVPAD_8_KEY',\n    AUDIONAV_6_KEY = 'AUDIONAV_6_KEY',\n    AUDIONAV_6_KEY_BAR = 'AUDIONAV_6_KEY_BAR'\n}\n\n/**\n * Correlation ID definition for tracking purposes. - This GUID is platform generated and stored in the platform logs. The ID helps to reconcile log entries on different systems. - If there's currently no passenger session active the ID shall be 'NONE' or 'none' for unsolicited events.\n *\n */\nexport type PassengerSessionId = string;\n\n/**\n * The characteristics of the payments sub system\n */\nexport enum PaymentsCharacteristics {\n    DEBIT = 'DEBIT',\n    CREDIT = 'CREDIT',\n    NFC = 'NFC',\n    AMEX = 'AMEX',\n    CART_BLANCHE = 'CART_BLANCHE',\n    DISCOVER = 'DISCOVER',\n    JCB = 'JCB',\n    MAESTRO = 'MAESTRO',\n    MASTERCARD = 'MASTERCARD',\n    SWITCH = 'SWITCH',\n    VISA = 'VISA'\n}\n\n/**\n * PlatformData is used to transfer results from (regular) directive calls back to the application.\n */\nexport type PlatformData = {\n    /**\n     * The META data of this message\n     */\n    meta: {\n        deviceID: UniqueId;\n        requestID: UniqueId;\n        /**\n         * Time stamp in UTC format.\n         */\n        timeStamp: string;\n        passengerSessionID: PassengerSessionId;\n        applicationID: ApplicationId;\n        componentID?: ComponentId;\n        componentState?: ComponentState;\n        currentApplicationState: ApplicationState;\n        messageCode: MessageCodes;\n        eventClassification?: {\n            eventMode?: EventModes;\n            eventType?: EventTypes;\n            eventCategory?: EventCategories;\n        };\n        platformDirective?: PlatformDirectives;\n    };\n    /**\n     * The payload of this message. -\n     * Only the required payload(s) needed for the directive will be used by the platform.\n     * Any others will be discarded.\n     *\n     */\n    payload?: {\n        applicationActivation?: ApplicationActivation;\n        environmentLevel?: EnvironmentLevel;\n        componentList?: ComponentList;\n        dataRecords?: DataRecordList;\n        bagdropData?: BaggageData;\n        paymentData?: CommonUsePaymentMessage;\n        biometricData?: CommonUseBiometricMessage;\n    };\n};\n\n/**\n * Platform directives name definitions and descriptions. <p>*Please note:* In contrast to earlier CUSS versions applications are now responsible for tracking and handling the time and timeouts for any directive that may require longer execution. Applications shall use the cancel directive to terminate a too long pending call.<p>\n * *platform_environment:* This is the **second directive** to be issued by the application to get basic information on the specific CUSS Platform implementation.<br>\n * *platform_components:* This directive returns a list of all the implemented components, their characteristics and their object identifiers. This allows the application to check whether all the components that it requires are implemented or not.<br>\n * *platform_applications_staterequest:* This directive is used by the application to request a state change from CUSS Application Manager, which will change the application state if request is approved.<br>\n * *platform_applications_transferrequest:* This directive is used by the application to request an application transfer from the CUSS Application Manager.<br>\n * *platform_applications_acknowledge_accessible:* An application confirms with this directive that it has switched to accessible mode after being activated by the CUSS application manager for the accessible mode.<br>\n * *peripherals_announcement_play:* Requests that an SSML formatted text to be spoken immediately. - Directive requires component identifier and the XML formatted text to be spoken.<br>\n * *peripherals_announcement_pause:* Temporarily suspends any play back currently in progress. -  Directive requires component identifier.<br>\n * *peripherals_announcement_resume:* Resumes any paused play back currently in progress. -  Directive requires component identifier.<br>\n * *peripherals_announcement_stop:* Stops any play back currently in progress. - Directive requires component identifier.<br>\n * *peripherals_cancel:* Cancels all currently executed and queued directives on this component at the time of issuing this directive. - Directive requires component identifier.<br>\n * *peripherals_query:* Returns the current state/status of the virtual component. - Directive requires component identifier.<br>\n * *peripherals_send:* Sends data from the application to the component. - Directive requires component identifier.<br>\n * *peripherals_setup:* Set up the profile/context of the virtual component and prepare it for application usage. - Directive requires component identifier.<br>\n * *peripherals_userpresent_enable:* Make the virtual component available for the user (e.g. enable a reader device for a document insertion). - Directive requires component identifier.<br>\n * *peripherals_userpresent_disable:* Make the virtual component unavailable for the user (e.g. disable a reader device from a document insertion). - Directive requires component identifier.<br>\n * *peripherals_userpresent_offer:* Offers a document or a processed item from the virtual component to the user or to another component. - Directive requires component identifier.<br>\n * *peripherals_conveyors_forward:* Moves a bag to the next position on the conveyor or to the airport\u2019s collector belt. - Directive requires component identifier.<br>\n * *peripherals_conveyors_backward:* Moves a bag back to the previous position on the conveyor or back to the user. - Directive requires component identifier.<br>\n * *peripherals_conveyors_process:* Examine and/or process the bag currently on a belt component to get baggage data like weight, dimensions, LPNs, RFID, and similar. - Directive requires component identifier.<br>\n *\n */\nexport enum PlatformDirectives {\n    PLATFORM_ENVIRONMENT = 'platform_environment',\n    PLATFORM_COMPONENTS = 'platform_components',\n    PLATFORM_APPLICATIONS_STATEREQUEST = 'platform_applications_staterequest',\n    PLATFORM_APPLICATIONS_TRANSFERREQUEST = 'platform_applications_transferrequest',\n    PLATFORM_APPLICATIONS_ACKNOWLEDGE_ACCESSIBLE = 'platform_applications_acknowledge_accessible',\n    PERIPHERALS_ANNOUNCEMENT_PLAY = 'peripherals_announcement_play',\n    PERIPHERALS_ANNOUNCEMENT_PAUSE = 'peripherals_announcement_pause',\n    PERIPHERALS_ANNOUNCEMENT_RESUME = 'peripherals_announcement_resume',\n    PERIPHERALS_ANNOUNCEMENT_STOP = 'peripherals_announcement_stop',\n    PERIPHERALS_CANCEL = 'peripherals_cancel',\n    PERIPHERALS_QUERY = 'peripherals_query',\n    PERIPHERALS_SEND = 'peripherals_send',\n    PERIPHERALS_SETUP = 'peripherals_setup',\n    PERIPHERALS_USERPRESENT_ENABLE = 'peripherals_userpresent_enable',\n    PERIPHERALS_USERPRESENT_DISABLE = 'peripherals_userpresent_disable',\n    PERIPHERALS_USERPRESENT_OFFER = 'peripherals_userpresent_offer',\n    PERIPHERALS_CONVEYORS_FORWARD = 'peripherals_conveyors_forward',\n    PERIPHERALS_CONVEYORS_BACKWARD = 'peripherals_conveyors_backward',\n    PERIPHERALS_CONVEYORS_PROCESS = 'peripherals_conveyors_process'\n}\n\n/**\n * A single x-y screen resolution measured in pixels.\n */\nexport type ScreenResolution = {\n    vertical?: number;\n    horizontal?: number;\n};\n\n/**\n * Color capability definitions for illumination devices...<p>\n * *CLR_RGB:* Illumination device supports colors in nearly the RGB spectrum <br>\n * *CLR_ON:* Illumination device supports color for switched on mode <br>\n * *CLR_OFF:* Illumination device supports color for switched off mode <br>\n * *CLR_RED...CLR_WHITE:* Illumination device supports the specified color\n *\n */\nexport enum SupportedColors {\n    CLR_RGB = 'CLR_RGB',\n    CLR_ON = 'CLR_ON',\n    CLR_OFF = 'CLR_OFF',\n    CLR_RED = 'CLR_RED',\n    CLR_GREEN = 'CLR_GREEN',\n    CLR_BLUE = 'CLR_BLUE',\n    CLR_DARKRED = 'CLR_DARKRED',\n    CLR_DARKGREEN = 'CLR_DARKGREEN',\n    CLR_DARKBLUE = 'CLR_DARKBLUE',\n    CLR_YELLOW = 'CLR_YELLOW',\n    CLR_MAGENTA = 'CLR_MAGENTA',\n    CLR_CYAN = 'CLR_CYAN',\n    CLR_AMBER = 'CLR_AMBER',\n    CLR_PURPLE = 'CLR_PURPLE',\n    CLR_SPRINGGREEN = 'CLR_SPRINGGREEN',\n    CLR_WHITE = 'CLR_WHITE'\n}\n\n/**\n * The unique identifier (GUID) for devices and requests and any other purpose that requires a unique identifier.\n */\nexport type UniqueId = string;\n\n/**\n * Provide object weight measurements for standalone scales and SBD devices.\n */\nexport type WeightType = {\n    alibi?: AlibiType;\n    weight: number;\n    stable: boolean;\n    /**\n     * Indicates the weight unit.\n     */\n    unit: 'IMPERIAL_POUNDS' | 'METRIC_GRAMM' | 'METRIC_KILOGRAMM';\n};\n\n/**\n * Main Baggage data structure for exchanging baggage data (dimensions, baggage- and RFID tags) between CUSS platform and applications.\n */\nexport type BaggageData = {\n    /**\n     * Values identified for an object on the measurement device.\n     */\n    baggageMeasurements?: {\n        weight?: ExtendedWeightType;\n        dimensions?: DimensionType;\n    };\n    /**\n     * List of optical barcode measurement values.\n     */\n    barcodeTagList?: {\n        lpnBarcodeTag?: Array<BarcodeTagDataType>;\n        otherBarcodeTag?: Array<string>;\n    };\n    /**\n     * List of radio frequency measurement values (for components supporting DS_TYPES_ISO15961).\n     */\n    rfidTagList?: {\n        rfidTag: Array<RfidTagDataType>;\n    };\n    /**\n     * Indicates whether or not a heavy tag was detected with the currently processed bag.\n     */\n    heavyTagDetected?: boolean;\n    /**\n     * IATA RP1745 Baggage Source Message (BSM) values containing at least the  following elements: .V, .F and .N. (for components supporting DS_TYPES_RP1745)\n     */\n    bsmMessage?: string;\n};\n\n/**\n * IATA License Plate Number (10 digits).\n */\nexport type BarcodeTagDataType = {\n    lpnNumber: string;\n};\n\n/**\n * Provide object dimension measurements.\n */\nexport type DimensionType = {\n    alibi?: AlibiType;\n    /**\n     * Height of the object, in centimeters (cm).\n     */\n    height?: number;\n    /**\n     * Length of the object, in centimeters (cm).\n     */\n    length?: number;\n    /**\n     * Width of the object, in centimeters (cm).\n     */\n    width?: number;\n    /**\n     * Indicates if the measurement is stable.\n     */\n    stable: boolean;\n};\n\n/**\n * Data acquired for a single object on the bag measurement device.\n */\nexport type ExtendedWeightType = {\n    grossWeight: WeightType;\n    netWeight: WeightType;\n    tareWeight: WeightType;\n    /**\n     * Indicates whether a tub was detected or not.\n     */\n    tubDetected: boolean;\n};\n\n/**\n * RFID tag data structure (as per IATA Recommended Practice 1740c).\n */\nexport type RfidElement = {\n    /**\n     * RFID Object Identifier (e.g. [1 0 15961 12] 1..127).\n     */\n    objectKey: string;\n    /**\n     * RFID tag data in binary format.\n     */\n    binaryData?: string;\n    /**\n     * RFID tag data as a normal string.\n     */\n    stringData?: string;\n};\n\n/**\n * RFID tag data element list.\n */\nexport type RfidTagDataType = {\n    /**\n     * RFID Transponder Identifier.\n     */\n    id: string;\n    rfidElements?: Array<RfidElement>;\n};\n\nexport type SubscribeGetData = {\n    body?: never;\n    path?: never;\n    query?: never;\n    url: '/platform/subscribe';\n};\n\nexport type DummyPlatformData = {\n    body?: never;\n    path?: never;\n    query?: never;\n    url: '/dummy/platform';\n};\n\nexport type DummyPlatformResponses = {\n    /**\n     * A dummy response definition just to reference the schema. - Please see comments above.\n     */\n    200: PlatformData;\n};\n\nexport type DummyPlatformResponse = DummyPlatformResponses[keyof DummyPlatformResponses];\n\nexport type DummyApplicationData = {\n    body?: never;\n    path?: never;\n    query?: never;\n    url: '/dummy/application';\n};\n\nexport type DummyApplicationResponses = {\n    /**\n     * A dummy response definition just to reference the schema. - Please see comments above.\n     */\n    200: ApplicationData;\n    /**\n     * A dummy response definition just to reference the schema. - Please see comments above.\n     */\n    201: ApiAcknowledgement;\n};\n\nexport type DummyApplicationResponse = DummyApplicationResponses[keyof DummyApplicationResponses];\n\nexport type ClientOptions = {\n    baseUrl: string;\n};", "import { EventEmitter } from \"events\";\nimport {\n  type ApplicationData,\n  type ApplicationDataMeta,\n  type ApplicationDataPayload,\n  type ApplicationState,\n  type ApplicationTransfer,\n  type BaggageData,\n  type CommonUseBiometricMessage,\n  type CommonUsePaymentMessage,\n  type DataRecordList,\n  type IlluminationData,\n  MessageCodes,\n  PlatformDirectives,\n  type ScreenResolution,\n} from \"cuss2-typescript-models\";\n\nexport class LogMessage {\n  action: string;\n  data: unknown;\n  level: string;\n\n  constructor(level: string, action: string, data: unknown) {\n    this.action = action;\n    this.level = level;\n    this.data = data;\n  }\n}\n\nexport const logger: EventEmitter = new EventEmitter();\nexport const log = (level: string, action: string, data?: unknown): void => {\n  logger.emit(\"log\", new LogMessage(level, action, data));\n};\n\nexport const helpers = {\n  splitAndFilter: (text: string, delimiter1 = \"#\"): string[] => {\n    return text.split(delimiter1).filter((p) => !!p);\n  },\n  split_every: (text: string, n: number): string[] => {\n    if (!text) return [];\n    return text.match(new RegExp(\".{1,\" + n + \"}\", \"g\")) as string[];\n  },\n  deserializeDictionary: (\n    text: string,\n    delimiter1 = \"#\",\n    delimiter2 = \"=\",\n  ): Record<string, string> => {\n    const out: Record<string, string> = {};\n    helpers.splitAndFilter(text, delimiter1).forEach((p) => {\n      const [k, v] = p.split(delimiter2);\n      if (v && k) out[k] = v;\n    });\n    return out;\n  },\n  isNonCritical: (messageCode: MessageCodes): boolean => {\n    return !criticalErrors.some((s): boolean => s === messageCode);\n  },\n};\n\nconst criticalErrors = [\n  MessageCodes.CANCELLED,\n  MessageCodes.WRONG_APPLICATION_STATE,\n  MessageCodes.OUT_OF_SEQUENCE,\n  MessageCodes.TIMEOUT,\n  MessageCodes.SESSION_TIMEOUT,\n  MessageCodes.KILL_TIMEOUT,\n  MessageCodes.SOFTWARE_ERROR,\n  MessageCodes.CRITICAL_SOFTWARE_ERROR,\n  MessageCodes.FORMAT_ERROR,\n  MessageCodes.LENGTH_ERROR,\n  MessageCodes.DATA_MISSING,\n  MessageCodes.THRESHOLD_ERROR,\n  MessageCodes.THRESHOLD_USAGE,\n  MessageCodes.HARDWARE_ERROR,\n  MessageCodes.NOT_REACHABLE,\n  MessageCodes.NOT_RESPONDING,\n  MessageCodes.BAGGAGE_FULL,\n  MessageCodes.BAGGAGE_UNDETECTED,\n  MessageCodes.BAGGAGE_OVERSIZED,\n  MessageCodes.BAGGAGE_TOO_MANY_BAGS,\n  MessageCodes.BAGGAGE_UNEXPECTED_BAG,\n  MessageCodes.BAGGAGE_TOO_HIGH,\n  MessageCodes.BAGGAGE_TOO_LONG,\n  MessageCodes.BAGGAGE_TOO_FLAT,\n  MessageCodes.BAGGAGE_TOO_SHORT,\n  MessageCodes.BAGGAGE_INVALID_DATA,\n  MessageCodes.BAGGAGE_WEIGHT_OUT_OF_RANGE,\n  MessageCodes.BAGGAGE_JAMMED,\n  MessageCodes.BAGGAGE_EMERGENCY_STOP,\n  MessageCodes.BAGGAGE_RESTLESS,\n  MessageCodes.BAGGAGE_TRANSPORT_BUSY,\n  MessageCodes.BAGGAGE_MISTRACKED,\n  MessageCodes.BAGGAGE_UNEXPECTED_CHANGE,\n  MessageCodes.BAGGAGE_INTERFERENCE_USER,\n  MessageCodes.BAGGAGE_INTRUSION_SAFETY,\n  MessageCodes.BAGGAGE_NOT_CONVEYABLE,\n  MessageCodes.BAGGAGE_IRREGULAR_BAG,\n  MessageCodes.BAGGAGE_VOLUME_NOT_DETERMINABLE,\n  MessageCodes.BAGGAGE_OVERFLOW_TUB,\n];\n\nconst isDataRecord = (dataRecordObject: unknown): dataRecordObject is DataRecordList => {\n  return Array.isArray(dataRecordObject) && dataRecordObject.length > 0 && \"data\" in dataRecordObject[0];\n};\n\ninterface BuildOptions {\n  componentID?: number;\n  deviceID?: string;\n  dataObj?:\n    | ApplicationState\n    | ApplicationTransfer\n    | DataRecordList\n    | ScreenResolution\n    | IlluminationData\n    | BaggageData\n    | CommonUsePaymentMessage\n    | CommonUseBiometricMessage;\n}\n\nexport const Build = {\n  applicationData: (\n    directive: PlatformDirectives,\n    options: BuildOptions = {},\n  ): ApplicationData => {\n    const {\n      componentID,\n      deviceID = \"00000000-0000-0000-0000-000000000000\",\n      dataObj,\n    } = options;\n    const meta = {} as ApplicationDataMeta;\n    // Use crypto.randomUUID if available, otherwise fallback to a polyfill\n    meta.requestID = typeof crypto !== \"undefined\" && crypto.randomUUID\n      ? crypto.randomUUID()\n      : `${Date.now()}-${Math.random().toString(36).substring(2, 15)}-${Math.random().toString(36).substring(2, 15)}`;\n    meta.directive = directive;\n    // Only set componentID if it's defined (check for undefined, not falsy)\n    if (componentID !== undefined) {\n      meta.componentID = componentID;\n    }\n    meta.deviceID = deviceID;\n\n    const payload: ApplicationDataPayload = {};\n\n    if (dataObj && \"applicationStateCode\" in dataObj) {\n      payload.applicationState = dataObj;\n    }\n\n    if (dataObj && \"targetApplicationID\" in dataObj) {\n      payload.applicationTransfer = dataObj;\n    }\n\n    if (isDataRecord(dataObj)) {\n      payload.dataRecords = dataObj;\n    }\n\n    if (dataObj && \"vertical\" in dataObj) {\n      payload.screenResolution = dataObj;\n    }\n\n    if (dataObj && \"lightColor\" in dataObj) {\n      payload.illuminationData = dataObj;\n    }\n\n    if (dataObj && \"baggageMeasurements\" in dataObj) {\n      payload.bagdropData = dataObj;\n    }\n\n    if (dataObj && \"ePaymentMessage\" in dataObj) {\n      payload.paymentData = dataObj;\n    }\n\n    if (dataObj && \"biometricProviderMessage\" in dataObj) {\n      payload.biometricData = dataObj;\n    }\n\n    return { meta, payload } as ApplicationData;\n  },\n\n  stateChange: (\n    desiredState: string | number,\n    reasonCode: string | number,\n    reason: string,\n    brand: string | undefined = undefined,\n  ): ApplicationData => {\n    return Build.applicationData(\n      PlatformDirectives.PLATFORM_APPLICATIONS_STATEREQUEST,\n      {\n        dataObj: {\n          applicationStateCode: desiredState,\n          applicationStateChangeReasonCode: reasonCode,\n          applicationStateChangeReason: reason,\n          applicationBrand: brand,\n        } as ApplicationState,\n      },\n    );\n  },\n};\n", "import { EventEmitter as EE } from \"events\";\n\nexport class EventEmitter extends EE {\n  waitFor(event: string, errorEvents = [\"error\"]): Promise<unknown> {\n    return new Promise((resolve, reject) => {\n      // Track event sources for cleanup\n      const eventMappings: Array<{ source: EventEmitter; event: string; handler: (e: unknown) => void }> = [];\n\n      const cleanup = () => {\n        // Clean up all registered event handlers\n        for (const mapping of eventMappings) {\n          mapping.source.off(mapping.event, mapping.handler);\n        }\n      };\n\n      const resolver = (e: unknown) => {\n        cleanup();\n        resolve(e);\n      };\n\n      const catcher = (e: unknown) => {\n        cleanup();\n        reject(e);\n      };\n\n      // Helper function to parse and attach event\n      const attachEvent = (eventString: string, handler: (e: unknown) => void) => {\n        const dotIndex = eventString.indexOf(\".\");\n\n        if (dotIndex > 0) {\n          // Property event format: \"property.event\"\n          const propertyName = eventString.substring(0, dotIndex);\n          const eventName = eventString.substring(dotIndex + 1);\n\n          // Check if property exists and is an EventEmitter\n          const property = (this as Record<string, unknown>)[propertyName];\n          if (property && property instanceof EventEmitter) {\n            property.once(eventName, handler);\n            eventMappings.push({ source: property, event: eventName, handler });\n            return;\n          }\n        }\n\n        // Fall back to using the full string as event name on current object\n        this.once(eventString, handler);\n        eventMappings.push({ source: this, event: eventString, handler });\n      };\n\n      // Attach main event\n      attachEvent(event, resolver);\n\n      // Attach error events\n      for (const errorEvent of errorEvents) {\n        attachEvent(errorEvent, catcher);\n      }\n    });\n  }\n}\n", "/**\n * Base Component Class - CUSS2 Virtual Component Concept\n * Only includes methods available to ALL component types:\n * - query: Returns current state/status\n * - cancel: Cancels queued directives\n * - setup: Configure component\n */\n\nimport { EventEmitter } from \"events\";\nimport type { Cuss2 } from \"../../cuss2.ts\";\nimport { ComponentState, type DataRecordList, type EnvironmentComponent, MessageCodes, type PlatformData } from \"cuss2-typescript-models\";\nimport { DeviceType } from \"../deviceType.ts\";\nimport type { ComponentAPI } from \"../../cuss2/ComponentAPI.ts\";\n\nexport abstract class BaseComponent extends EventEmitter {\n  protected _component: EnvironmentComponent;\n  id: number;\n  api!: ComponentAPI;\n  required: boolean = false;\n  protected _status: MessageCodes = MessageCodes.OK;\n  protected _componentState: ComponentState = ComponentState.UNAVAILABLE;\n  deviceType: DeviceType;\n  pendingCalls: number = 0;\n  pollingInterval = 10000;\n  protected _poller: ReturnType<typeof setTimeout> | undefined;\n  parent: BaseComponent | null;\n  subcomponents: BaseComponent[] = [];\n\n  // Only InteractiveComponent and its subclasses actually use this\n  enabled?: boolean;\n\n  get ready(): boolean {\n    return this._componentState === ComponentState.READY;\n  }\n\n  get pending(): boolean {\n    return this.pendingCalls > 0;\n  }\n\n  get status(): MessageCodes {\n    return this._status;\n  }\n\n  get componentState(): ComponentState {\n    return this._componentState;\n  }\n\n  constructor(\n    component: EnvironmentComponent,\n    cuss2: Cuss2,\n    _type: DeviceType = DeviceType.UNKNOWN,\n  ) {\n    super();\n    this.deviceType = _type;\n    this._component = component;\n    this.id = Number(component.componentID);\n    this.api = cuss2.api;\n    this.parent = null;\n\n    // Get required from componentCharacteristics\n    const characteristics = component.componentCharacteristics?.[0];\n    this.required = (characteristics as unknown as { required?: boolean })?.required || false;\n\n    // Initialize state - these may not exist on initial component\n    this._componentState = ComponentState.UNAVAILABLE;\n    this._status = MessageCodes.OK;\n\n    this.setupEventListeners(cuss2);\n\n    // Handle subcomponent linking for components with linkedComponentIDs\n    if (component.linkedComponentIDs?.length) {\n      const name = this.deviceType;\n      const parentId = Math.min(\n        this.id,\n        ...component.linkedComponentIDs as number[],\n      );\n      if (parentId !== this.id) {\n        this.parent = cuss2.components?.[parentId] as BaseComponent;\n        // feeder and dispenser are created in the printer component\n        if (this.parent) {\n          this.parent.subcomponents.push(this);\n          // We need to use bracket notation to access dynamic properties\n          // Explicitly tell TypeScript that this is safe by using indexing\n          (this.parent as unknown as Record<string, BaseComponent>)[name] = this;\n        }\n      }\n    }\n  }\n\n  protected setupEventListeners(cuss2: Cuss2): void {\n    // Subscribe to platform messages via cuss2 instance\n    cuss2.on(\"message\", (data: PlatformData) => {\n      if (data?.meta?.componentID === this.id) {\n        this.handleMessage(data);\n        this.updateState(data);\n      }\n    });\n\n    // Subscribe to deactivation events\n    cuss2.on(\"deactivated\", () => {\n      // Set enabled to false if this component uses the enabled property\n      if (this.enabled !== undefined) {\n        this.enabled = false;\n      }\n    });\n  }\n\n  handleMessage(data: PlatformData): void {\n    this.emit(\"message\", data);\n  }\n\n  stateIsDifferent(msg: PlatformData): boolean {\n    return this.status !== msg.meta.messageCode || this._componentState !== msg.meta.componentState;\n  }\n\n  updateState(msg: PlatformData): void {\n    const { meta } = msg;\n\n    // Handle component state changes\n    if (meta?.componentState !== undefined && meta.componentState !== this._componentState) {\n      this._componentState = meta.componentState ?? ComponentState.UNAVAILABLE;\n\n      // Set enabled to false if not ready (for components that use enabled)\n      if (meta.componentState !== ComponentState.READY && this.enabled !== undefined) {\n        this.enabled = false;\n      }\n\n      // Emit readyStateChange with current component state\n      this.emit(\"readyStateChange\", meta.componentState === ComponentState.READY);\n    }\n\n    // Auto-poll for required components that are not ready\n    if (!this.ready && this.required && !this._poller && this.pollingInterval > 0) {\n      this.pollUntilReady();\n    }\n\n    // Handle message code (status) changes\n    if (meta?.messageCode !== undefined && this._status !== meta.messageCode) {\n      this._status = meta.messageCode as MessageCodes;\n      this.emit(\"statusChange\", this._status);\n    }\n  }\n\n  /**\n   * Query the current state/status of the component\n   * Available to ALL component types\n   */\n  async query(): Promise<PlatformData> {\n    return await this.withPendingCall(() => this.api.getStatus(this.id));\n  }\n\n  /**\n   * Cancel all currently executed and queued directives\n   * Available to ALL components except APPLICATION\n   */\n  async cancel(): Promise<PlatformData> {\n    return await this.withPendingCall(() => this.api.cancel(this.id));\n  }\n\n  /**\n   * Setup/configure the component\n   * Available to ALL components except APPLICATION\n   */\n  async setup(dataObj: DataRecordList): Promise<PlatformData> {\n    const pd = await this.withPendingCall(() => this.api.setup(this.id, dataObj));\n    this.updateState(pd);\n    return pd;\n  }\n\n  startPolling(): void {\n    if (!this._poller) {\n      this._poller = setInterval(async () => {\n        await this.query();\n      }, this.pollingInterval);\n    }\n  }\n\n  stopPolling(): void {\n    if (this._poller) {\n      clearInterval(this._poller);\n      this._poller = undefined;\n    }\n  }\n\n  pollUntilReady(requireOK = false, pollingInterval = this.pollingInterval): void {\n    if (this._poller) return;\n    const poll = () => {\n      if (this.ready && (!requireOK || this.status === MessageCodes.OK)) {\n        this._poller = undefined;\n        return;\n      }\n      this._poller = setTimeout(() => {\n        this.query().catch(Object).finally(poll);\n      }, pollingInterval);\n    };\n    poll();\n  }\n\n  /**\n   * Wrapper for API calls that manages pendingCalls counter\n   * Increments before the call, decrements in finally block\n   * @param apiCall - The API call to execute\n   * @returns Promise with the API call result\n   */\n  protected async withPendingCall<T extends PlatformData>(\n    apiCall: () => Promise<T>,\n  ): Promise<T> {\n    this.pendingCalls++;\n    try {\n      return await apiCall();\n    }\n    finally {\n      this.pendingCalls--;\n    }\n  }\n}\n", "export type DeviceType =\n  | \"UNKNOWN\"\n  | \"BAG_TAG_PRINTER\"\n  | \"BAG_TAG_FEEDER\"\n  | \"BAG_TAG_DISPENSER\"\n  | \"BOARDING_PASS_PRINTER\"\n  | \"BOARDING_PASS_FEEDER\"\n  | \"BOARDING_PASS_DISPENSER\"\n  | \"BARCODE_READER\"\n  | \"PASSPORT_READER\"\n  | \"MSR_READER\"\n  | \"KEY_PAD\"\n  | \"ANNOUNCEMENT\"\n  | \"FEEDER\"\n  | \"DISPENSER\"\n  | \"SCALE\"\n  | \"BIOMETRIC\"\n  | \"CAMERA\"\n  | \"ILLUMINATION\"\n  | \"HEADSET\"\n  | \"INSERTION_BELT\"\n  | \"VERIFICATION_BELT\"\n  | \"PARKING_BELT\"\n  | \"RFID\"\n  | \"AEASBD\"\n  | \"BHS\";\n\nexport const DeviceType: Record<string, DeviceType> = {\n  UNKNOWN: \"UNKNOWN\",\n  BAG_TAG_PRINTER: \"BAG_TAG_PRINTER\",\n  BAG_TAG_FEEDER: \"BAG_TAG_FEEDER\",\n  BAG_TAG_DISPENSER: \"BAG_TAG_DISPENSER\",\n  BOARDING_PASS_PRINTER: \"BOARDING_PASS_PRINTER\",\n  BOARDING_PASS_FEEDER: \"BOARDING_PASS_FEEDER\",\n  BOARDING_PASS_DISPENSER: \"BOARDING_PASS_DISPENSER\",\n  BARCODE_READER: \"BARCODE_READER\",\n  PASSPORT_READER: \"PASSPORT_READER\",\n  MSR_READER: \"MSR_READER\",\n  KEY_PAD: \"KEY_PAD\",\n  ANNOUNCEMENT: \"ANNOUNCEMENT\",\n  FEEDER: \"FEEDER\",\n  DISPENSER: \"DISPENSER\",\n  ILLUMINATION: \"ILLUMINATION\",\n  HEADSET: \"HEADSET\",\n  BIOMETRIC: \"BIOMETRIC\",\n  SCALE: \"SCALE\",\n  CAMERA: \"CAMERA\",\n  INSERTION_BELT: \"INSERTION_BELT\",\n  VERIFICATION_BELT: \"VERIFICATION_BELT\",\n  PARKING_BELT: \"PARKING_BELT\",\n  RFID: \"RFID\",\n  AEASBD: \"AEASBD\",\n  BHS: \"BHS\",\n} satisfies Record<string, DeviceType>;\n", "/**\n * InteractiveComponent - Base for components that can be enabled/disabled\n * Adds enable/disable methods to base component functionality\n */\n\nimport { BaseComponent } from \"./BaseComponent.ts\";\nimport { MessageCodes, type PlatformData } from \"cuss2-typescript-models\";\nimport type { UserEnableCapable } from \"../capabilities/ComponentCapabilities.ts\";\n\nexport abstract class InteractiveComponent extends BaseComponent implements UserEnableCapable {\n  override enabled: boolean = false;\n\n  /**\n   * Enable the component for user interaction\n   * Available to: DISPENSER, USER_INPUT, USER_OUTPUT, MEDIA_INPUT,\n   *               MEDIA_OUTPUT, DISPLAY, BAGGAGE_SCALE, INSERTION_BELT, ANNOUNCEMENT\n   */\n  async enable(): Promise<PlatformData> {\n    const pd = await this.withPendingCall(() => this.api.enable(this.id));\n    this.updateState(pd);\n    this.enabled = true;\n    return pd;\n  }\n\n  /**\n   * Disable the component from user interaction\n   * Available to: DISPENSER, USER_INPUT, USER_OUTPUT, MEDIA_INPUT,\n   *               MEDIA_OUTPUT, DISPLAY, BAGGAGE_SCALE, INSERTION_BELT, ANNOUNCEMENT\n   */\n  async disable(): Promise<PlatformData> {\n    try {\n      const pd = await this.withPendingCall(() => this.api.disable(this.id));\n      this.updateState(pd);\n      this.enabled = false;\n      return pd;\n    }\n    catch (e: unknown) {\n      // Handle OUT_OF_SEQUENCE error gracefully\n      const pd = e as PlatformData;\n      if (pd?.meta?.messageCode === MessageCodes.OUT_OF_SEQUENCE) {\n        this.enabled = false;\n        return pd;\n      }\n      // Re-throw other errors\n      return Promise.reject(e);\n    }\n  }\n}\n", "/**\n * UnknownComponent - Fallback component for unrecognized device types\n *\n * This component is used when the CUSS2 platform reports a device type\n * that doesn't have a specific implementation. It provides the basic\n * BaseComponent functionality without any specialized methods.\n *\n * In a properly configured CUSS2 environment, this should rarely be used\n * as all standard device types have specific implementations.\n */\n\nimport { BaseComponent } from \"./BaseComponent.ts\";\nimport type { Cuss2 } from \"../../cuss2.ts\";\nimport {\n  type BaggageData,\n  type CommonUseBiometricMessage,\n  type CommonUsePaymentMessage,\n  type DataRecordList,\n  type EnvironmentComponent,\n  type IlluminationData,\n  MessageCodes,\n  type PlatformData,\n  type ScreenResolution,\n} from \"cuss2-typescript-models\";\nimport { DeviceType } from \"../deviceType.ts\";\n\nexport class UnknownComponent extends BaseComponent {\n  // Add enabled property\n  override enabled: boolean = false;\n\n  constructor(\n    component: EnvironmentComponent,\n    cuss2: Cuss2,\n  ) {\n    super(component, cuss2, DeviceType.UNKNOWN);\n\n    console.warn(\n      `Unknown component type detected: ${component.componentType}. ` +\n        `Using UnknownComponent fallback. This component will have limited functionality.`,\n    );\n  }\n\n  /**\n   * Enable the component\n   * UnknownComponent may or may not support enable/disable based on actual device type\n   */\n  async enable(): Promise<PlatformData> {\n    const pd = await this.withPendingCall(() => this.api.enable(this.id));\n    this.updateState(pd);\n    this.enabled = true;\n    return pd;\n  }\n\n  /**\n   * Disable the component\n   * UnknownComponent may or may not support disable based on actual device type\n   */\n  async disable(): Promise<PlatformData> {\n    try {\n      const pd = await this.withPendingCall(() => this.api.disable(this.id));\n      this.updateState(pd);\n      this.enabled = false;\n      return pd;\n    }\n    catch (e: unknown) {\n      // Handle OUT_OF_SEQUENCE error gracefully\n      const pd = e as PlatformData;\n      if (pd?.meta?.messageCode === MessageCodes.OUT_OF_SEQUENCE) {\n        this.enabled = false;\n        return pd;\n      }\n      // Re-throw other errors\n      return Promise.reject(e);\n    }\n  }\n\n  /**\n   * Send data to the component\n   * UnknownComponent accepts all data types since we don't know its actual capabilities\n   */\n  async send(\n    dataObj:\n      | DataRecordList\n      | ScreenResolution\n      | IlluminationData\n      | BaggageData\n      | CommonUsePaymentMessage\n      | CommonUseBiometricMessage,\n  ): Promise<PlatformData> {\n    const pd = await this.withPendingCall(() => this.api.send(this.id, dataObj));\n    this.updateState(pd);\n    return pd;\n  }\n}\n", "/**\n * DataInputComponent - Non-interactive components that receive data\n * No enable/disable, cannot send data, but can receive/read data\n */\n\nimport { BaseComponent } from \"./BaseComponent.ts\";\nimport type { DataReadCapable } from \"../capabilities/ComponentCapabilities.ts\";\nimport { type DataRecord, MessageCodes, type PlatformData } from \"cuss2-typescript-models\";\n\nexport abstract class DataInputComponent extends BaseComponent implements DataReadCapable {\n  previousData: DataRecord[] = [];\n\n  override handleMessage(data: PlatformData) {\n    super.handleMessage(data);\n    if (\n      data?.meta?.messageCode === MessageCodes.DATA_PRESENT &&\n      data?.payload?.dataRecords?.length\n    ) {\n      this.previousData = data.payload.dataRecords;\n      this.emit(\"data\", this.previousData);\n    }\n  }\n\n  /**\n   * Read data with timeout (no enable/disable for data components)\n   */\n  read(ms: number = 30000): Promise<DataRecord[]> {\n    return new Promise<DataRecord[]>((resolve, reject) => {\n      const timeoutId = setTimeout(() => {\n        this.off(\"data\", dataHandler);\n        reject(new Error(`Timeout of ${ms}ms exceeded`));\n      }, ms);\n\n      const dataHandler = (data: DataRecord[]): void => {\n        clearTimeout(timeoutId);\n        resolve(data);\n      };\n\n      this.once(\"data\", dataHandler);\n    });\n  }\n}\n", "/**\n * Shared utility functions for component implementations\n * These utilities help DRY up common patterns across component classes\n */\n\nimport type {\n  BaggageData,\n  CommonUseBiometricMessage,\n  CommonUsePaymentMessage,\n  DataRecordList,\n  IlluminationData,\n  PlatformData,\n  ScreenResolution,\n} from \"cuss2-typescript-models\";\n\n// Type for all possible send data types\ntype SendDataTypes =\n  | DataRecordList\n  | BaggageData\n  | CommonUseBiometricMessage\n  | CommonUsePaymentMessage\n  | IlluminationData\n  | ScreenResolution;\n\n/**\n * Shared implementation for the send() method used by output components\n * This pattern is used by DataOutputComponent, MediaOutputComponent, and UserOutputComponent\n *\n * Note: This is designed to be called from within the component classes themselves,\n * where they have access to their own protected methods.\n *\n * @param component - The component instance (must have withPendingCall, api, id, and updateState)\n * @param dataObj - The data to send (type varies by component)\n * @returns Promise with the platform response\n */\nexport async function executeSend<T extends SendDataTypes>(\n  component: {\n    readonly id: number;\n    readonly api: {\n      send(id: number, dataObj: SendDataTypes): Promise<PlatformData>;\n    };\n    updateState(pd: PlatformData): void;\n  },\n  dataObj: T,\n  withPendingCall: <R extends PlatformData>(apiCall: () => Promise<R>) => Promise<R>,\n): Promise<PlatformData> {\n  const pd = await withPendingCall(() => component.api.send(component.id, dataObj));\n  component.updateState(pd);\n  return pd;\n}\n", "/**\n * DataOutputComponent - Non-interactive components that can send data\n * No enable/disable, but can send data\n */\n\nimport { BaseComponent } from \"./BaseComponent.ts\";\nimport { executeSend } from \"./componentUtils.ts\";\nimport type { OutputCapable } from \"../capabilities/ComponentCapabilities.ts\";\nimport type { DataRecordList, PlatformData } from \"cuss2-typescript-models\";\n\nexport abstract class DataOutputComponent extends BaseComponent implements OutputCapable {\n  /**\n   * Send data to the component\n   * Available to: DATA_OUTPUT components\n   */\n  async send(dataObj: DataRecordList): Promise<PlatformData> {\n    return await executeSend(this, dataObj, this.withPendingCall.bind(this));\n  }\n}\n", "/**\n * UserInputComponent - Interactive components for user input\n * Can be enabled/disabled, but cannot send data\n */\n\nimport { InteractiveComponent } from \"./InteractiveComponent.ts\";\n\nexport abstract class UserInputComponent extends InteractiveComponent {\n  // User input components can be enabled/disabled but cannot send\n  // They receive input from users\n}\n", "/**\n * UserOutputComponent - Interactive components that output to users\n * Can be enabled/disabled AND can send data\n */\n\nimport { InteractiveComponent } from \"./InteractiveComponent.ts\";\nimport { executeSend } from \"./componentUtils.ts\";\nimport type { OutputCapable } from \"../capabilities/ComponentCapabilities.ts\";\nimport type { CommonUseBiometricMessage, CommonUsePaymentMessage, DataRecordList, PlatformData } from \"cuss2-typescript-models\";\n\nexport abstract class UserOutputComponent extends InteractiveComponent implements OutputCapable {\n  /**\n   * Send data to the component\n   * Available to: USER_OUTPUT components\n   */\n  async send(dataObj: DataRecordList | CommonUseBiometricMessage | CommonUsePaymentMessage): Promise<PlatformData> {\n    return await executeSend(this, dataObj, this.withPendingCall.bind(this));\n  }\n}\n", "/**\n * MediaInputComponent - Interactive components for media/document input\n * Can be enabled/disabled but cannot send data\n * Base for: BarcodeReader, DocumentReader, CardReader, Camera, RFID\n */\n\nimport { InteractiveComponent } from \"./InteractiveComponent.ts\";\nimport type { DataReadCapable } from \"../capabilities/ComponentCapabilities.ts\";\nimport { type DataRecord, MessageCodes, type PlatformData } from \"cuss2-typescript-models\";\n\nexport abstract class MediaInputComponent extends InteractiveComponent implements DataReadCapable {\n  previousData: DataRecord[] = [];\n\n  override handleMessage(data: PlatformData) {\n    super.handleMessage(data);\n    if (\n      data?.meta?.messageCode === MessageCodes.DATA_PRESENT &&\n      data?.payload?.dataRecords?.length\n    ) {\n      this.previousData = data.payload.dataRecords;\n      this.emit(\"data\", this.previousData);\n    }\n  }\n\n  /**\n   * Convenience method to read data with timeout\n   */\n  async read(ms: number = 30000): Promise<DataRecord[]> {\n    await this.enable();\n\n    return new Promise<DataRecord[]>((resolve, reject) => {\n      const timeoutId = setTimeout(() => {\n        this.off(\"data\", dataHandler);\n        reject(new Error(`Timeout of ${ms}ms exceeded`));\n      }, ms);\n\n      const dataHandler = (data: DataRecord[]): void => {\n        clearTimeout(timeoutId);\n        resolve(data);\n      };\n\n      this.once(\"data\", dataHandler);\n    }).finally(() => this.disable());\n  }\n}\n", "/**\n * MediaOutputComponent - Interactive components for media/document output\n * Can be enabled/disabled AND can send data\n * Base for: Printers (BoardingPass, BagTag, GeneralPurpose)\n */\n\nimport { InteractiveComponent } from \"./InteractiveComponent.ts\";\nimport { executeSend } from \"./componentUtils.ts\";\nimport type { OutputCapable } from \"../capabilities/ComponentCapabilities.ts\";\nimport type { DataRecordList, PlatformData } from \"cuss2-typescript-models\";\n\nexport abstract class MediaOutputComponent extends InteractiveComponent implements OutputCapable {\n  /**\n   * Send data to the component (print jobs, etc.)\n   * Available to: MEDIA_OUTPUT components\n   */\n  async send(dataObj: DataRecordList): Promise<PlatformData> {\n    return await executeSend(this, dataObj, this.withPendingCall.bind(this));\n  }\n}\n", "/**\n * BaggageScaleComponent - Interactive component for weighing baggage\n * Can be enabled/disabled but cannot send data\n */\n\nimport { InteractiveComponent } from \"./InteractiveComponent.ts\";\nimport type { DataReadCapable } from \"../capabilities/ComponentCapabilities.ts\";\nimport { type DataRecord, MessageCodes, type PlatformData } from \"cuss2-typescript-models\";\n\nexport class BaggageScaleComponent extends InteractiveComponent implements DataReadCapable {\n  previousData: DataRecord[] = [];\n\n  override handleMessage(data: PlatformData) {\n    super.handleMessage(data);\n    if (\n      data?.meta?.messageCode === MessageCodes.DATA_PRESENT &&\n      data?.payload?.dataRecords?.length\n    ) {\n      this.previousData = data.payload.dataRecords;\n      this.emit(\"data\", this.previousData);\n    }\n  }\n\n  /**\n   * Read weight data with timeout\n   */\n  async read(ms: number = 30000): Promise<DataRecord[]> {\n    await this.enable();\n\n    return new Promise<DataRecord[]>((resolve, reject) => {\n      const timeoutId = setTimeout(() => {\n        this.off(\"data\", dataHandler);\n        reject(new Error(`Timeout of ${ms}ms exceeded`));\n      }, ms);\n\n      const dataHandler = (data: DataRecord[]): void => {\n        clearTimeout(timeoutId);\n        resolve(data);\n      };\n\n      this.once(\"data\", dataHandler);\n    }).finally(() => this.disable());\n  }\n}\n", "/**\n * AnnouncementComponent - Special interactive component with audio controls\n */\n\nimport { InteractiveComponent } from \"./InteractiveComponent.ts\";\nimport type { AnnouncementCapable } from \"../capabilities/ComponentCapabilities.ts\";\nimport type { PlatformData } from \"cuss2-typescript-models\";\n\nexport class AnnouncementComponent extends InteractiveComponent implements AnnouncementCapable {\n  /**\n   * Play SSML formatted audio\n   */\n  async play(xml: string): Promise<PlatformData> {\n    return await this.withPendingCall(() => this.api.announcement.play(this.id, xml));\n  }\n\n  /**\n   * Pause current playback\n   */\n  async pause(): Promise<PlatformData> {\n    return await this.withPendingCall(() => this.api.announcement.pause(this.id));\n  }\n\n  /**\n   * Resume paused playback\n   */\n  async resume(): Promise<PlatformData> {\n    return await this.withPendingCall(() => this.api.announcement.resume(this.id));\n  }\n\n  /**\n   * Stop current playback\n   */\n  async stop(): Promise<PlatformData> {\n    return await this.withPendingCall(() => this.api.announcement.stop(this.id));\n  }\n\n  /**\n   * Convenience method for text-to-speech\n   */\n  say(text: string, lang: string = \"en-US\"): Promise<PlatformData> {\n    const xml = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n      <speak version=\"1.0\" xmlns=\"http://www.w3.org/2001/10/synthesis\"\n             xml:lang=\"${lang}\">${text}</speak>`;\n    return this.play(xml);\n  }\n}\n", "/**\n * DispenserComponent - Can be enabled/disabled and offer media\n */\n\nimport { InteractiveComponent } from \"./InteractiveComponent.ts\";\nimport type { MediaOfferCapable } from \"../capabilities/ComponentCapabilities.ts\";\nimport { MessageCodes, type PlatformData } from \"cuss2-typescript-models\";\n\nexport class DispenserComponent extends InteractiveComponent implements MediaOfferCapable {\n  protected _mediaPresent: boolean = false;\n\n  get mediaPresent(): boolean {\n    return this._mediaPresent;\n  }\n\n  protected set mediaPresent(value: boolean) {\n    this._mediaPresent = value;\n  }\n\n  override handleMessage(data: PlatformData) {\n    super.handleMessage(data);\n    if (data?.meta?.messageCode === MessageCodes.MEDIA_PRESENT) {\n      this._mediaPresent = true;\n      this.emit(\"mediaPresent\", true);\n    }\n    else if (data?.meta?.messageCode === MessageCodes.MEDIA_EMPTY) {\n      this._mediaPresent = false;\n      this.emit(\"mediaPresent\", false);\n    }\n  }\n\n  /**\n   * Offer document to user\n   */\n  async offer(): Promise<PlatformData> {\n    const pd = await this.withPendingCall(() => this.api.offer(this.id));\n    if (pd?.meta?.messageCode === MessageCodes.OK) {\n      this._mediaPresent = false;\n    }\n    return pd;\n  }\n}\n", "/**\n * FeederComponent - Can only offer media, no enable/disable or send\n */\n\nimport { BaseComponent } from \"./BaseComponent.ts\";\nimport type { MediaOfferCapable } from \"../capabilities/ComponentCapabilities.ts\";\nimport type { PlatformData } from \"cuss2-typescript-models\";\n\nexport class FeederComponent extends BaseComponent implements MediaOfferCapable {\n  /**\n   * Offer media from feeder\n   */\n  async offer(): Promise<PlatformData> {\n    return await this.withPendingCall(() => this.api.offer(this.id));\n  }\n}\n", "import { MediaInputComponent } from \"./base/MediaInputComponent.ts\";\nimport { DeviceType } from \"./deviceType.ts\";\nimport type { Cuss2 } from \"../cuss2.ts\";\nimport type { EnvironmentComponent } from \"cuss2-typescript-models\";\n\nexport class BarcodeReader extends MediaInputComponent {\n  constructor(component: EnvironmentComponent, cuss2: Cuss2) {\n    super(component, cuss2, DeviceType.BARCODE_READER);\n  }\n}\n", "import { MediaInputComponent } from \"./base/MediaInputComponent.ts\";\nimport { DeviceType } from \"./deviceType.ts\";\nimport type { Cuss2 } from \"../cuss2.ts\";\nimport type { EnvironmentComponent } from \"cuss2-typescript-models\";\n\nexport class DocumentReader extends MediaInputComponent {\n  constructor(component: EnvironmentComponent, cuss2: Cuss2) {\n    super(component, cuss2, DeviceType.PASSPORT_READER);\n  }\n}\n", "import { MediaInputComponent } from \"./base/MediaInputComponent.ts\";\nimport { DeviceType } from \"./deviceType.ts\";\nimport type { Cuss2 } from \"../cuss2.ts\";\nimport { CussDataTypes, type EnvironmentComponent } from \"cuss2-typescript-models\";\n\nexport class CardReader extends MediaInputComponent {\n  constructor(component: EnvironmentComponent, cuss2: Cuss2) {\n    super(component, cuss2, DeviceType.MSR_READER);\n  }\n\n  async enablePayment(yes: boolean) {\n    await this.setup([{\n      data: \"\",\n      dsTypes: [\n        yes ? \"DS_TYPES_PAYMENT_ISO\" as CussDataTypes : CussDataTypes.DS_TYPES_ISO,\n      ],\n    }]);\n  }\n\n  async readPayment(ms: number = 30000) {\n    await this.enablePayment(true);\n    await this.read(ms);\n    await this.enablePayment(false);\n  }\n}\n", "import { BaggageScaleComponent } from \"./base/BaggageScaleComponent.ts\";\nimport { DeviceType } from \"./deviceType.ts\";\nimport type { Cuss2 } from \"../cuss2.ts\";\nimport type { EnvironmentComponent } from \"cuss2-typescript-models\";\n\nexport class Scale extends BaggageScaleComponent {\n  constructor(component: EnvironmentComponent, cuss2: Cuss2) {\n    super(component, cuss2, DeviceType.SCALE);\n  }\n}\n", "import { MediaInputComponent } from \"./base/MediaInputComponent.ts\";\nimport { DeviceType } from \"./deviceType.ts\";\nimport type { Cuss2 } from \"../cuss2.ts\";\nimport type { EnvironmentComponent } from \"cuss2-typescript-models\";\n\nexport class RFID extends MediaInputComponent {\n  constructor(component: EnvironmentComponent, cuss2: Cuss2) {\n    super(component, cuss2, DeviceType.RFID);\n  }\n}\n", "import { MediaInputComponent } from \"./base/MediaInputComponent.ts\";\nimport { DeviceType } from \"./deviceType.ts\";\nimport type { Cuss2 } from \"../cuss2.ts\";\nimport type { EnvironmentComponent } from \"cuss2-typescript-models\";\n\nexport class Camera extends MediaInputComponent {\n  constructor(component: EnvironmentComponent, cuss2: Cuss2) {\n    super(component, cuss2, DeviceType.CAMERA);\n  }\n}\n", "import { MediaOutputComponent } from \"./base/MediaOutputComponent.ts\";\nimport { DeviceType } from \"./deviceType.ts\";\nimport type { Cuss2 } from \"../cuss2.ts\";\nimport type { EnvironmentComponent } from \"cuss2-typescript-models\";\n\nexport class AEASBD extends MediaOutputComponent {\n  constructor(component: EnvironmentComponent, cuss2: Cuss2) {\n    super(component, cuss2, DeviceType.AEASBD);\n  }\n  // AEA Self Bag Drop - similar to printer, uses ITPS commands\n}\n", "import { DataInputComponent } from \"./base/DataInputComponent.ts\";\nimport { DeviceType } from \"./deviceType.ts\";\nimport type { Cuss2 } from \"../cuss2.ts\";\nimport type { EnvironmentComponent } from \"cuss2-typescript-models\";\n\nexport class BHS extends DataInputComponent {\n  constructor(component: EnvironmentComponent, cuss2: Cuss2) {\n    super(component, cuss2, DeviceType.BHS);\n  }\n}\n", "import { FeederComponent } from \"./base/FeederComponent.ts\";\nimport { DeviceType } from \"./deviceType.ts\";\nimport type { Cuss2 } from \"../cuss2.ts\";\nimport type { EnvironmentComponent } from \"cuss2-typescript-models\";\nimport type { Printer } from \"./Printer.ts\";\n\nexport class Feeder extends FeederComponent {\n  printer?: Printer;\n  constructor(component: EnvironmentComponent, cuss2: Cuss2) {\n    super(component, cuss2, DeviceType.FEEDER);\n  }\n  // offer() method inherited from FeederComponent\n}\n", "import { DispenserComponent } from \"./base/DispenserComponent.ts\";\nimport { DeviceType } from \"./deviceType.ts\";\nimport type { Cuss2 } from \"../cuss2.ts\";\nimport { type EnvironmentComponent, MessageCodes } from \"cuss2-typescript-models\";\nimport type { Printer } from \"./Printer.ts\";\n\nexport class Dispenser extends DispenserComponent {\n  printer?: Printer;\n\n  constructor(component: EnvironmentComponent, cuss2: Cuss2) {\n    super(component, cuss2, DeviceType.DISPENSER);\n\n    // Listen for status changes\n    this.on(\"statusChange\", (status: MessageCodes) => {\n      if (status === MessageCodes.MEDIA_PRESENT) {\n        this.pollUntilReady(true, 2000);\n        if (!this.mediaPresent) {\n          this.mediaPresent = true;\n          this.emit(\"mediaPresent\", true);\n        }\n      }\n      else {\n        if (this.mediaPresent) {\n          this.mediaPresent = false;\n          this.emit(\"mediaPresent\", false);\n        }\n      }\n    });\n  }\n}\n", "import { type ComponentState, MessageCodes, type PlatformData, type UniqueId } from \"cuss2-typescript-models\";\n\nexport class PlatformResponseError extends Error {\n  constructor(pd: PlatformData) {\n    super(\"Platform returned status code: \" + pd.meta.messageCode);\n    this.componentID = pd.meta.componentID as number;\n    this.componentState = pd.meta.componentState;\n    this.requestID = pd.meta.requestID;\n    this.messageCode = pd.meta.messageCode || MessageCodes.SOFTWARE_ERROR;\n  }\n  componentID?: number;\n  componentState: ComponentState | undefined;\n  requestID: UniqueId;\n  messageCode: MessageCodes;\n}\n", "import { MediaOutputComponent } from \"./base/MediaOutputComponent.ts\";\nimport type { BaseComponent } from \"./base/BaseComponent.ts\";\nimport { Feeder } from \"./Feeder.ts\";\nimport { Dispenser } from \"./Dispenser.ts\";\nimport type { DeviceType } from \"./deviceType.ts\";\nimport type { Cuss2 } from \"../cuss2.ts\";\nimport { helpers } from \"../helper.ts\";\nimport {\n  ComponentState,\n  CussDataTypes,\n  type DataRecordList,\n  type EnvironmentComponent,\n  MessageCodes,\n  type PlatformData,\n  PlatformDirectives,\n} from \"cuss2-typescript-models\";\nimport { PlatformResponseError } from \"./platformResponseError.ts\";\n\nexport class Printer extends MediaOutputComponent {\n  constructor(\n    component: EnvironmentComponent,\n    cuss2: Cuss2,\n    _type: DeviceType,\n  ) {\n    super(component, cuss2, _type);\n\n    const missingLink = (msg: string) => {\n      throw new Error(msg);\n    };\n    const linked = component.linkedComponentIDs?.map((id) => cuss2.components?.[id as number] as unknown as BaseComponent) || [];\n\n    this.feeder = linked.find((c) => c instanceof Feeder) ||\n      missingLink(\"Feeder not found for Printer \" + this.id);\n    this.subcomponents.push(this.feeder);\n\n    const d = linked.find((c) => c instanceof Dispenser) as Dispenser;\n    this.dispenser = d ||\n      missingLink(\"Dispenser not found for Printer \" + this.id);\n    this.subcomponents.push(this.dispenser);\n  }\n\n  feeder: Feeder;\n  dispenser: Dispenser;\n\n  get mediaPresent(): boolean {\n    return this.dispenser.mediaPresent;\n  }\n\n  override updateState(msg: PlatformData): void {\n    //CUTnHOLD can cause a TIMEOUT response if the tag is not taken in a certain amount of time.\n    // Unfortunately, it briefly considers the Printer to be UNAVAILABLE.\n    if (\n      msg.meta.platformDirective === PlatformDirectives.PERIPHERALS_SEND &&\n      msg.meta.messageCode === MessageCodes.TIMEOUT &&\n      msg.meta.componentState === ComponentState.UNAVAILABLE\n    ) {\n      msg.meta.componentState = ComponentState.READY;\n    }\n\n    // if now ready, query linked components to get their latest status\n    if (!this.ready && msg.meta.componentState === ComponentState.READY) {\n      this.feeder.query().catch(console.error);\n      this.dispenser.query().catch(console.error);\n    }\n    else if (msg.meta.messageCode === MessageCodes.MEDIA_PRESENT) {\n      // Emit mediaPresent event on the dispenser\n      this.dispenser.emit(\"mediaPresent\", true);\n      // query the dispenser- which will start a poller that will detect when the media has been taken\n      this.dispenser.query().catch(console.error);\n    }\n\n    // Call parent updateState to update status and emit events\n    super.updateState(msg);\n  }\n\n  async setupITPS(commands: string[]): Promise<PlatformData> {\n    const dataRecords = commands.map((command: string) => ({\n      data: command as string,\n      dsTypes: [CussDataTypes.DS_TYPES_ITPS],\n    }));\n    return await this.api.setup(this.id, dataRecords);\n  }\n\n  async sendITPS(commands: string[]): Promise<PlatformData> {\n    const dataRecords = commands.map((command: string) => ({\n      data: command as string,\n      dsTypes: [CussDataTypes.DS_TYPES_ITPS],\n    }));\n    return await this.api.send(this.id, dataRecords);\n  }\n\n  async sendITPSCommand(cmd: string): Promise<string> {\n    const pd = await this.setupITPS([cmd]);\n    const records = pd.payload as DataRecordList;\n    if (!records || records.length === 0) {\n      throw new PlatformResponseError(pd);\n    }\n    return records[0].data || \"\";\n  }\n\n  async getEnvironment(): Promise<Record<string, string>> {\n    const es = await this.sendITPSCommand(\"ES\");\n    return helpers.deserializeDictionary(es);\n  }\n\n  protected async getPairedResponse(cmd: string, n: number = 2): Promise<string[]> {\n    const response = await this.sendITPSCommand(cmd);\n    return helpers.split_every(response.substr(response.indexOf(\"OK\") + 2), n) || [];\n  }\n\n  logos = {\n    clear: async (id = \"\"): Promise<boolean> => {\n      const response = await this.sendITPSCommand(\"LC\" + id);\n      return !!response && response.indexOf(\"OK\") > -1;\n    },\n    query: async (): Promise<string[]> => {\n      return await this.getPairedResponse(\"LS\");\n    },\n  };\n\n  pectabs = {\n    clear: async (id = \"\"): Promise<boolean> => {\n      const response = await this.sendITPSCommand(\"PC\" + id);\n      return !!response && response.indexOf(\"OK\") > -1;\n    },\n    query: async (): Promise<string[]> => {\n      return await this.getPairedResponse(\"PS\");\n    },\n  };\n}\n", "import { Printer } from \"./Printer.ts\";\nimport { DeviceType } from \"./deviceType.ts\";\nimport type { Cuss2 } from \"../cuss2.ts\";\nimport type { EnvironmentComponent } from \"cuss2-typescript-models\";\n\nexport class BagTagPrinter extends Printer {\n  constructor(component: EnvironmentComponent, cuss2: Cuss2) {\n    super(component, cuss2, DeviceType.BAG_TAG_PRINTER);\n  }\n\n  override pectabs: {\n    clear: (id?: string) => Promise<boolean>;\n    query: () => Promise<string[]>;\n  } = {\n    clear: async (id = \"\"): Promise<boolean> => {\n      const response = await this.sendITPSCommand(\"PC\" + id);\n      return !!response && response.indexOf(\"OK\") > -1;\n    },\n    query: async (): Promise<string[]> => {\n      return await this.getPairedResponse(\"PS\", 4);\n    },\n  };\n}\n", "import { Printer } from \"./Printer.ts\";\nimport { DeviceType } from \"./deviceType.ts\";\nimport type { Cuss2 } from \"../cuss2.ts\";\nimport type { EnvironmentComponent } from \"cuss2-typescript-models\";\n\nexport class BoardingPassPrinter extends Printer {\n  constructor(component: EnvironmentComponent, cuss2: Cuss2) {\n    super(component, cuss2, DeviceType.BOARDING_PASS_PRINTER);\n  }\n\n  templates: {\n    clear: (id?: string) => Promise<boolean>;\n    query: () => Promise<string[]>;\n  } = {\n    clear: async (id = \"\"): Promise<boolean> => {\n      const response = await this.sendITPSCommand(\"TC\" + id);\n      return !!response && response.indexOf(\"OK\") > -1;\n    },\n    query: async (): Promise<string[]> => {\n      return await this.getPairedResponse(\"TA\");\n    },\n  };\n}\n", "import { UserInputComponent } from \"./base/UserInputComponent.ts\";\nimport { DeviceType } from \"./deviceType.ts\";\nimport type { Cuss2 } from \"../cuss2.ts\";\nimport type { EnvironmentComponent, PlatformData } from \"cuss2-typescript-models\";\n\nexport class Keypad extends UserInputComponent {\n  constructor(component: EnvironmentComponent, cuss2: Cuss2) {\n    super(component, cuss2, DeviceType.KEY_PAD);\n  }\n\n  override handleMessage(message: PlatformData) {\n    super.handleMessage(message);\n    if (message.meta.componentID !== this.id) return;\n\n    const dataRecords = message.payload?.dataRecords;\n    if (dataRecords?.length) {\n      const data = dataRecords.map((dr) => dr.data);\n      const keypadData = {\n        UP: data.includes(\"NAVUP\"),\n        DOWN: data.includes(\"NAVDOWN\"),\n        PREVIOUS: data.includes(\"NAVPREVIOUS\"),\n        NEXT: data.includes(\"NAVNEXT\"),\n        ENTER: data.includes(\"NAVENTER\"),\n        HOME: data.includes(\"NAVHOME\"),\n        END: data.includes(\"NAVEND\"),\n        HELP: data.includes(\"NAVHELP\"),\n        VOLUMEUP: data.includes(\"VOLUMEUP\"),\n        VOLUMEDOWN: data.includes(\"VOLUMEDOWN\"),\n      };\n\n      // Emit keypadData event\n      this.emit(\"keypadData\", keypadData);\n    }\n  }\n}\n", "import { AnnouncementComponent } from \"./base/AnnouncementComponent.ts\";\nimport { DeviceType } from \"./deviceType.ts\";\nimport type { Cuss2 } from \"../cuss2.ts\";\nimport type { EnvironmentComponent } from \"cuss2-typescript-models\";\n\nexport class Announcement extends AnnouncementComponent {\n  constructor(component: EnvironmentComponent, cuss2: Cuss2) {\n    super(component, cuss2, DeviceType.ANNOUNCEMENT);\n  }\n  // All methods inherited from AnnouncementComponent\n}\n", "import { DataOutputComponent } from \"./base/DataOutputComponent.ts\";\nimport { DeviceType } from \"./deviceType.ts\";\nimport type { Cuss2 } from \"../cuss2.ts\";\nimport type { EnvironmentComponent, IlluminationData, PlatformData } from \"cuss2-typescript-models\";\n\n// Define enum for light colors\nenum LightColorNameEnum {\n  Red = \"red\",\n  Green = \"green\",\n  Blue = \"blue\",\n  Yellow = \"yellow\",\n  White = \"white\",\n}\n\nexport class Illumination extends DataOutputComponent {\n  constructor(component: EnvironmentComponent, cuss2: Cuss2) {\n    super(component, cuss2, DeviceType.ILLUMINATION);\n  }\n\n  /**\n   * Convenience method to control the illumination\n   * Note: Illumination is DATA_OUTPUT - no enable/disable per CUSS spec\n   */\n  async illuminate(\n    duration: number = 0,\n    color?: string | number[],\n    blink?: number[],\n  ): Promise<PlatformData> {\n    const name = (typeof color === \"string\") ? LightColorNameEnum[color as keyof typeof LightColorNameEnum] || undefined : undefined;\n    const rgb = (Array.isArray(color) && color.length === 3) ? { red: color[0], green: color[1], blue: color[2] } : undefined;\n    const blinkRate = (Array.isArray(blink) && blink.length === 2) ? { durationOn: blink[0], durationOff: blink[1] } : undefined;\n\n    const illuminationData = {\n      duration,\n      lightColor: { name, rgb },\n      blinkRate,\n    } as IlluminationData;\n\n    // Send as DataRecordList\n    const dataRecords = [{\n      data: JSON.stringify(illuminationData),\n      dsTypes: [\"DS_TYPES_DATASTRUCTURE\" as unknown as never],\n    }];\n\n    return await this.send(dataRecords);\n  }\n\n  /**\n   * Turn off illumination\n   */\n  async turnOff(): Promise<PlatformData> {\n    return await this.illuminate(0);\n  }\n}\n", "import { UserOutputComponent } from \"./base/UserOutputComponent.ts\";\nimport { DeviceType } from \"./deviceType.ts\";\nimport type { Cuss2 } from \"../cuss2.ts\";\nimport type { EnvironmentComponent } from \"cuss2-typescript-models\";\n\nexport class Headset extends UserOutputComponent {\n  constructor(component: EnvironmentComponent, cuss2: Cuss2) {\n    super(component, cuss2, DeviceType.HEADSET);\n  }\n}\n", "import { UserOutputComponent } from \"./base/UserOutputComponent.ts\";\nimport { DeviceType } from \"./deviceType.ts\";\nimport type { Cuss2 } from \"../cuss2.ts\";\nimport type { EnvironmentComponent } from \"cuss2-typescript-models\";\n\nexport class Biometric extends UserOutputComponent {\n  constructor(component: EnvironmentComponent, cuss2: Cuss2) {\n    super(component, cuss2, DeviceType.BIOMETRIC);\n  }\n  // Can send CommonUseBiometricMessage via inherited send() method\n}\n", "export class Cuss2Error extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = this.constructor.name;\n    // This is necessary for proper stack trace in TypeScript/ES6 classes\n    Error.captureStackTrace(this, this.constructor);\n  }\n}\n\nexport class AuthenticationError extends Cuss2Error {\n  status: number;\n\n  constructor(message: string, status: number = 401) {\n    super(message);\n    this.status = status;\n  }\n}\n", "// Copyright 2018-2025 the Deno authors. MIT license.\n// This module is browser compatible.\n\nexport function exponentialBackoffWithJitter(\n  cap: number,\n  base: number,\n  attempt: number,\n  multiplier: number,\n  jitter: number,\n) {\n  const exp = Math.min(cap, base * multiplier ** attempt);\n  return (1 - jitter * Math.random()) * exp;\n}\n", "// Copyright 2018-2025 the Deno authors. MIT license.\n// This module is browser compatible.\n\nimport { exponentialBackoffWithJitter } from \"./_util.ts\";\n\n/**\n * Error thrown in {@linkcode retry} once the maximum number of failed attempts\n * has been reached.\n *\n * @example Usage\n * ```ts no-assert ignore\n * import { RetryError } from \"@std/async/retry\";\n *\n * throw new RetryError({ foo: \"bar\" }, 3);\n * ```\n */\nexport class RetryError extends Error {\n  /**\n   * Constructs a new {@linkcode RetryError} instance.\n   *\n   * @param cause the cause for this error.\n   * @param attempts the number of retry attempts made.\n   */\n  constructor(cause: unknown, attempts: number) {\n    super(`Retrying exceeded the maxAttempts (${attempts}).`);\n    this.name = \"RetryError\";\n    this.cause = cause;\n  }\n}\n\n/** Options for {@linkcode retry}. */\nexport interface RetryOptions {\n  /**\n   * How much to backoff after each retry.\n   *\n   * @default {2}\n   */\n  multiplier?: number;\n  /**\n   * The maximum milliseconds between attempts.\n   *\n   * @default {60000}\n   */\n  maxTimeout?: number;\n  /**\n   * The maximum amount of attempts until failure.\n   *\n   * @default {5}\n   */\n  maxAttempts?: number;\n  /**\n   * The initial and minimum amount of milliseconds between attempts.\n   *\n   * @default {1000}\n   */\n  minTimeout?: number;\n  /**\n   * Amount of jitter to introduce to the time between attempts. This is `1`\n   * for full jitter by default.\n   *\n   * @default {1}\n   */\n  jitter?: number;\n}\n\n/**\n * Calls the given (possibly asynchronous) function up to `maxAttempts` times.\n * Retries as long as the given function throws. If the attempts are exhausted,\n * throws a {@linkcode RetryError} with `cause` set to the inner exception.\n *\n * The backoff is calculated by multiplying `minTimeout` with `multiplier` to the power of the current attempt counter (starting at 0 up to `maxAttempts - 1`). It is capped at `maxTimeout` however.\n * How long the actual delay is, depends on `jitter`.\n *\n * When `jitter` is the default value of `1`, waits between two attempts for a\n * randomized amount between 0 and the backoff time. With the default options\n * the maximal delay will be `15s = 1s + 2s + 4s + 8s`. If all five attempts\n * are exhausted the mean delay will be `9.5s = \u00BD(4s + 15s)`.\n *\n * When `jitter` is `0`, waits the full backoff time.\n *\n * @example Example configuration 1\n * ```ts no-assert\n * import { retry } from \"@std/async/retry\";\n * const req = async () => {\n *  // some function that throws sometimes\n * };\n *\n * // Below resolves to the first non-error result of `req`\n * const retryPromise = await retry(req, {\n *  multiplier: 2,\n *  maxTimeout: 60000,\n *  maxAttempts: 5,\n *  minTimeout: 100,\n *  jitter: 1,\n * });\n * ```\n *\n * @example Example configuration 2\n * ```ts no-assert\n * import { retry } from \"@std/async/retry\";\n * const req = async () => {\n *  // some function that throws sometimes\n * };\n *\n * // Make sure we wait at least 1 minute, but at most 2 minutes\n * const retryPromise = await retry(req, {\n *  multiplier: 2.34,\n *  maxTimeout: 80000,\n *  maxAttempts: 7,\n *  minTimeout: 1000,\n *  jitter: 0.5,\n * });\n * ```\n *\n * @typeParam T The return type of the function to retry and returned promise.\n * @param fn The function to retry.\n * @param options Additional options.\n * @returns The promise that resolves with the value returned by the function to retry.\n */\nexport async function retry<T>(\n  fn: (() => Promise<T>) | (() => T),\n  options?: RetryOptions,\n): Promise<T> {\n  const {\n    multiplier = 2,\n    maxTimeout = 60000,\n    maxAttempts = 5,\n    minTimeout = 1000,\n    jitter = 1,\n  } = options ?? {};\n\n  if (maxTimeout <= 0) {\n    throw new TypeError(\n      `Cannot retry as 'maxTimeout' must be positive: current value is ${maxTimeout}`,\n    );\n  }\n  if (minTimeout > maxTimeout) {\n    throw new TypeError(\n      `Cannot retry as 'minTimeout' must be <= 'maxTimeout': current values 'minTimeout=${minTimeout}', 'maxTimeout=${maxTimeout}'`,\n    );\n  }\n  if (jitter > 1) {\n    throw new TypeError(\n      `Cannot retry as 'jitter' must be <= 1: current value is ${jitter}`,\n    );\n  }\n\n  let attempt = 0;\n  while (true) {\n    try {\n      return await fn();\n    } catch (error) {\n      if (attempt + 1 >= maxAttempts) {\n        throw new RetryError(error, maxAttempts);\n      }\n\n      const timeout = exponentialBackoffWithJitter(\n        maxTimeout,\n        minTimeout,\n        attempt,\n        multiplier,\n        jitter,\n      );\n      await new Promise((r) => setTimeout(r, timeout));\n    }\n    attempt++;\n  }\n}\n", "import { EventEmitter } from \"./models/EventEmitter.ts\";\nimport { helpers } from \"./helper.ts\";\nimport { PlatformResponseError } from \"./models/index.ts\";\nimport { AuthenticationError } from \"./models/Errors.ts\";\nimport type { ApplicationData, PlatformData, UniqueId } from \"cuss2-typescript-models\";\nimport type { AuthResponse } from \"./models/authResponse.ts\";\nimport { retry } from \"async/retry\";\nimport \"./WebSocket.ts\";\n\n// const log = console.log\nconst log = (..._args: unknown[]) => {};\n\ninterface ConnectionEvents {\n  message: [PlatformData];\n  close: [CloseEvent];\n  open: [];\n  authenticating: [number];\n  connecting: [number];\n  authenticated: [typeof Connection.prototype._auth];\n  messageError: [unknown];\n  socketError: [unknown];\n  authenticationError: [AuthenticationError];\n}\n\n// These are needed for overriding during testing\nexport const global: {\n  readonly WebSocket: typeof globalThis.WebSocket;\n  fetch: typeof globalThis.fetch;\n  clearTimeout: typeof globalThis.clearTimeout;\n  setTimeout: typeof globalThis.setTimeout;\n} = {\n  get WebSocket() {\n    return globalThis.WebSocket;\n  },\n  fetch: globalThis.fetch.bind(globalThis),\n  clearTimeout: globalThis.clearTimeout.bind(globalThis),\n  setTimeout: globalThis.setTimeout.bind(globalThis),\n};\n\nexport class Connection extends EventEmitter {\n  declare on: <K extends keyof ConnectionEvents>(event: K, listener: (...args: ConnectionEvents[K]) => void) => this;\n\n  _auth: { url: string; client_id: string; client_secret: string };\n  _baseURL: string;\n  _socketURL: string;\n  _socket?: WebSocket;\n  _refresher: ReturnType<typeof setTimeout> | null = null;\n  _abortController?: AbortController;\n  deviceID: UniqueId;\n  access_token = \"\";\n  _retryOptions: {\n    maxAttempts?: number;\n    minTimeout?: number;\n    maxTimeout?: number;\n    multiplier?: number;\n    jitter?: number;\n  };\n\n  get isOpen(): boolean {\n    return !!this._socket && this._socket.readyState === 1; // OPEN\n  }\n\n  constructor(\n    baseURL: string,\n    client_id: string,\n    client_secret: string,\n    deviceID: UniqueId,\n    tokenURL?: string,\n    retryOptions?: typeof Connection.prototype._retryOptions,\n  ) {\n    super();\n    this.deviceID = deviceID;\n    (this as EventEmitter).setMaxListeners(0); // Allow unlimited listeners\n\n    // Validate base URL protocol\n    this._validateURL(baseURL, \"Base URL\");\n\n    // Validate token URL protocol if provided\n    if (tokenURL) {\n      this._validateURL(tokenURL, \"Token URL\");\n    }\n\n    // Store just the origin (protocol + hostname + port), stripping any path/query/hash\n    this._baseURL = new URL(baseURL).origin;\n\n    // Set up token URL - always ensure OAuth uses HTTP/HTTPS protocol\n    const oauthUrl = tokenURL\n      ? this._convertToHttpProtocol(tokenURL) // Convert custom token URL to HTTP/HTTPS\n      : `${this._convertToHttpProtocol(this._baseURL)}/oauth/token`;\n\n    this._auth = {\n      url: oauthUrl,\n      client_id,\n      client_secret,\n    };\n\n    // Set up WebSocket URL from the original base URL\n    this._socketURL = this._buildWebSocketURL(this._baseURL);\n\n    this._retryOptions = {\n      maxAttempts: 99,\n      minTimeout: 1000, //ms\n      maxTimeout: 64000, //ms\n      multiplier: 2,\n      jitter: 0.25,\n      ...retryOptions,\n    };\n  }\n\n  private async authorize(): Promise<AuthResponse> {\n    log(\"info\", `Authorizing client '${this._auth.client_id}'`, this._auth.url);\n\n    // Create new abort controller for this authentication attempt\n    this._abortController = new AbortController();\n\n    const params = new URLSearchParams();\n    params.append(\"client_id\", this._auth.client_id);\n    params.append(\"client_secret\", this._auth.client_secret);\n    params.append(\"grant_type\", \"client_credentials\");\n    let attempts = 0;\n\n    const result = await retry(async () => {\n      log(\"info\", `Retrying client '${this._auth.client_id}'`);\n      this.emit(\"authenticating\", ++attempts);\n\n      try {\n        const response = await global.fetch(this._auth.url, {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n          redirect: \"follow\",\n          body: params.toString(), // Form-encoded data\n          signal: this._abortController!.signal,\n        });\n\n        if (response.status === 401) {\n          // Return the error instead of throwing it to stop retries\n          return new AuthenticationError(\"Invalid Credentials\", 401);\n        }\n\n        if (response.status >= 400) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const data = await response.json();\n        const auth = {\n          access_token: data.access_token,\n          expires_in: data.expires_in,\n          token_type: data.token_type,\n        };\n        this.emit(\"authenticated\", auth);\n        return auth;\n      } catch (error) {\n        // If the request was aborted, stop retrying by returning an error\n        if (error instanceof Error && error.name === \"AbortError\") {\n          log(\"info\", \"Authentication aborted\");\n          return new AuthenticationError(\"Authentication aborted\", 0);\n        }\n        // Re-throw other errors to continue retrying\n        throw error;\n      }\n    }, this._retryOptions);\n\n    // Check if the result is an authentication error\n    if (result instanceof AuthenticationError) {\n      this.emit(\"authenticationError\", result);\n      throw result; // Re-throw the error to stop further processing\n    }\n\n    attempts = 0; // Reset attempts on successful authentication\n    return result;\n  }\n\n  static connect(\n    baseURL: string,\n    client_id: string,\n    client_secret: string,\n    deviceID: string,\n    tokenURL?: string,\n    retryOptions?: typeof Connection.prototype._retryOptions,\n  ): Connection {\n    using connection = new Connection(\n      baseURL,\n      client_id,\n      client_secret,\n      deviceID,\n      tokenURL,\n      retryOptions,\n    );\n    connection.once(\"authenticated\", () => connection._createWebSocketAndAttachEventHandlers());\n    setTimeout(() => connection._authenticateAndQueueTokenRefresh(), 10);\n    return connection;\n  }\n\n  private _validateURL(url: string, urlType: string): void {\n    const ALLOWED_PROTOCOLS = [\"http:\", \"https:\", \"ws:\", \"wss:\"];\n\n    try {\n      const parsedUrl = new URL(url);\n\n      if (!ALLOWED_PROTOCOLS.includes(parsedUrl.protocol)) {\n        throw new Error(\n          `${urlType} uses unsupported protocol '${parsedUrl.protocol}'. ` +\n            `Only ${ALLOWED_PROTOCOLS.map((p) => p.replace(\":\", \"://\")).join(\", \")} are supported.`,\n        );\n      }\n    }\n    catch (error) {\n      if (error instanceof TypeError) {\n        throw new Error(`${urlType} is not a valid URL: ${url}`);\n      }\n      throw error; // Re-throw validation errors\n    }\n  }\n\n  private _convertToHttpProtocol(url: string): string {\n    // Convert ws/wss protocols to http/https for OAuth endpoints\n    if (url.startsWith(\"ws://\")) {\n      return url.replace(/^ws:/, \"http:\");\n    }\n    else if (url.startsWith(\"wss://\")) {\n      return url.replace(/^wss:/, \"https:\");\n    }\n    return url;\n  }\n\n  private _buildWebSocketURL(baseURL: string): string {\n    // If URL already has WebSocket protocol, return as is\n    if (baseURL.startsWith(\"ws://\") || baseURL.startsWith(\"wss://\")) {\n      return `${baseURL}/platform/subscribe`;\n    }\n\n    // For HTTP/HTTPS URLs, convert to WebSocket protocol\n    if (baseURL.startsWith(\"https://\")) {\n      const wsBase = baseURL.replace(/^https:\\/\\//, \"\");\n      return `wss://${wsBase}/platform/subscribe`;\n    }\n    else if (baseURL.startsWith(\"http://\")) {\n      const wsBase = baseURL.replace(/^http:\\/\\//, \"\");\n      return `ws://${wsBase}/platform/subscribe`;\n    }\n\n    // This should never happen after validation, but provide a safety net\n    throw new Error(`Unable to build WebSocket URL from base URL: ${baseURL}`);\n  }\n\n  private async _authenticateAndQueueTokenRefresh(): Promise<void> {\n    log(\"info\", \"Getting access_token\");\n\n    if (this._refresher) {\n      global.clearTimeout(this._refresher);\n      this._refresher = null;\n    }\n\n    try {\n      const access_data = await this.authorize();\n\n      this.access_token = access_data.access_token;\n      const expires = Math.max(0, access_data.expires_in);\n\n      if (expires > 0) {\n        log(\"info\", `access_token expires in ${expires} seconds`);\n        this._refresher = global.setTimeout(() => this._authenticateAndQueueTokenRefresh(), (expires - 1) * 1000);\n      }\n    }\n    catch (error) {\n      log(\"error\", \"Authentication failed:\", error);\n    }\n  }\n\n  _createWebSocketAndAttachEventHandlers(): void {\n    let attempts = 0;\n\n    retry(() =>\n      new Promise<boolean>((resolve, reject) => {\n        if (this.isOpen) {\n          return resolve(true);\n        }\n        this.emit(\"connecting\", ++attempts);\n\n        let options: { headers: { Origin: string } } | undefined = undefined;\n        if (typeof Deno !== \"undefined\") {\n          const origin = this._baseURL.startsWith(\"http\") ? this._baseURL : `http://${this._baseURL}`;\n          options = { headers: { Origin: origin } };\n        }\n\n        // @ts-ignore - ws library accepts options as third parameter, browser ignores extra params\n        const socket = new global.WebSocket(this._socketURL, undefined, options);\n\n        socket.onopen = () => {\n          log(\"info\", \"Socket opened: \", this._socketURL);\n          this._socket = socket;\n          attempts = 0;\n          resolve(true);\n          this.emit(\"open\");\n        };\n\n        socket.onmessage = (event: MessageEvent) => {\n          try {\n            const data = JSON.parse(event.data);\n\n            if (data.ping) {\n              socket.send(`{ \"pong\": ${Date.now()} }`);\n              this.emit(\"ping\", data);\n              return;\n            }\n\n            if (data.ackCode) {\n              this.emit(\"ack\", data);\n              return;\n            }\n\n            log(\"socket.onmessage\", event);\n            const platformData = data as PlatformData;\n            this.emit(\"message\", platformData);\n\n            if (platformData?.meta?.requestID) {\n              this.emit(String(platformData.meta.requestID), platformData);\n            }\n          }\n          catch (error) {\n            log(\"error\", \"Error processing message:\", error);\n            this.emit(\"messageError\", error);\n          }\n        };\n\n        socket.onclose = (e: CloseEvent) => {\n          log(\"Websocket Close:\", e.reason);\n          socket.onopen = null;\n          socket.onclose = null;\n          socket.onerror = null;\n          socket.onmessage = null;\n\n          this.emit(\"close\", e);\n\n          // normal close (probably from calling the close() method)\n          if (e.code === 1000) return;\n\n          if (attempts > 0) {\n            reject(e); // cause retry to try again\n          }\n        };\n\n        socket.onerror = (e: Event) => {\n          log(\"Websocket Error:\", e);\n          this.emit(\"socketError\", e);\n        };\n      }), this._retryOptions);\n  }\n\n  send(data: ApplicationData) {\n    if (!this.isOpen) {\n      throw new Error(\"WebSocket connection not established\");\n    }\n    if (data instanceof Object && !data.meta?.oauthToken) {\n      data.meta.oauthToken = this.access_token;\n    }\n    if (data instanceof Object && !data.meta?.deviceID) {\n      data.meta.deviceID = this.deviceID;\n    }\n    this.json(data);\n  }\n\n  json(obj: unknown) {\n    this._socket?.send(JSON.stringify(obj));\n  }\n\n  async sendAndGetResponse(\n    applicationData: ApplicationData,\n  ): Promise<PlatformData> {\n    if (!this.isOpen) {\n      throw new Error(\"WebSocket connection not established\");\n    }\n    const meta = applicationData.meta;\n    const reqId = meta.requestID as string;\n    meta.oauthToken = this.access_token;\n    if (\n      (meta.deviceID === null || meta.deviceID === \"00000000-0000-0000-0000-000000000000\") && this.deviceID !== null\n    ) {\n      meta.deviceID = this.deviceID;\n    }\n    const promise = this.waitFor(reqId, [\"messageError\", \"socketError\", \"close\"]);\n    this._socket?.send(JSON.stringify(applicationData));\n    const message = (await promise) as PlatformData;\n    const messageCode = message.meta?.messageCode;\n    if (messageCode && helpers.isNonCritical(messageCode)) {\n      return message;\n    }\n    else {\n      throw new PlatformResponseError(message);\n    }\n  }\n\n  close(code?: number, reason?: string): void {\n    if (this._refresher) {\n      global.clearTimeout(this._refresher);\n      this._refresher = null;\n    }\n\n    // Abort any ongoing fetch requests\n    if (this._abortController) {\n      this._abortController.abort();\n      this._abortController = undefined;\n    }\n\n    this._socket?.close(code, reason);\n  }\n\n  [Symbol.dispose]() {\n    if (this._refresher) {\n      clearTimeout(this._refresher);\n    }\n  }\n}\n", "import type { ApplicationStateCodes } from \"cuss2-typescript-models\";\n\nexport class StateChange {\n  previous: ApplicationStateCodes;\n  current: ApplicationStateCodes;\n\n  constructor(previous: ApplicationStateCodes, current: ApplicationStateCodes) {\n    this.previous = previous;\n    this.current = current;\n  }\n}\n", "/**\n * Type extensions for cuss2-typescript-models\n *\n * These extensions add missing values to the imported types that are needed\n * by the cuss2-ts SDK but are not present in the generated models.\n */\n\n// Import the original enums\nimport { ComponentTypes, CussDataTypes as _CussDataTypes, DeviceTypes, MediaTypes as _MediaTypes } from \"cuss2-typescript-models\";\n\n// Re-export other imports\nexport type {\n  ApplicationActivation,\n  ComponentCharacteristics,\n  ComponentState,\n  EnvironmentComponent,\n  MessageCodes,\n  PlatformData,\n} from \"cuss2-typescript-models\";\n\n// Re-export unchanged enums\nexport { ComponentTypes, DeviceTypes };\n\n// Allow any string to be used\nexport type MediaTypes = _MediaTypes | string;\nexport type CussDataTypes = _CussDataTypes | string;\n\n// Re-export the enum values under the same name using namespace merging\nexport const MediaTypes = _MediaTypes;\nexport const CussDataTypes = _CussDataTypes;\n", "import {\n  type ComponentCharacteristics,\n  ComponentTypes,\n  CussDataTypes,\n  DeviceTypes,\n  type EnvironmentComponent,\n  MediaTypes,\n} from \"./types/modelExtensions.ts\";\n\nconst dsTypesHas = (charac0: ComponentCharacteristics, type: CussDataTypes) => {\n  return (charac0?.dsTypesList as Array<CussDataTypes>)?.find((d) => d === type);\n};\nconst mediaTypesHas = (mediaTypes: MediaTypes[], type: MediaTypes) => {\n  return mediaTypes?.find((m) => m === type);\n};\n\nconst deviceTypesHas = (\n  deviceTypes: DeviceTypes[] | undefined,\n  type: DeviceTypes,\n) => {\n  return deviceTypes?.find((m) => m === type);\n};\n\nexport class ComponentInterrogation {\n  static isAnnouncement = (component: EnvironmentComponent) => {\n    return component.componentType === ComponentTypes.ANNOUNCEMENT;\n  };\n\n  static isFeeder = (component: EnvironmentComponent) => {\n    return component.componentType === ComponentTypes.FEEDER;\n  };\n\n  static isDispenser = (component: EnvironmentComponent) => {\n    return component.componentType === ComponentTypes.DISPENSER;\n  };\n\n  static isBagTagPrinter = (component: EnvironmentComponent) => {\n    const charac0 = component.componentCharacteristics?.[0];\n    if (!charac0) return;\n    const mediaTypes = charac0.mediaTypesList;\n    return deviceTypesHas(charac0.deviceTypesList, DeviceTypes.PRINT) &&\n      mediaTypesHas(mediaTypes, MediaTypes.BAGGAGETAG);\n  };\n\n  static isBoardingPassPrinter = (component: EnvironmentComponent) => {\n    const charac0 = component.componentCharacteristics?.[0];\n    if (!charac0) return;\n    const mediaTypes = charac0.mediaTypesList;\n    return deviceTypesHas(charac0.deviceTypesList, DeviceTypes.PRINT) &&\n      mediaTypesHas(mediaTypes, MediaTypes.BOARDINGPASS);\n  };\n\n  static isDocumentReader = (component: EnvironmentComponent) => {\n    const charac0 = component.componentCharacteristics?.[0];\n    if (!charac0) return;\n    const mediaTypes = charac0.mediaTypesList;\n    return mediaTypesHas(mediaTypes, MediaTypes.PASSPORT);\n  };\n\n  static isBarcodeReader = (component: EnvironmentComponent) => {\n    const charac0 = component.componentCharacteristics?.[0];\n    if (!charac0) return;\n    return dsTypesHas(charac0, CussDataTypes.DS_TYPES_BARCODE);\n  };\n\n  static isCardReader = (component: EnvironmentComponent) => {\n    const charac0 = component.componentCharacteristics?.[0];\n    if (!charac0) return;\n    const mediaTypes = charac0.mediaTypesList;\n    return mediaTypesHas(mediaTypes, \"MAGCARD\");\n  };\n\n  static isKeypad = (component: EnvironmentComponent) => {\n    const charac0 = component.componentCharacteristics?.[0];\n    if (!charac0) return;\n    return dsTypesHas(charac0, CussDataTypes.DS_TYPES_KEY) ||\n      dsTypesHas(charac0, CussDataTypes.DS_TYPES_KEY_UP) ||\n      dsTypesHas(charac0, CussDataTypes.DS_TYPES_KEY_DOWN);\n  };\n\n  static isIllumination = (component: EnvironmentComponent) => {\n    const charac0 = component.componentCharacteristics?.[0];\n    if (!charac0) return;\n    return deviceTypesHas(charac0.deviceTypesList, DeviceTypes.ILLUMINATION);\n  };\n\n  static isHeadset = (component: EnvironmentComponent) => {\n    if (component.componentType !== ComponentTypes.USER_INPUT) return;\n    const charac0 = component.componentCharacteristics?.[0];\n    if (!charac0) return;\n    const mediaTypes = charac0.mediaTypesList;\n    return deviceTypesHas(charac0.deviceTypesList, DeviceTypes.ASSISTIVE) &&\n      mediaTypesHas(mediaTypes, MediaTypes.AUDIO);\n  };\n\n  static isScale = (component: EnvironmentComponent) => {\n    if (component.componentType !== ComponentTypes.DATA_INPUT) return;\n    const charac0 = component.componentCharacteristics?.[0];\n    if (!charac0) return;\n    return deviceTypesHas(charac0.deviceTypesList, DeviceTypes.SCALE);\n  };\n  static isBiometric = (component: EnvironmentComponent) => {\n    //return component.componentDescription === 'Face Reader';\n    const charac0 = component.componentCharacteristics?.[0];\n    if (!charac0) return;\n    return dsTypesHas(charac0, CussDataTypes.DS_TYPES_BIOMETRIC);\n  };\n  static isCamera = (component: EnvironmentComponent) => {\n    if (component.componentType !== ComponentTypes.DATA_INPUT) return;\n    const charac0 = component.componentCharacteristics?.[0];\n    if (!charac0) return;\n    const mediaTypes = charac0.mediaTypesList;\n    return deviceTypesHas(charac0.deviceTypesList, DeviceTypes.CAMERA) &&\n      mediaTypesHas(mediaTypes, MediaTypes.IMAGE);\n  };\n\n  static isRFIDReader = (component: EnvironmentComponent): boolean => {\n    if (component.componentType !== ComponentTypes.DATA_INPUT) return false;\n    const charac0 = component.componentCharacteristics?.[0];\n    if (!charac0) return false;\n    const mediaTypes = charac0.mediaTypesList;\n    return !!deviceTypesHas(charac0.deviceTypesList, DeviceTypes.CONTACTLESS) &&\n      !!mediaTypesHas(mediaTypes, MediaTypes.RFID);\n  };\n\n  static isAEASBD = (component: EnvironmentComponent): boolean => {\n    if (component.componentType !== ComponentTypes.USER_OUTPUT) return false;\n    const charac0 = component.componentCharacteristics?.[0];\n    if (!charac0) return false;\n    return !!dsTypesHas(charac0, \"SBDAEA\");\n  };\n\n  static isBHS = (component: EnvironmentComponent): boolean => {\n    if (component.componentType !== ComponentTypes.DATA_OUTPUT) return false;\n    const charac0 = component.componentCharacteristics?.[0];\n    if (!charac0) return false;\n    return !!dsTypesHas(charac0, CussDataTypes.DS_TYPES_RP1745);\n  };\n}\n", "import { Build, log } from \"./helper.ts\";\nimport { EventEmitter } from \"./models/EventEmitter.ts\";\n\nimport { Connection } from \"./connection.ts\";\nimport { StateChange } from \"./models/stateChange.ts\";\nimport { ComponentInterrogation } from \"./componentInterrogation.ts\";\nimport {\n  AEASBD,\n  Announcement,\n  BagTagPrinter,\n  BarcodeReader,\n  type BaseComponent,\n  BHS,\n  Biometric,\n  BoardingPassPrinter,\n  Camera,\n  CardReader,\n  Dispenser,\n  DocumentReader,\n  Feeder,\n  Headset,\n  Illumination,\n  type InteractiveComponent,\n  Keypad,\n  RFID,\n  Scale,\n} from \"./models/index.ts\";\nimport { UnknownComponent } from \"./models/base/UnknownComponent.ts\";\n\nimport {\n  ApplicationStateChangeReasonCodes as ChangeReason,\n  ApplicationStateCodes as AppState,\n  type BaggageData,\n  type CommonUseBiometricMessage,\n  type CommonUsePaymentMessage,\n  type ComponentList,\n  CussDataTypes,\n  type DataRecordList,\n  type EnvironmentLevel,\n  type IlluminationData,\n  MessageCodes,\n  type PlatformData,\n  PlatformDirectives,\n  type ScreenResolution,\n} from \"cuss2-typescript-models\";\nimport type { ComponentAPI } from \"./cuss2/ComponentAPI.ts\";\n\nconst {\n  isAnnouncement,\n  isFeeder,\n  isDispenser,\n  isBagTagPrinter,\n  isBoardingPassPrinter,\n  isDocumentReader,\n  isBarcodeReader,\n  isCardReader,\n  isBiometric,\n  isKeypad,\n  isIllumination,\n  isHeadset,\n  isScale,\n  isCamera,\n  isRFIDReader,\n  isAEASBD,\n  isBHS,\n} = ComponentInterrogation;\n\nfunction validateComponentId(componentID: unknown) {\n  if (typeof componentID !== \"number\") {\n    throw new TypeError(\"Invalid componentID: \" + componentID);\n  }\n}\n\nexport class Cuss2 extends EventEmitter {\n  connection: Connection;\n  environment: EnvironmentLevel = {} as EnvironmentLevel;\n  components: Record<string, BaseComponent> | undefined = undefined;\n\n  // State management\n  private _currentState: StateChange = new StateChange(AppState.STOPPED, AppState.STOPPED);\n  /**\n   * How much gold the party starts with.\n   */\n  bagTagPrinter?: BagTagPrinter;\n  boardingPassPrinter?: BoardingPassPrinter;\n  documentReader?: DocumentReader;\n  barcodeReader?: BarcodeReader;\n  illumination?: Illumination;\n  announcement?: Announcement;\n  keypad?: Keypad;\n  cardReader?: CardReader;\n  biometric?: Biometric;\n  scale?: Scale;\n  rfid?: RFID;\n  headset?: Headset;\n  camera?: Camera;\n  bhs?: BHS;\n  aeasbd?: AEASBD;\n\n  pendingStateChange?: AppState;\n  multiTenant?: boolean;\n  accessibleMode: boolean = false;\n  language?: string;\n\n  get state(): AppState {\n    return this._currentState.current;\n  }\n\n  get connected(): Promise<unknown> {\n    if (this.connection.isOpen && this.components) {\n      return Promise.resolve();\n    }\n    return this.waitFor(\"connected\", [\"connection.authenticationError\", \"connection.close\"]);\n  }\n\n  private constructor(connection: Connection) {\n    super();\n    this.connection = connection;\n\n    // Increase max listeners to handle many components\n    // Each component adds a listener for messages and deactivation\n    this.setMaxListeners(100);\n\n    // Subscribe to messages from the connection\n    connection.on(\"message\", (e) => this._handleWebSocketMessage(e));\n    connection.on(\"open\", () =>\n      this._initialize().catch((e) => {\n        log(\"error\", \"Initialization failed\", e);\n        connection.emit(\"error\", new Error(\"Initialization failed: \" + e.message));\n      }));\n  }\n\n  static connect(\n    client_id: string,\n    client_secret: string,\n    wss: string = \"https://localhost:22222\",\n    deviceID: string = \"00000000-0000-0000-0000-000000000000\",\n    tokenURL?: string,\n  ): Cuss2 {\n    using connection = Connection.connect(wss, client_id, client_secret, deviceID, tokenURL);\n    return new Cuss2(connection);\n  }\n\n  private _ensureConnected(): void {\n    if (!this.connection.isOpen) {\n      throw new Error(\"Connection not established. Please await cuss2.connected before making API calls.\");\n    }\n  }\n\n  private async _initialize(): Promise<undefined> {\n    log(\"info\", \"Getting Environment Information\");\n    const environment = await this.api.getEnvironment();\n\n    // hydrate device id if none provided\n    const deviceID = this.connection.deviceID;\n    if (deviceID === \"00000000-0000-0000-0000-000000000000\" || deviceID === null) {\n      this.connection.deviceID = environment.deviceID;\n    }\n    if (!this.state) {\n      throw new Error(\"Platform in abnormal state.\");\n    }\n\n    if (this.state === AppState.SUSPENDED || this.state === AppState.DISABLED) {\n      throw new Error(`Platform has ${this.state} the application`);\n    }\n\n    log(\"info\", \"Getting Component List\");\n    await this.api.getComponents();\n    await this.queryComponents().catch((e) => {\n      log(\"error\", \"error querying components\", e);\n      super.emit(\"queryError\", e);\n    });\n    this.emit(\"connected\", this);\n  }\n\n  private async _handleWebSocketMessage(platformData: PlatformData) {\n    if (!platformData) return;\n    const { meta, payload } = platformData;\n\n    log(\"verbose\", \"[event.currentApplicationState]\", meta.currentApplicationState);\n\n    const unsolicited = !meta.platformDirective;\n    const currentState: AppState = meta.currentApplicationState.applicationStateCode;\n\n    if (meta.messageCode === MessageCodes.SESSION_TIMEOUT) {\n      super.emit(\"sessionTimeout\", meta.messageCode);\n    }\n\n    if (!currentState) {\n      this.connection._socket?.close();\n      throw new Error(\"Platform in invalid state. Cannot continue.\");\n    }\n    if (currentState !== this.state) {\n      const prevState = this.state;\n      log(\"verbose\", `[state changed] old:${prevState} new:${currentState}`);\n\n      // Update current state and emit event\n      this._currentState = new StateChange(prevState, currentState as AppState);\n      super.emit(\"stateChange\", this._currentState);\n\n      if (currentState === AppState.UNAVAILABLE) {\n        await this.queryComponents().catch((e) => {\n          log(\"error\", \"error querying components\", e);\n          super.emit(\"queryError\", e);\n        });\n        if (this._online) {\n          this.checkRequiredComponentsAndSyncState();\n        }\n      }\n      else if (currentState === AppState.ACTIVE) {\n        this.multiTenant = payload?.applicationActivation?.executionMode === \"MAM\";\n        this.accessibleMode = payload?.applicationActivation?.accessibleMode || false;\n        this.language = payload?.applicationActivation?.languageID || \"en-US\";\n        super.emit(\"activated\", payload?.applicationActivation);\n      }\n      if (prevState === AppState.ACTIVE) {\n        super.emit(\"deactivated\", currentState as AppState);\n      }\n    }\n\n    if (typeof meta.componentID === \"number\" && this.components) {\n      const component = this.components[meta.componentID];\n      if (component && component.stateIsDifferent(platformData)) {\n        component.updateState(platformData);\n\n        super.emit(\"componentStateChange\", component);\n\n        if (\n          this._online &&\n          (unsolicited ||\n            meta.platformDirective === PlatformDirectives.PERIPHERALS_QUERY)\n        ) {\n          this.checkRequiredComponentsAndSyncState();\n        }\n      }\n    }\n\n    log(\"verbose\", \"[socket.onmessage]\", platformData);\n\n    // Emit platform message\n    super.emit(\"message\", platformData);\n  }\n\n  api: ComponentAPI = {\n    getEnvironment: async (): Promise<EnvironmentLevel> => {\n      this._ensureConnected();\n      const ad = Build.applicationData(PlatformDirectives.PLATFORM_ENVIRONMENT);\n      const response = await this.connection.sendAndGetResponse(ad);\n      log(\"verbose\", \"[getEnvironment()] response\", response);\n      this.environment = response.payload?.environmentLevel as EnvironmentLevel;\n      return this.environment;\n    },\n\n    getComponents: async (): Promise<ComponentList> => {\n      this._ensureConnected();\n      const ad = Build.applicationData(PlatformDirectives.PLATFORM_COMPONENTS);\n      const response = await this.connection.sendAndGetResponse(ad);\n      log(\"verbose\", \"[getComponents()] response\", response);\n      const componentList = response.payload?.componentList as ComponentList;\n      if (this.components) return componentList;\n\n      const components: Record<string, BaseComponent> = this.components = {};\n\n      //first find feeders & dispensers, so they can be linked when printers are created\n      componentList.forEach((component) => {\n        const id = String(component.componentID);\n        let instance;\n\n        if (isFeeder(component)) instance = new Feeder(component, this);\n        else if (isDispenser(component)) {\n          instance = new Dispenser(component, this);\n        }\n        else return;\n\n        return components[id] = instance;\n      });\n\n      componentList.forEach((component) => {\n        const id = String(component.componentID);\n        let instance;\n\n        if (isAnnouncement(component)) {\n          instance = this.announcement = new Announcement(component, this);\n        }\n        else if (isBagTagPrinter(component)) {\n          instance = this.bagTagPrinter = new BagTagPrinter(component, this);\n        }\n        else if (isBoardingPassPrinter(component)) {\n          instance = this.boardingPassPrinter = new BoardingPassPrinter(\n            component,\n            this,\n          );\n        }\n        else if (isDocumentReader(component)) {\n          instance = this.documentReader = new DocumentReader(component, this);\n        }\n        else if (isBarcodeReader(component)) {\n          instance = this.barcodeReader = new BarcodeReader(component, this);\n        }\n        else if (isCardReader(component)) {\n          instance = this.cardReader = new CardReader(component, this);\n        }\n        else if (isKeypad(component)) {\n          instance = this.keypad = new Keypad(component, this);\n        }\n        else if (isBiometric(component)) {\n          instance = this.biometric = new Biometric(component, this);\n        }\n        else if (isScale(component)) {\n          instance = this.scale = new Scale(component, this);\n        }\n        else if (isCamera(component)) {\n          instance = this.camera = new Camera(component, this);\n        }\n        else if (isRFIDReader(component)) {\n          instance = this.rfid = new RFID(component, this);\n        }\n        else if (isBHS(component)) {\n          instance = this.bhs = new BHS(component, this);\n        }\n        else if (isAEASBD(component)) {\n          instance = this.aeasbd = new AEASBD(component, this);\n        }\n        // subcomponents\n        else if (isFeeder(component)) return; // instance = new Feeder(component, this);\n        else if (isDispenser(component)) return; // instance = new Dispenser(component, this);\n        else if (isIllumination(component)) {\n          instance = this.illumination = new Illumination(component, this);\n        }\n        else if (isHeadset(component)) {\n          instance = this.headset = new Headset(component, this);\n        }\n        else instance = new UnknownComponent(component, this);\n\n        return components[id] = instance as BaseComponent;\n      });\n\n      return componentList;\n    },\n\n    getStatus: async (componentID: number): Promise<PlatformData> => {\n      this._ensureConnected();\n      log(\"verbose\", `[getStatus()] querying component with ID: ${componentID}`);\n      const ad = Build.applicationData(PlatformDirectives.PERIPHERALS_QUERY, {\n        componentID: componentID,\n      });\n      log(\"verbose\", \"[getStatus()] applicationData built:\", ad);\n      const response = await this.connection.sendAndGetResponse(ad);\n      log(\"verbose\", \"[queryDevice()] response\", response);\n      return response;\n    },\n\n    send: async (\n      componentID: number,\n      dataObj:\n        | DataRecordList\n        | ScreenResolution\n        | IlluminationData\n        | BaggageData\n        | CommonUsePaymentMessage\n        | CommonUseBiometricMessage,\n    ): Promise<PlatformData> => {\n      this._ensureConnected();\n      const ad = Build.applicationData(PlatformDirectives.PERIPHERALS_SEND, {\n        componentID: componentID,\n        dataObj,\n      });\n      return await this.connection.sendAndGetResponse(ad);\n    },\n\n    setup: async (\n      componentID: number,\n      dataObj: DataRecordList,\n    ): Promise<PlatformData> => {\n      this._ensureConnected();\n      validateComponentId(componentID);\n      const ad = Build.applicationData(PlatformDirectives.PERIPHERALS_SETUP, {\n        componentID: componentID,\n        dataObj,\n      });\n      return await this.connection.sendAndGetResponse(ad);\n    },\n\n    cancel: async (componentID: number): Promise<PlatformData> => {\n      this._ensureConnected();\n      validateComponentId(componentID);\n      const ad = Build.applicationData(PlatformDirectives.PERIPHERALS_CANCEL, {\n        componentID: componentID,\n      });\n      return await this.connection.sendAndGetResponse(ad);\n    },\n\n    enable: async (componentID: number): Promise<PlatformData> => {\n      this._ensureConnected();\n      validateComponentId(componentID);\n      const ad = Build.applicationData(\n        PlatformDirectives.PERIPHERALS_USERPRESENT_ENABLE,\n        { componentID: componentID },\n      );\n      return await this.connection.sendAndGetResponse(ad);\n    },\n\n    disable: async (componentID: number): Promise<PlatformData> => {\n      this._ensureConnected();\n      validateComponentId(componentID);\n      const ad = Build.applicationData(\n        PlatformDirectives.PERIPHERALS_USERPRESENT_DISABLE,\n        { componentID: componentID },\n      );\n      return await this.connection.sendAndGetResponse(ad);\n    },\n    offer: async (componentID: number): Promise<PlatformData> => {\n      this._ensureConnected();\n      validateComponentId(componentID);\n      const ad = Build.applicationData(\n        PlatformDirectives.PERIPHERALS_USERPRESENT_OFFER,\n        { componentID: componentID },\n      );\n      return await this.connection.sendAndGetResponse(ad);\n    },\n\n    staterequest: async (\n      state: AppState,\n      reasonCode = ChangeReason.NOT_APPLICABLE,\n      reason = \"\",\n    ): Promise<PlatformData | undefined> => {\n      this._ensureConnected();\n      if (this.pendingStateChange) {\n        return Promise.resolve(undefined);\n      }\n      log(\"info\", `Requesting ${state} state`);\n      this.pendingStateChange = state;\n      let response: PlatformData | undefined;\n      try {\n        const ad = Build.stateChange(state, reasonCode, reason);\n        response = await this.connection.sendAndGetResponse(ad);\n        return response;\n      }\n      finally {\n        this.pendingStateChange = undefined;\n      }\n    },\n\n    announcement: {\n      play: async (\n        componentID: number,\n        rawData: string,\n      ): Promise<PlatformData> => {\n        this._ensureConnected();\n        validateComponentId(componentID);\n        const dataObj = [{\n          data: rawData as string,\n          dsTypes: [CussDataTypes.DS_TYPES_SSML],\n        }];\n        const ad = Build.applicationData(\n          PlatformDirectives.PERIPHERALS_ANNOUNCEMENT_PLAY,\n          {\n            componentID: componentID,\n            dataObj,\n          },\n        );\n        return await this.connection.sendAndGetResponse(ad);\n      },\n\n      pause: async (componentID: number): Promise<PlatformData> => {\n        this._ensureConnected();\n        validateComponentId(componentID);\n        const ad = Build.applicationData(\n          PlatformDirectives.PERIPHERALS_ANNOUNCEMENT_PAUSE,\n          { componentID: componentID },\n        );\n        return await this.connection.sendAndGetResponse(ad);\n      },\n\n      resume: async (componentID: number): Promise<PlatformData> => {\n        this._ensureConnected();\n        validateComponentId(componentID);\n        const ad = Build.applicationData(\n          PlatformDirectives.PERIPHERALS_ANNOUNCEMENT_RESUME,\n          { componentID: componentID },\n        );\n        return await this.connection.sendAndGetResponse(ad);\n      },\n\n      stop: async (componentID: number): Promise<PlatformData> => {\n        this._ensureConnected();\n        validateComponentId(componentID);\n        const ad = Build.applicationData(\n          PlatformDirectives.PERIPHERALS_ANNOUNCEMENT_STOP,\n          { componentID: componentID },\n        );\n        return await this.connection.sendAndGetResponse(ad);\n      },\n    },\n  };\n\n  private async _disableAllComponents(): Promise<void> {\n    if (this.components) {\n      const componentList = Object.values(this.components) as BaseComponent[];\n      for await (const component of componentList) {\n        // Check if component has enable/disable capability (InteractiveComponent)\n        if (\"enabled\" in component && (component as InteractiveComponent).enabled) {\n          await (component as InteractiveComponent).disable();\n        }\n      }\n\n      // alternatives to try out...\n\n      // // Option 1: Concurrent disabling (faster)\n      // await Promise.all(\n      //   componentList\n      //     .filter((component) => component?.enabled)\n      //     .map(async (component) => await component.disable()),\n      // );\n\n      // // Option 2: Sequential disabling (if order matters)\n      // for (const component of componentList) {\n      //   if (component?.enabled) await component.disable();\n      // }\n    }\n  }\n\n  async requestInitializeState(): Promise<PlatformData | undefined> {\n    this._ensureConnected();\n    const okToChange = this.state === AppState.STOPPED;\n    return okToChange ? await this.api.staterequest(AppState.INITIALIZE) : Promise.resolve(undefined);\n  }\n\n  async requestUnavailableState(): Promise<PlatformData | undefined> {\n    this._ensureConnected();\n    const okToChange = this.state === AppState.INITIALIZE || this.state === AppState.AVAILABLE ||\n      this.state === AppState.ACTIVE;\n\n    if (okToChange && this.state === AppState.ACTIVE) {\n      await this._disableAllComponents();\n    }\n\n    return okToChange ? this.api.staterequest(AppState.UNAVAILABLE) : Promise.resolve(undefined);\n  }\n\n  async requestAvailableState(): Promise<PlatformData | undefined> {\n    this._ensureConnected();\n    const okToChange = this.state === AppState.UNAVAILABLE || this.state === AppState.ACTIVE;\n\n    if (okToChange && this.state === AppState.ACTIVE) {\n      await this._disableAllComponents();\n    }\n\n    return okToChange ? this.api.staterequest(AppState.AVAILABLE) : Promise.resolve(undefined);\n  }\n\n  async requestActiveState(): Promise<PlatformData | undefined> {\n    this._ensureConnected();\n    const okToChange = this.state === AppState.AVAILABLE || this.state === AppState.ACTIVE;\n    return await (okToChange ? this.api.staterequest(AppState.ACTIVE) : Promise.resolve(undefined));\n  }\n\n  async requestStoppedState(): Promise<PlatformData | undefined> {\n    this._ensureConnected();\n    return await this.api.staterequest(AppState.STOPPED);\n  }\n\n  async requestReload(): Promise<boolean> {\n    this._ensureConnected();\n    const okToChange = !this.state || this.state === AppState.UNAVAILABLE ||\n      this.state === AppState.AVAILABLE || this.state === AppState.ACTIVE;\n\n    if (!okToChange) {\n      return Promise.resolve(false);\n    }\n\n    await this.api.staterequest(AppState.RELOAD);\n    // directly close the socket so reconnect will still happen\n    this.connection._socket?.close(1001, \"Reloading\");\n    return true;\n  }\n\n  async queryComponents(): Promise<boolean> {\n    if (!this.components) {\n      return false;\n    }\n    const componentList = Object.values(this.components) as BaseComponent[];\n    await Promise.all(\n      componentList.map((c) =>\n        c.query()\n          .catch((e) => e)\n      ), //it rejects statusCodes that are not \"OK\" - but here we just need to know what it is, so ignore\n    );\n    return true;\n  }\n\n  get unavailableComponents(): BaseComponent[] {\n    const components = Object.values(this.components || {}) as BaseComponent[];\n    return components.filter((c: BaseComponent) => !c.ready);\n  }\n\n  get unavailableRequiredComponents(): BaseComponent[] {\n    return this.unavailableComponents.filter((c: BaseComponent) => c.required);\n  }\n\n  checkRequiredComponentsAndSyncState(): void {\n    if (this.pendingStateChange) return;\n    if (this._online) {\n      const inactiveRequiredComponents = this.unavailableRequiredComponents;\n      if (!inactiveRequiredComponents.length) {\n        if (this.state === AppState.UNAVAILABLE) {\n          log(\n            \"verbose\",\n            \"[checkRequiredComponentsAndSyncState] All required components OK \u2705. Ready for AVAILABLE state.\",\n          );\n          this.requestAvailableState();\n        }\n      }\n      else {\n        log(\n          \"verbose\",\n          \"[checkRequiredComponentsAndSyncState] Required components UNAVAILABLE:\",\n          inactiveRequiredComponents.map((c: BaseComponent) => c.constructor.name),\n        );\n        this.requestUnavailableState();\n      }\n    }\n    else if (this.components) {\n      this.requestUnavailableState();\n    }\n  }\n\n  private _online: boolean = false;\n  get applicationOnline(): boolean {\n    return this._online;\n  }\n  set applicationOnline(online: boolean) {\n    this._online = online;\n    this.checkRequiredComponentsAndSyncState();\n  }\n}\n\n// this is down here so that it outputs in the documentation after the Cuss2 class\nexport type { ComponentAPI } from \"./cuss2/ComponentAPI.ts\";\n"],
  "mappings": "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",
  "names": ["require_events", "__commonJSMin", "exports", "module", "R", "ReflectApply", "target", "receiver", "args", "ReflectOwnKeys", "ProcessEmitWarning", "warning", "NumberIsNaN", "value", "EventEmitter", "once", "defaultMaxListeners", "checkListener", "listener", "arg", "n", "_getMaxListeners", "that", "type", "i", "doError", "events", "er", "err", "handler", "len", "listeners", "arrayClone", "_addListener", "prepend", "m", "existing", "w", "onceWrapper", "_onceWrap", "state", "wrapped", "list", "position", "originalListener", "spliceOne", "keys", "key", "_listeners", "unwrap", "evlistener", "unwrapListeners", "emitter", "listenerCount", "arr", "copy", "index", "ret", "name", "resolve", "reject", "errorListener", "resolver", "eventTargetAgnosticAddListener", "addErrorHandlerIfEventEmitter", "flags", "wrapListener", "bundle_entry_exports", "__export", "Build", "Cuss2", "LogMessage", "mod_exports", "StateChange", "helpers", "log", "logger", "mod_exports", "__export", "AckCodes", "ApplicationStateChangeReasonCodes", "ApplicationStateCodes", "BiometricProviderMessageType", "BiometricsCharacteristics", "CardBrand", "CharacteristicsDocumentType", "ComponentState", "ComponentTypes", "CussDataTypes", "DataStatus", "DeviceTypes", "EventCategories", "EventModes", "EventTypes", "MediaType", "MediaTypes", "MessageCodes", "NavigationTypes", "OperationDocumentType", "PaymentsCharacteristics", "PlatformDirectives", "SupportedColors", "TransactionDocumentType", "BiometricProviderMessageType", "CharacteristicsDocumentType", "CardBrand", "MediaType", "OperationDocumentType", "TransactionDocumentType", "AckCodes", "ApplicationStateChangeReasonCodes", "ApplicationStateCodes", "BiometricsCharacteristics", "CussDataTypes", "ComponentState", "ComponentTypes", "DataStatus", "DeviceTypes", "EventCategories", "EventModes", "EventTypes", "MediaTypes", "MessageCodes", "NavigationTypes", "PaymentsCharacteristics", "PlatformDirectives", "SupportedColors", "import_events", "LogMessage", "level", "action", "data", "logger", "log", "helpers", "text", "delimiter1", "p", "n", "delimiter2", "out", "k", "v", "messageCode", "criticalErrors", "s", "isDataRecord", "dataRecordObject", "Build", "directive", "options", "componentID", "deviceID", "dataObj", "meta", "payload", "desiredState", "reasonCode", "reason", "brand", "import_events", "EventEmitter", "_EventEmitter", "EE", "event", "errorEvents", "resolve", "reject", "eventMappings", "cleanup", "mapping", "resolver", "e", "catcher", "attachEvent", "eventString", "handler", "dotIndex", "propertyName", "eventName", "property", "errorEvent", "import_events", "DeviceType", "BaseComponent", "component", "cuss2", "_type", "DeviceType", "characteristics", "name", "parentId", "data", "msg", "meta", "dataObj", "pd", "requireOK", "pollingInterval", "poll", "apiCall", "InteractiveComponent", "BaseComponent", "pd", "UnknownComponent", "BaseComponent", "component", "cuss2", "DeviceType", "pd", "dataObj", "DataInputComponent", "BaseComponent", "data", "ms", "resolve", "reject", "timeoutId", "dataHandler", "executeSend", "component", "dataObj", "withPendingCall", "pd", "DataOutputComponent", "BaseComponent", "dataObj", "executeSend", "UserInputComponent", "InteractiveComponent", "UserOutputComponent", "InteractiveComponent", "dataObj", "executeSend", "MediaInputComponent", "InteractiveComponent", "data", "ms", "resolve", "reject", "timeoutId", "dataHandler", "MediaOutputComponent", "InteractiveComponent", "dataObj", "executeSend", "BaggageScaleComponent", "InteractiveComponent", "data", "ms", "resolve", "reject", "timeoutId", "dataHandler", "AnnouncementComponent", "InteractiveComponent", "xml", "text", "lang", "DispenserComponent", "InteractiveComponent", "value", "data", "pd", "FeederComponent", "BaseComponent", "BarcodeReader", "MediaInputComponent", "component", "cuss2", "DeviceType", "DocumentReader", "MediaInputComponent", "component", "cuss2", "DeviceType", "CardReader", "MediaInputComponent", "component", "cuss2", "DeviceType", "yes", "ms", "Scale", "BaggageScaleComponent", "component", "cuss2", "DeviceType", "RFID", "MediaInputComponent", "component", "cuss2", "DeviceType", "Camera", "MediaInputComponent", "component", "cuss2", "DeviceType", "AEASBD", "MediaOutputComponent", "component", "cuss2", "DeviceType", "BHS", "DataInputComponent", "component", "cuss2", "DeviceType", "Feeder", "FeederComponent", "component", "cuss2", "DeviceType", "Dispenser", "DispenserComponent", "component", "cuss2", "DeviceType", "status", "PlatformResponseError", "pd", "Printer", "MediaOutputComponent", "component", "cuss2", "_type", "missingLink", "msg", "linked", "id", "c", "Feeder", "d", "Dispenser", "commands", "dataRecords", "command", "cmd", "pd", "records", "PlatformResponseError", "es", "helpers", "n", "response", "BagTagPrinter", "Printer", "component", "cuss2", "DeviceType", "id", "response", "BoardingPassPrinter", "Printer", "component", "cuss2", "DeviceType", "id", "response", "Keypad", "UserInputComponent", "component", "cuss2", "DeviceType", "message", "dataRecords", "data", "dr", "keypadData", "Announcement", "AnnouncementComponent", "component", "cuss2", "DeviceType", "LightColorNameEnum", "Illumination", "DataOutputComponent", "component", "cuss2", "DeviceType", "duration", "color", "blink", "name", "rgb", "blinkRate", "dataRecords", "Headset", "UserOutputComponent", "component", "cuss2", "DeviceType", "Biometric", "UserOutputComponent", "component", "cuss2", "DeviceType", "Cuss2Error", "message", "AuthenticationError", "status", "exponentialBackoffWithJitter", "cap", "base", "attempt", "multiplier", "jitter", "exp", "RetryError", "cause", "attempts", "retry", "fn", "options", "multiplier", "maxTimeout", "maxAttempts", "minTimeout", "jitter", "attempt", "error", "timeout", "exponentialBackoffWithJitter", "r", "log", "_args", "global", "Connection", "_Connection", "EventEmitter", "baseURL", "client_id", "client_secret", "deviceID", "tokenURL", "retryOptions", "oauthUrl", "params", "attempts", "result", "retry", "response", "AuthenticationError", "data", "auth", "error", "connection", "url", "urlType", "ALLOWED_PROTOCOLS", "parsedUrl", "p", "access_data", "expires", "resolve", "reject", "options", "socket", "event", "platformData", "e", "obj", "applicationData", "meta", "reqId", "promise", "message", "messageCode", "helpers", "PlatformResponseError", "code", "reason", "StateChange", "previous", "current", "MediaTypes", "CussDataTypes", "dsTypesHas", "charac0", "type", "d", "mediaTypesHas", "mediaTypes", "m", "deviceTypesHas", "deviceTypes", "ComponentInterrogation", "component", "MediaTypes", "CussDataTypes", "isAnnouncement", "isFeeder", "isDispenser", "isBagTagPrinter", "isBoardingPassPrinter", "isDocumentReader", "isBarcodeReader", "isCardReader", "isBiometric", "isKeypad", "isIllumination", "isHeadset", "isScale", "isCamera", "isRFIDReader", "isAEASBD", "isBHS", "ComponentInterrogation", "validateComponentId", "componentID", "Cuss2", "_Cuss2", "EventEmitter", "StateChange", "connection", "e", "log", "client_id", "client_secret", "wss", "deviceID", "tokenURL", "Connection", "environment", "platformData", "meta", "payload", "unsolicited", "currentState", "prevState", "component", "ad", "Build", "response", "componentList", "components", "id", "instance", "Feeder", "Dispenser", "Announcement", "BagTagPrinter", "BoardingPassPrinter", "DocumentReader", "BarcodeReader", "CardReader", "Keypad", "Biometric", "Scale", "Camera", "RFID", "BHS", "AEASBD", "Illumination", "Headset", "UnknownComponent", "dataObj", "state", "reasonCode", "reason", "rawData", "okToChange", "c", "inactiveRequiredComponents", "online"]
}
