<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CUSS2.ts Documentation - TypeScript SDK for CUSS2 Platform</title>
</head>
<body>
    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-content">
            <h1 class="hero-title">CUSS2.ts</h1>
            <p class="hero-description">TypeScript SDK for Common Use Self-Service v2 Platform</p>
            <div class="hero-buttons">
                <a href="{{ '/examples/' | relative_url }}" class="btn btn-primary">View Examples</a>
                <a href="{{ '/api/' | relative_url }}" class="btn btn-secondary">API Documentation</a>
            </div>
        </div>
    </section>

    <!-- Features -->
    <section id="services" class="about">
        <div class="container">
            <h2 class="section-title">Features</h2>
            <div class="about-grid">
                <div class="about-card">
                    <div class="card-icon">ğŸš€</div>
                    <h3 class="card-title">TypeScript First</h3>
                    <p class="card-description">Built from the ground up with TypeScript, providing complete type safety and excellent IDE support for all CUSS2 operations.</p>
                </div>
                <div class="about-card">
                    <div class="card-icon">ğŸ”Œ</div>
                    <h3 class="card-title">30+ Components</h3>
                    <p class="card-description">Full support for all CUSS2 peripheral devices including printers, scanners, card readers, scales, and baggage handling systems.</p>
                </div>
                <div class="about-card">
                    <div class="card-icon">ğŸ”„</div>
                    <h3 class="card-title">Auto Reconnection</h3>
                    <p class="card-description">Built-in WebSocket management with automatic reconnection, OAuth token refresh, and exponential backoff strategies.</p>
                </div>
                <div class="about-card">
                    <div class="card-icon">ğŸ“¡</div>
                    <h3 class="card-title">Event-Driven</h3>
                    <p class="card-description">Reactive architecture with typed events for state changes, component updates, and real-time device data streams.</p>
                </div>
                <div class="about-card">
                    <div class="card-icon">ğŸ¯</div>
                    <h3 class="card-title">State Management</h3>
                    <p class="card-description">Automatic state synchronization based on required component availability with built-in state transition validation.</p>
                </div>
                <div class="about-card">
                    <div class="card-icon">ğŸ¦•</div>
                    <h3 class="card-title">Deno Native</h3>
                    <p class="card-description">Designed for the modern Deno runtime with ESM modules, while providing browser bundles for web applications.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Quick Start -->
    <section class="quick-start">
        <div class="container">
            <h2 class="section-title">Quick Start</h2>

            <div class="code-tabs">
                <button class="code-tab active" onclick="showTab('browser')">Browser</button>
                <button class="code-tab" onclick="showTab('deno')">Deno</button>
                <button class="code-tab" onclick="showTab('node')">Node.js</button>
            </div>

            <div id="browser" class="code-content active">
                <div class="code-block">
                    <pre><code class="language-javascript">// Import from CDN
import { Cuss2 } from "https://esm.sh/jsr/@cuss/cuss2-ts@latest";

// Connect to CUSS2 platform
const cuss2 = Cuss2.connect(
  "your-client-id",
  "your-client-secret",
  "wss://platform.example.com" // Optional custom URL
);

// Wait for connection
await cuss2.connected;
console.log("Connected! State:", cuss2.state);

// Work with components
if (cuss2.barcodeReader) {
  await cuss2.barcodeReader.enable();
  cuss2.barcodeReader.on("data", (data) => {
    console.log("Barcodes:", data); // data is string[]
  });
}</code></pre>
                </div>
                <div style="margin-top: 1rem; padding: 1rem; background: rgba(100, 255, 218, 0.1); border: 1px solid rgba(100, 255, 218, 0.2); border-radius: 8px;">
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0;">
                        <strong style="color: var(--primary-cyan);">Note:</strong> Use this code inside a <code>&lt;script type="module"&gt;</code> tag in your HTML file.
                    </p>
                </div>
            </div>

            <div id="deno" class="code-content">
                <div class="code-block">
                    <pre><code class="language-typescript">// Import from JSR
import { Cuss2 } from "jsr:@cuss/cuss2-ts@latest";

// Connect with full configuration
const cuss2 = Cuss2.connect(
  "client-id",
  "client-secret",
  "wss://cuss-platform.example.com",
  "device-id",
  "https://oauth.example.com/token"
);

// Wait for connection
await cuss2.connected;

// Request state transitions
await cuss2.requestInitializeState();
await cuss2.requestAvailableState();

// Enable components
if (cuss2.boardingPassPrinter) {
  await cuss2.boardingPassPrinter.enable();
  await cuss2.boardingPassPrinter.send(printData);
}</code></pre>
                </div>
            </div>

            <div id="node" class="code-content">
                <div class="code-block">
                    <pre><code class="language-javascript">// Install from JSR for Node.js
// npx jsr add @cuss/cuss2-ts

import { Cuss2 } from "@cuss/cuss2-ts";

const cuss2 = Cuss2.connect(
  process.env.CLIENT_ID,
  process.env.CLIENT_SECRET
);

cuss2.connected.then(async () => {
  console.log("Environment:", cuss2.environment);
  console.log("Components:", Object.keys(cuss2.components));

  // Listen for state changes
  cuss2.on("stateChange", (change) => {
    console.log(`State: ${change.previous} â†’ ${change.current}`);
  });
});</code></pre>
                </div>
            </div>
        </div>
    </section>

    <!-- State Management -->
    <section class="container">
        <h2 class="section-title">Application State Flow</h2>
        <div class="state-flow">
            <p style="text-align: center; color: var(--text-secondary); margin-bottom: 2rem;">
                CUSS2 applications transition through well-defined states following strict rules
            </p>
            <div class="state-diagram">
                <div class="state-node">STOPPED</div>
                <span class="state-arrow">â†’</span>
                <div class="state-node">INITIALIZE</div>
                <span class="state-arrow">â†’</span>
                <div class="state-node">UNAVAILABLE</div>
                <span class="state-arrow">â‡„</span>
                <div class="state-node">AVAILABLE</div>
                <span class="state-arrow">â‡„</span>
                <div class="state-node">ACTIVE</div>
            </div>
        </div>
    </section>

    <!-- Supported Components -->
    <section class="components-section container">
        <h2 class="section-title">Supported Components</h2>
        <div class="components-grid">
            <div class="component-badge">
                <div class="icon">ğŸ·ï¸</div>
                <div class="name">BagTagPrinter</div>
            </div>
            <div class="component-badge">
                <div class="icon">ğŸ«</div>
                <div class="name">BoardingPassPrinter</div>
            </div>
            <div class="component-badge">
                <div class="icon">ğŸ“Š</div>
                <div class="name">BarcodeReader</div>
            </div>
            <div class="component-badge">
                <div class="icon">ğŸ’³</div>
                <div class="name">CardReader</div>
            </div>
            <div class="component-badge">
                <div class="icon">ğŸ“„</div>
                <div class="name">DocumentReader</div>
            </div>
            <div class="component-badge">
                <div class="icon">ğŸ“¡</div>
                <div class="name">RFID</div>
            </div>
            <div class="component-badge">
                <div class="icon">âš–ï¸</div>
                <div class="name">Scale</div>
            </div>
            <div class="component-badge">
                <div class="icon">ğŸ¤</div>
                <div class="name">Announcement</div>
            </div>
            <div class="component-badge">
                <div class="icon">ğŸ’¡</div>
                <div class="name">Illumination</div>
            </div>
            <div class="component-badge">
                <div class="icon">ğŸ“·</div>
                <div class="name">Camera</div>
            </div>
            <div class="component-badge">
                <div class="icon">ğŸ”¢</div>
                <div class="name">Keypad</div>
            </div>
            <div class="component-badge">
                <div class="icon">ğŸ‘†</div>
                <div class="name">Biometric</div>
            </div>
        </div>
    </section>

    <!-- API Reference Preview -->
    <section class="container">
        <h2 class="section-title">API Reference</h2>
        <div class="api-cards">
            <a href="./api/cuss2.html" class="api-card">
                <h3>Cuss2 Class</h3>
                <p>Main SDK class for platform connection, state management, and component orchestration.</p>
            </a>
            <a href="./api/connection.html" class="api-card">
                <h3>Connection</h3>
                <p>WebSocket and OAuth management with automatic reconnection and token refresh.</p>
            </a>
            <a href="./api/models.html" class="api-card">
                <h3>Components</h3>
                <p>Base component class and specialized implementations for all CUSS2 peripherals.</p>
            </a>
        </div>
    </section>

    <!-- Prism.js for Syntax Highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-vsc-dark-plus.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>

    <script>
        function showTab(tabName) {
            // Hide all code contents
            document.querySelectorAll('.code-content').forEach(content => {
                content.classList.remove('active');
            });

            // Remove active from all tabs
            document.querySelectorAll('.code-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected content
            document.getElementById(tabName).classList.add('active');

            // Mark clicked tab as active
            event.target.classList.add('active');

            // Re-highlight syntax for newly visible code
            Prism.highlightAll();
        }

        // Initial syntax highlighting
        document.addEventListener('DOMContentLoaded', () => {
            Prism.highlightAll();
        });
    </script>
</body>
</html>
